INSERT INTO knowledge_entries (query, category, hit_frequency, solutions, prerequisites, success_indicators, common_pitfalls, success_rate, claude_version, last_verified, source_url, contributor_email) VALUES
('Vitest caught 1 unhandled error during the test run', 'testing', 'CRITICAL', '[{"solution": "Make async test function and use rejects.toThrowError() instead of toThrowError()", "percentage": 85}, {"solution": "Ensure async functions are awaited properly in test", "percentage": 80}, {"solution": "Mock rejected values with actual Error objects not undefined", "percentage": 75}]'::jsonb, 'Vitest test framework, async/await', 'Test passes without unhandled error message', 'Forgetting await on async functions, mocking with undefined', 0.87, 'haiku', NOW(), 'https://stackoverflow.com/questions/76071613', 'admin:1764226504'),
('TypeError: Cannot read property of undefined in Vitest', 'testing', 'HIGH', '[{"solution": "Use optional chaining operator: obj?.property", "percentage": 92}, {"solution": "Check if variable exists before accessing: if (obj && obj.property)", "percentage": 88}, {"solution": "Provide default values with nullish coalescing: obj ?? defaultValue", "percentage": 85}]'::jsonb, 'JavaScript ES6+, Vitest', 'No TypeError on property access', 'Not handling null/undefined values', 0.90, 'haiku', NOW(), 'https://stackoverflow.com/questions/74487468', 'admin:1764226504'),
('Vitest TypeScript ts2322 type is missing properties error', 'testing', 'HIGH', '[{"solution": "Use setActivePinia(createPinia()) to initialize Pinia store properly in test", "percentage": 88}, {"solution": "Call actual store functions useStoreOne() instead of creating mock objects", "percentage": 85}, {"solution": "Use vi.spyOn() with proper getter/setter syntax for store properties", "percentage": 80}]'::jsonb, 'TypeScript, Pinia stores, Vitest', 'No type errors on store assignments', 'Partial<> type annotations, using as any', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/77164965', 'admin:1764226504'),
('Vitest waitForElementToBeRemoved unhandled error', 'testing', 'HIGH', '[{"solution": "Ensure async/await is used: await waitForElementToBeRemoved(...)", "percentage": 90}, {"solution": "Pass timeout value: await waitForElementToBeRemoved(..., {timeout: 3000})", "percentage": 85}, {"solution": "Use async arrow function: it(''test'', async () => {...})", "percentage": 88}]'::jsonb, 'React Testing Library, async functions', 'Element removed without error', 'Missing await, missing timeout config', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/73102888', 'admin:1764226504'),
('Vitest ClerkProvider ES Module CommonJS package error', 'testing', 'MEDIUM', '[{"solution": "Use require() syntax for CommonJS packages: const ClerkProvider = require(''@clerk/nextjs'')", "percentage": 82}, {"solution": "Import AppRouterContext provider to resolve app router errors", "percentage": 78}, {"solution": "Wrap components with AppRouterContext.Provider in test render", "percentage": 75}]'::jsonb, 'Clerk auth, Next.js, Vitest', 'Components render with auth provider', 'Using default import for CommonJS, missing providers', 0.80, 'haiku', NOW(), 'https://stackoverflow.com/questions/78334920', 'admin:1764226504'),
('Vitest stylesheet import error Can''t find stylesheet to import', 'testing', 'MEDIUM', '[{"solution": "Add resolve.alias in vite.config.ts: {find: ''od-defaults.scss'', replacement: ''actual/path''}", "percentage": 80}, {"solution": "Check import paths use correct relative paths without ~", "percentage": 75}, {"solution": "Ensure SASS paths are resolvable from Vite root", "percentage": 72}]'::jsonb, 'SASS/SCSS, Vite, Angular', 'Stylesheets resolve without pre-transform errors', 'Incorrect relative paths, missing alias configuration', 0.78, 'haiku', NOW(), 'https://stackoverflow.com/questions/79328127', 'admin:1764226504'),
('React refresh preamble was not loaded error in Vitest', 'testing', 'MEDIUM', '[{"solution": "Update @vitejs/plugin-react to version 4.2.1 or higher", "percentage": 87}, {"solution": "Add @viteReactRefresh in Laravel blade head if using Laravel", "percentage": 65}, {"solution": "Ensure vite.config.ts includes @vitejs/plugin-react-swc or @vitejs/plugin-react", "percentage": 85}]'::jsonb, 'React, Vite, Vitest, @vitejs/plugin-react', 'Components render without refresh errors', 'Using outdated @vitejs/plugin-react version', 0.84, 'haiku', NOW(), 'https://stackoverflow.com/questions/76854172', 'admin:1764226504'),
('Vitest getCacheKey cannot read properties of undefined', 'testing', 'MEDIUM', '[{"solution": "Update babel-jest to latest version 27.5.1 or higher", "percentage": 88}, {"solution": "Check vue3-jest transformer configuration in jest.config.js", "percentage": 80}, {"solution": "Ensure babel-jest is compatible with @vue/test-utils version", "percentage": 75}]'::jsonb, 'Vue 3, Jest, Babel', 'Tests run without getCacheKey errors', 'Outdated babel-jest version', 0.82, 'haiku', NOW(), 'https://stackoverflow.com/questions/77762155', 'admin:1764226504'),
('Vitest No Test Found in Suite anonymous error', 'testing', 'MEDIUM', '[{"solution": "Add descriptive name to describe() function: describe(''Test Suite Name'', () => {})", "percentage": 92}, {"solution": "Ensure describe block is not empty or has proper test structure", "percentage": 88}]'::jsonb, 'Vitest test structure', 'Named test suite recognized by Vitest', 'Missing describe() function name', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/79142952', 'admin:1764226504'),
('Vitest No test suite found in file Angular GitHub Actions', 'testing', 'MEDIUM', '[{"solution": "Add tsconfig and workspaceRoot to angular plugin: angular({tsconfig: ''path/to/tsconfig.spec.json'', workspaceRoot: path.resolve(__dirname, ''../../'')})", "percentage": 85}, {"solution": "Ensure Analog vite-plugin-angular is properly configured with monorepo structure", "percentage": 82}]'::jsonb, 'Angular, Vitest, Analog plugin, Monorepo', 'Tests execute in CI environment', 'Incorrect tsconfig path in monorepo', 0.84, 'haiku', NOW(), 'https://stackoverflow.com/questions/79346647', 'admin:1764226504'),
('Vitest Expression expected no tests were found esbuild', 'testing', 'MEDIUM', '[{"solution": "Configure esbuild loader for JSX: esbuild: { loader: ''jsx'', include: /(src)\\/.*\\.jsx?$/ }", "percentage": 86}, {"solution": "Update vitest.config.js with proper esbuild and optimizeDeps configuration", "percentage": 83}]'::jsonb, 'React, Vite, Vitest, esbuild', 'Test files parsed correctly with JSX support', 'Missing esbuild JSX loader configuration', 0.85, 'haiku', NOW(), 'https://stackoverflow.com/questions/77788186', 'admin:1764226504'),
('Vitest received value must be an HTMLElement or SVGElement', 'testing', 'MEDIUM', '[{"solution": "Use waitFor() wrapper: waitFor(() => expect(element).toBeTruthy())", "percentage": 80}, {"solution": "For React Native use toBeTruthy() instead of toBeInTheDocument()", "percentage": 75}, {"solution": "Ensure element exists before assertion with proper async handling", "percentage": 82}]'::jsonb, 'React Testing Library, DOM assertions', 'Element assertions pass without type errors', 'Using toBeInTheDocument() with non-DOM elements', 0.80, 'haiku', NOW(), 'https://stackoverflow.com/questions/66516348', 'admin:1764226504'),
('Vitest Segmentation fault threads error Windows/Git Bash', 'testing', 'HIGH', '[{"solution": "Add threads: false to vitest.config.js test configuration", "percentage": 93}, {"solution": "Run with --no-threads flag: vitest --no-threads", "percentage": 91}]'::jsonb, 'Node.js, Vue.js, Git Bash', 'Tests complete without segmentation fault', 'Using threaded test execution on Windows', 0.92, 'haiku', NOW(), 'https://stackoverflow.com/questions/77189242', 'admin:1764226504'),
('ENOSPC System limit for number of file watchers reached Vitest', 'testing', 'HIGH', '[{"solution": "Set CHOKIDAR_USEPOLLING=1 before running vitest: CHOKIDAR_USEPOLLING=1 vitest", "percentage": 88}, {"solution": "Increase inotify.max_user_watches limit on Linux system", "percentage": 85}, {"solution": "Disable file watching in CI: vitest --run --watch=false", "percentage": 82}]'::jsonb, 'Linux, Vitest, file watcher', 'Vitest runs without ENOSPC errors', 'inotify limit exhaustion on shared runners', 0.87, 'haiku', NOW(), 'https://stackoverflow.com/questions/76312023', 'admin:1764226504'),
('Vitest test timed out 5000ms setInterval/setTimeout', 'testing', 'HIGH', '[{"solution": "Use userEvent instead of fireEvent with fake timers: const user = userEvent.setup({advanceTimers: vi.advanceTimersByTime})", "percentage": 83}, {"solution": "Increase timeout: it(''test'', async () => {...}, {timeout: 10000})", "percentage": 80}]'::jsonb, 'Vitest, fake timers, user-event', 'Test completes within timeout', 'Incompatible fake timers with user-event library', 0.82, 'haiku', NOW(), 'https://stackoverflow.com/questions/78687542', 'admin:1764226504'),
('Vitest File is not defined ReferenceError Node.js environment', 'testing', 'MEDIUM', '[{"solution": "Set environment: ''jsdom'' in vitest test configuration", "percentage": 89}, {"solution": "Add to vite.config.ts: test: { environment: ''jsdom'' }", "percentage": 87}]'::jsonb, 'DOM APIs, Vitest, jsdom', 'File object available in test environment', 'Missing jsdom environment configuration', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/74076180', 'admin:1764226504'),
('Vitest Cannot find module magic-string dist error', 'testing', 'MEDIUM', '[{"solution": "Delete node_modules/vitest and run npm install or yarn install again", "percentage": 85}, {"solution": "Clear npm cache: npm cache clean --force", "percentage": 80}, {"solution": "Ensure magic-string dependency is properly installed", "percentage": 75}]'::jsonb, 'npm/yarn, Vitest dependencies', 'Vitest CLI runs without module resolution errors', 'Corrupted node_modules, missing dependencies', 0.83, 'haiku', NOW(), 'https://stackoverflow.com/questions/76450316', 'admin:1764226504'),
('Vitest Cannot find vitest dist chunks module not found', 'testing', 'MEDIUM', '[{"solution": "Delete local workspace node_modules/vitest directory", "percentage": 87}, {"solution": "Run yarn install from project root in monorepo setup", "percentage": 84}]'::jsonb, 'Yarn workspaces, monorepo, Vitest', 'Vitest loads without chunk resolution errors', 'Duplicate vitest in workspace node_modules', 0.86, 'haiku', NOW(), 'https://stackoverflow.com/questions/78955049', 'admin:1764226504'),
('Vitest Failed to resolve import alias @/ path not found', 'testing', 'MEDIUM', '[{"solution": "Add resolve.alias to vitest.config.ts: resolve: {alias: [{find: ''@'', replacement: resolve(__dirname, ''./src'')}]}", "percentage": 90}, {"solution": "Ensure vite.config.ts and vitest.config.ts both have matching alias configurations", "percentage": 87}]'::jsonb, 'TypeScript path aliases, Vite configuration', 'Import aliases resolve correctly in tests', 'Alias only in vite.config.ts not vitest.config.ts', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/75798479', 'admin:1764226504'),
('Vitest error mocking module hoisted top level variables', 'testing', 'MEDIUM', '[{"solution": "Use vi.doMock() instead of vi.mock() when needing dynamic mocks", "percentage": 84}, {"solution": "Move variable declarations inside test or beforeEach block before vi.mock() call", "percentage": 80}, {"solution": "Import mocked module after mock setup: const mod = await import(''./module'') inside test", "percentage": 82}]'::jsonb, 'Vitest mocking API, ES modules', 'Modules mock without hoisting errors', 'Top-level variables in vi.mock() factory', 0.83, 'haiku', NOW(), 'https://stackoverflow.com/questions/78144648', 'admin:1764226504');
