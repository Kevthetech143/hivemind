INSERT INTO knowledge_entries (query, category, type, solutions, executable_type, prerequisites, common_pitfalls, success_indicators, preview_summary, source_url, contributor_email)
VALUES (
  'Plugin Structure - Organize Claude Code plugins with directories, manifests, and component discovery',
  'claude-code',
  'skill',
  '[{"solution": "Create plugin directory structure with plugin.json manifest", "cli": {"macos": "mkdir -p my-plugin/.claude-plugin && cat > my-plugin/.claude-plugin/plugin.json << ''EOF''\n{\n  \"name\": \"my-plugin\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Plugin description\"\n}\nEOF", "linux": "mkdir -p my-plugin/.claude-plugin && cat > my-plugin/.claude-plugin/plugin.json << ''EOF''\n{\n  \"name\": \"my-plugin\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Plugin description\"\n}\nEOF", "windows": "mkdir my-plugin\\.claude-plugin and create plugin.json with name field"}, "manual": "1. Create plugin root directory: my-plugin/\n2. Create .claude-plugin/ subdirectory\n3. Create plugin.json in .claude-plugin/ with name field (required)\n4. Add version and description (recommended)\n5. Create component directories at plugin root: commands/, agents/, skills/, hooks/\n6. Use kebab-case for all names", "note": "Manifest MUST be in .claude-plugin/. Components go at plugin root, NOT inside .claude-plugin/."}, {"solution": "Set up component directories for auto-discovery", "cli": {"macos": "mkdir -p my-plugin/{commands,agents,skills,hooks} && echo ''---\\nname: test\\ndescription: Test command\\n---\\n\\nTest command implementation'' > my-plugin/commands/test.md", "linux": "mkdir -p my-plugin/{commands,agents,skills,hooks} && echo ''---\\nname: test\\ndescription: Test command\\n---\\n\\nTest command implementation'' > my-plugin/commands/test.md", "windows": "Create commands/, agents/, skills/, hooks/ directories at plugin root with .md and SKILL.md files"}, "manual": "1. Create commands/ directory for slash commands (.md files)\n2. Create agents/ directory for subagents (.md files)\n3. Create skills/ directory with skill subdirectories containing SKILL.md\n4. Create hooks/ directory with hooks.json if needed\n5. Only create directories for components you use\n6. Name files in kebab-case with proper extensions", "note": "Auto-discovery: .md files in commands/ and agents/ load automatically. skills/ looks for SKILL.md in subdirectories."}, {"solution": "Use ${CLAUDE_PLUGIN_ROOT} for portable path references", "cli": {"macos": "cat > .claude-plugin/plugin.json << ''EOF''\n{\n  \"name\": \"my-plugin\",\n  \"mcpServers\": {\n    \"my-server\": {\n      \"command\": \"node\",\n      \"args\": [\"${CLAUDE_PLUGIN_ROOT}/servers/server.js\"]\n    }\n  }\n}\nEOF", "linux": "cat > .claude-plugin/plugin.json << ''EOF''\n{\n  \"name\": \"my-plugin\",\n  \"mcpServers\": {\n    \"my-server\": {\n      \"command\": \"node\",\n      \"args\": [\"${CLAUDE_PLUGIN_ROOT}/servers/server.js\"]\n    }\n  }\n}\nEOF", "windows": "Use ${CLAUDE_PLUGIN_ROOT} in all path references in plugin.json and component files"}, "manual": "1. Replace all hardcoded paths with ${CLAUDE_PLUGIN_ROOT}\n2. Use in manifest JSON: {\"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/tool.sh\"}\n3. Use in component files: Reference scripts at ${CLAUDE_PLUGIN_ROOT}/scripts/\n4. Use in executed scripts: source \"${CLAUDE_PLUGIN_ROOT}/lib/common.sh\"\n5. Never use absolute paths (/Users/...) or relative paths without ${} prefix", "note": "Portability: Plugins install in different locations. ${CLAUDE_PLUGIN_ROOT} ensures paths work everywhere."}]'::jsonb,
  'steps',
  'Plugin root directory created, basic understanding of markdown YAML frontmatter, kebab-case naming familiarity',
  'Manifest in wrong location (not in .claude-plugin/), component directories inside .claude-plugin/ instead of plugin root, hardcoded absolute paths instead of ${CLAUDE_PLUGIN_ROOT}, missing required name field in plugin.json, inconsistent naming conventions',
  'plugin.json loads successfully, commands appear in slash command list, skills auto-activate on trigger, components discovered and available in Claude Code',
  'Structure Claude Code plugins with proper directory layout, manifests, and portable paths for component auto-discovery',
  'https://skillsmp.com/skills/anthropics-claude-code-plugins-plugin-dev-skills-plugin-structure-skill-md',
  'admin:HAIKU_SKILL_1764289548_81336'
);
