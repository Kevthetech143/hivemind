INSERT INTO knowledge_entries (query, category, hit_frequency, solutions, prerequisites, success_indicators, common_pitfalls, success_rate, claude_version, last_verified, source_url, contributor_email) VALUES
('npm ERR! enoent ENOENT: no such file or directory, open package.json', 'deployment', 'HIGH', '[{"solution": "Use CI=false npm run build instead of npm run build to prevent warnings as errors", "percentage": 92}, {"solution": "Remove build directory from .gitignore and remove build command from Netlify settings", "percentage": 78}]'::jsonb, 'Node.js npm', 'Build completes successfully', 'Not checking Netlify build logs for root cause', 0.85, 'haiku', NOW(), 'https://stackoverflow.com/questions/63740794/deploy-failed-netlify', 'admin:1764225244'),
('Treating warnings as errors because process.env.CI = true', 'deployment', 'HIGH', '[{"solution": "Set environment variable CI=false in Netlify UI under Deploy settings", "percentage": 95}, {"solution": "Modify build command to: CI=false npm run build", "percentage": 93}]'::jsonb, 'Node.js npm Create React App', 'Build succeeds without treating warnings as errors', 'Forgetting to restart dev server after changing env vars', 0.94, 'haiku', NOW(), 'https://stackoverflow.com/questions/62415804/how-to-prevent-netlify-from-treating-warnings-as-errors-because-process-env-ci', 'admin:1764225244'),
('Page not found error when refreshing routes in single page application', 'deployment', 'HIGH', '[{"solution": "Create _redirects file in public folder with content: /* /index.html 200", "percentage": 96}, {"solution": "Add netlify.toml with redirect rule: [[redirects]] from = \"/*\" to = \"/\" status = 200", "percentage": 94}]'::jsonb, 'React Router or similar SPA framework', 'Page refreshes without 404 error', 'Not rebuilding after changes to _redirects or netlify.toml', 0.95, 'haiku', NOW(), 'https://stackoverflow.com/questions/50752350/page-not-found-when-trying-to-access-a-site-deployed-on-netlify', 'admin:1764225244'),
('FetchError: invalid json response body Unexpected token < in JSON', 'deployment', 'MEDIUM', '[{"solution": "Check backend API endpoint returns valid JSON not HTML error page", "percentage": 88}, {"solution": "Verify Heroku or backend service is running and accessible", "percentage": 85}]'::jsonb, 'Next.js server-side rendering API integration', 'Backend API returns valid JSON response', 'Not checking actual API response in browser', 0.86, 'haiku', NOW(), 'https://stackoverflow.com/questions/74360851/netlify-deployment-500-internal-server-error-on-one-pages', 'admin:1764225244'),
('Build script returned non-zero exit code: 2 Gatsby build failure', 'deployment', 'HIGH', '[{"solution": "Fix path resolution errors: use absolute paths instead of ../../../ relative paths", "percentage": 87}, {"solution": "Check Netlify CMS config.yml has correct media_folder and public_folder paths", "percentage": 82}]'::jsonb, 'Gatsby.js Netlify CMS', 'Build completes without exit code errors', 'Using relative paths in Netlify CMS configuration', 0.84, 'haiku', NOW(), 'https://stackoverflow.com/questions/65365730/netlify-deploy-124301-am-build-failed-due-to-a-user-error-build-script-retu', 'admin:1764225244'),
('Command failed with exit code 1: next build', 'deployment', 'HIGH', '[{"solution": "Update NODE_VERSION and NPM_VERSION env vars to match your project requirements", "percentage": 91}, {"solution": "Clear Netlify cache and redeploy to use latest dependencies", "percentage": 88}]'::jsonb, 'Next.js with @netlify/plugin-nextjs', 'Build succeeds with exit code 0', 'Node/npm version mismatch between local and Netlify', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/76674388/command-failed-with-exit-code-1-next-build-netlify', 'admin:1764225244'),
('Dependencies installation error Firebase functions module not found', 'deployment', 'MEDIUM', '[{"solution": "Remove package.json from function directory and add dependencies to root package.json", "percentage": 89}, {"solution": "Add @netlify/plugin-functions-install-core plugin to netlify.toml", "percentage": 84}]'::jsonb, 'Netlify Functions Node.js', 'Dependencies install successfully', 'Function has own package.json instead of sharing root', 0.87, 'haiku', NOW(), 'https://stackoverflow.com/questions/69142426/dependencies-installation-error-is-netlify-asking-for-a-previous-version-of', 'admin:1764225244'),
('npm ERR! 404 Not Found babel-preset-active-node-syntax registry error', 'deployment', 'MEDIUM', '[{"solution": "Remove --legacy-peer-deps and --force flags from npm install command", "percentage": 86}, {"solution": "Check package.json for typos or unavailable package versions", "percentage": 83}]'::jsonb, 'Node.js npm', 'npm install succeeds', 'Using incompatible npm install flags with Netlify', 0.84, 'haiku', NOW(), 'https://stackoverflow.com/questions/76392935/netlify-deployment-failed-during-stage-install-dependencies', 'admin:1764225244'),
('process.env undefined Vue environment variables not accessible', 'deployment', 'HIGH', '[{"solution": "Prefix Vue env variables with VUE_APP_: VUE_APP_AUTH0_DOMAIN in Netlify UI and code", "percentage": 97}, {"solution": "Run netlify link to connect local project before using ntl dev", "percentage": 91}]'::jsonb, 'Vue.js Netlify environment variables', 'Environment variables log correctly in console', 'Forgetting VUE_APP_ prefix required by Vue.js', 0.94, 'haiku', NOW(), 'https://stackoverflow.com/questions/69460524/netlify-environment-variables-that-were-set-in-the-ui-are-injected-as-undefined', 'admin:1764225244'),
('React environment variables undefined REACT_APP_ prefix missing', 'deployment', 'HIGH', '[{"solution": "Prefix variables with REACT_APP_: REACT_APP_API_KEY in both .env and Netlify UI", "percentage": 98}, {"solution": "Restart dev server after changing environment variables", "percentage": 95}]'::jsonb, 'React.js Create React App', 'process.env.REACT_APP_* logs correctly', 'Forgetting REACT_APP_ prefix or not restarting dev server', 0.96, 'haiku', NOW(), 'https://stackoverflow.com/questions/70351487/cant-access-netlify-react-environment-variables', 'admin:1764225244'),
('Setting environment variables with dotenv-webpack missing in Netlify build', 'deployment', 'MEDIUM', '[{"solution": "Create .env file dynamically in build script before webpack runs", "percentage": 82}, {"solution": "Set systemvars: true in dotenv webpack plugin config", "percentage": 79}]'::jsonb, 'Webpack dotenv-webpack Node.js', '.env file exists during build', 'Relying on .env file that is in .gitignore', 0.81, 'haiku', NOW(), 'https://stackoverflow.com/questions/48453493/set-environment-variable-for-build-in-netlify', 'admin:1764225244'),
('Next.js custom 404 page showing default Netlify error', 'deployment', 'MEDIUM', '[{"solution": "Add netlify.toml redirect: [[redirects]] from = \"/*\" to = \"/404\" status = 404", "percentage": 88}, {"solution": "Create _redirects file in public folder for SPA routing", "percentage": 85}]'::jsonb, 'Next.js custom error pages', 'Custom 404 page displays instead of Netlify default', 'Not distinguishing between 404 status and 200 redirects', 0.86, 'haiku', NOW(), 'https://stackoverflow.com/questions/69278364/nextjs-custom-404-page-not-showing-when-accessing-invalid-url-in-netlify', 'admin:1764225244'),
('React Router 404 on page refresh with Netlify', 'deployment', 'HIGH', '[{"solution": "Create _redirects in /public with: /* /index.html 200", "percentage": 96}, {"solution": "Add netlify.toml with [[redirects]] rule for all paths", "percentage": 93}]'::jsonb, 'React Router SPA', 'Route refreshes render correct page without 404', 'Not including _redirects file in build artifacts', 0.94, 'haiku', NOW(), 'https://stackoverflow.com/questions/58065603/netlify-renders-404-on-page-refresh-using-react-and-react-router', 'admin:1764225244'),
('Netlify Functions timeout after 10 seconds Task timed out', 'deployment', 'HIGH', '[{"solution": "Close database connection in finally block: mongoose.disconnect()", "percentage": 89}, {"solution": "Optimize function execution time or request Netlify support to increase limit", "percentage": 84}]'::jsonb, 'Netlify Functions MongoDB Mongoose', 'Function completes within 10 second limit', 'Leaving database connections open in Lambda functions', 0.86, 'haiku', NOW(), 'https://stackoverflow.com/questions/59330183/netlify-lambda-function-timing-out-after-10-seconds', 'admin:1764225244'),
('Netlify Lambda function takes longer in production than development', 'deployment', 'MEDIUM', '[{"solution": "Always close browser instance in finally block to free memory", "percentage": 91}, {"solution": "Check for memory leaks by monitoring Lambda memory usage", "percentage": 87}]'::jsonb, 'Netlify Functions Puppeteer chrome-aws-lambda', 'Function memory stable across multiple invocations', 'Not properly closing browser or database connections', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/68345119/timeout-task-after-deploy-to-netify-successful', 'admin:1764225244'),
('504 Gateway Timeout MongoDB connection with Netlify Functions', 'deployment', 'MEDIUM', '[{"solution": "Ensure MongoDB cluster allows Netlify IP ranges in network access", "percentage": 88}, {"solution": "Use connection pooling or persistent connections for faster DB access", "percentage": 85}]'::jsonb, 'Netlify Functions MongoDB Atlas', 'Function returns data within timeout window', 'Not whitelisting Netlify server IPs in MongoDB', 0.86, 'haiku', NOW(), 'https://stackoverflow.com/questions/79699537/netlify-function-works-locally-but-gives-504-timeout-in-production', 'admin:1764225244'),
('EACCES permission denied symlink npm install netlify-cli', 'setup', 'HIGH', '[{"solution": "Use sudo npm install -g --unsafe-perm=true netlify-cli", "percentage": 87}, {"solution": "Use nvm (Node Version Manager) to avoid global permission issues", "percentage": 92}]'::jsonb, 'Node.js npm global installation', 'netlify command available in terminal', 'Installing globally without proper permissions or nvm', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/67458540/unable-to-install-netlify-cli', 'admin:1764225244'),
('xcrun error invalid active developer path Netlify CLI install macOS', 'setup', 'MEDIUM', '[{"solution": "Install Xcode Command Line Tools or use nvm for Node.js", "percentage": 88}, {"solution": "Use brew reinstall netlify-cli instead of npm global install", "percentage": 91}]'::jsonb, 'macOS Xcode Command Line Tools', 'netlify-cli installs without xcrun errors', 'Missing Xcode Command Line Tools on macOS', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/69684447/errors-with-installing-netlify-cli', 'admin:1764225244'),
('zsh command not found netlify on macOS PATH issue', 'setup', 'MEDIUM', '[{"solution": "Add npm global bin directory to PATH in .zshrc", "percentage": 85}, {"solution": "Use brew install netlify-cli for PATH-aware installation", "percentage": 89}]'::jsonb, 'zsh macOS npm PATH environment', 'netlify command available without full path', 'npm global bin not in system PATH', 0.87, 'haiku', NOW(), 'https://stackoverflow.com/questions/66217968/zsh-command-not-found-netlify-on-mac-os', 'admin:1764225244'),
('netlify-cli installs but command netlify not found', 'setup', 'MEDIUM', '[{"solution": "Check npm prefix and ensure global bin directory is in PATH", "percentage": 83}, {"solution": "Reinstall using nvm to avoid permission and PATH issues", "percentage": 88}]'::jsonb, 'Node.js npm global packages', 'netlify command available in terminal', 'Incorrect npm prefix or missing PATH configuration', 0.85, 'haiku', NOW(), 'https://stackoverflow.com/questions/56925859/netlify-cli-installs-but-command-netlify-not-found', 'admin:1764225244'),
('Netlify deploy with --force flag causes build failures', 'deployment', 'MEDIUM', '[{"solution": "Remove --force flag from npm install command", "percentage": 86}, {"solution": "Use --legacy-peer-deps sparingly only when necessary for peer dependencies", "percentage": 81}]'::jsonb, 'Node.js npm peer dependencies', 'Build succeeds without forcing incompatible packages', 'Using --force flag to bypass peer dependency warnings', 0.83, 'haiku', NOW(), 'https://stackoverflow.com/questions/76392935/netlify-deployment-failed-during-stage-install-dependencies', 'admin:1764225244'),
('Netlify build cache stale causes deploy failures after updates', 'deployment', 'MEDIUM', '[{"solution": "Clear Netlify build cache from Site settings > Deploys > trigger deploy", "percentage": 90}, {"solution": "Set explicit NODE_VERSION and NPM_VERSION in environment variables", "percentage": 87}]'::jsonb, 'Netlify build system Node.js', 'Build uses latest dependencies and versions', 'Not clearing cache after major dependency updates', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/76674388/command-failed-with-exit-code-1-next-build-netlify', 'admin:1764225244'),
('Netlify functions missing in deployment but present locally', 'deployment', 'MEDIUM', '[{"solution": "Ensure functions directory is specified correctly in netlify.toml", "percentage": 84}, {"solution": "Verify functions are not in .gitignore or excluded from git", "percentage": 91}]'::jsonb, 'Netlify Functions git configuration', 'Functions deploy and execute in production', 'Functions directory excluded from git or misconfigured in netlify.toml', 0.87, 'haiku', NOW(), 'https://stackoverflow.com/questions/69142426/dependencies-installation-error-is-netlify-asking-for-a-previous-version-of', 'admin:1764225244'),
('Build succeeds locally but fails on Netlify different Node version', 'deployment', 'HIGH', '[{"solution": "Set NODE_VERSION=14.17.0 (or your version) in Netlify environment variables", "percentage": 93}, {"solution": "Use .nvmrc file in project root to specify Node version", "percentage": 91}]'::jsonb, 'Node.js version management .nvmrc', 'Build uses consistent Node version locally and on Netlify', 'Not specifying exact Node version for build reproduction', 0.92, 'haiku', NOW(), 'https://stackoverflow.com/questions/76674388/command-failed-with-exit-code-1-next-build-netlify', 'admin:1764225244');
