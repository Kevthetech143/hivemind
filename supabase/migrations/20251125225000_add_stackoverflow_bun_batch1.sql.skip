-- Add Stack Overflow Bun runtime solutions batch 1

INSERT INTO knowledge_entries (
    query, category, hit_frequency, solutions, prerequisites, success_indicators,
    common_pitfalls, success_rate, claude_version, last_verified, source_url
) VALUES (
    'How to install Bun on Windows without Windows Subsystem for Linux?',
    'stackoverflow-bun',
    'VERY_HIGH',
    '[
        {"solution": "Use official native Windows support in Bun 1.0+: powershell -c \"irm bun.sh/install.ps1|iex\" or npm install -g bun", "percentage": 95, "note": "Official method available since Bun 1.0", "command": "powershell -c \"irm bun.sh/install.ps1|iex\""},
        {"solution": "Install via npm if Node.js is available: npm install -g bun", "percentage": 90, "note": "Requires Node.js to be installed"},
        {"solution": "Use Scoop package manager on Windows: scoop install bun", "percentage": 85, "note": "Alternative Windows installation method"},
        {"solution": "Use GitHub Codespaces for cloud-based development", "percentage": 70, "note": "If local installation is problematic"}
    ]'::jsonb,
    'Windows 10 version 1809 or later, Administrator access for installation',
    'Running bun --version returns version number, bun run command executes successfully',
    'Earlier Bun versions required WSL on Windows. Native support only available in Bun 1.0+. Do not use outdated installation guides.',
    0.92,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/72891945'
),
(
    'Is Bun compatible with NestJS?',
    'stackoverflow-bun',
    'HIGH',
    '[
        {"solution": "Use Bun 1.0.3 or later which added emitDecoratorMetadata support required by NestJS", "percentage": 92, "note": "Critical feature needed for dependency injection"},
        {"solution": "Use NestJS + SWC combination for better performance with minimal overhead", "percentage": 85, "note": "Alternative approach if speed is priority"},
        {"solution": "Note that Bun does not perform type checking - handle separately", "percentage": 80, "note": "Type safety requires external TypeScript checking"}
    ]'::jsonb,
    'Bun 1.0.3+, NestJS project, TypeScript configuration',
    'NestJS modules load successfully, Decorators apply without errors, Development reloads work, No decorator metadata errors',
    'Earlier Bun versions do not support emitDecoratorMetadata which breaks NestJS. Type checking must be handled separately. Build functionality still requires workarounds in some cases.',
    0.88,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/77084231'
),
(
    'Bun command not found after running installation script',
    'stackoverflow-bun',
    'VERY_HIGH',
    '[
        {"solution": "Add BUN_INSTALL to shell config: export BUN_INSTALL=\"/home/USERNAME/.bun\" and export PATH=\"$BUN_INSTALL/bin:$PATH\" then source the config file", "percentage": 95, "note": "Manual PATH configuration after installation", "command": "echo \"export BUN_INSTALL=\\\"$HOME/.bun\\\"\\nexport PATH=\\\"$BUN_INSTALL/bin:$PATH\\\"\" >> ~/.bashrc && source ~/.bashrc"},
        {"solution": "Create symlink to standard location: ln -s $HOME/.bun/bin/bun /usr/local/bin/bun", "percentage": 90, "note": "Makes bun available system-wide"},
        {"solution": "Install via npm instead: npm install -g bun", "percentage": 88, "note": "Requires Node.js but handles PATH automatically"},
        {"solution": "Use Docker: include PATH configuration in Dockerfile", "percentage": 75, "note": "For containerized environments"}
    ]'::jsonb,
    'Bash/Zsh shell access, Home directory write permissions, Basic terminal knowledge, Ability to use whoami command',
    'bun --version displays version number instead of command not found error, bun run executes scripts successfully',
    'Installation script places Bun in ~/.bun/bin/ but does not automatically add to PATH. Must update shell configuration manually or use symlink. Different shells require different config files (.bashrc vs .zshrc vs config.fish).',
    0.93,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/72902668'
),
(
    'How to uninstall Bun completely',
    'stackoverflow-bun',
    'HIGH',
    '[
        {"solution": "Remove installation directory: rm -rf ~/.bun", "percentage": 95, "note": "Complete removal in one command", "command": "rm -rf ~/.bun"},
        {"solution": "Remove shell configuration references: clean up .bashrc, .zshrc, .config/fish/config.fish entries manually", "percentage": 90, "note": "Removes PATH modifications made during installation"},
        {"solution": "Verify removal by running bun command which should return command not found", "percentage": 85, "note": "Test to confirm successful uninstall"}
    ]'::jsonb,
    'Terminal/command line access, Knowledge of which shell you use, Basic command line skills',
    'Running bun command returns command not found error, Reinstallation script runs cleanly, ~/.bun directory no longer exists',
    'Must remove both the installation directory and shell configuration entries. Just deleting directory may leave PATH entries. Use rm -rf carefully to avoid data loss.',
    0.91,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/72989971'
),
(
    'How to set up hot-reload (HMR) with bun dev',
    'stackoverflow-bun',
    'HIGH',
    '[
        {"solution": "Use --hot flag for module cache updates without full restart: bun --hot src/index.ts or bun run --hot src/index.ts", "percentage": 93, "note": "Order matters: flag must come after \"run\" if used", "command": "bun --hot src/index.ts"},
        {"solution": "Use --watch flag for full process restart including environment variable changes: bun --watch index.tsx", "percentage": 85, "note": "Slower but catches all changes"},
        {"solution": "For older Bun versions, use nodemon as workaround with: bun add -d nodemon and configure nodemon.json", "percentage": 75, "note": "Legacy approach for Bun v0.1.6"}
    ]'::jsonb,
    'Bun v0.2.0+ for --hot flag, Hono or similar framework, Valid TypeScript/JavaScript entry point',
    'Server starts at http://localhost:3000, API endpoints respond to requests without serving raw JavaScript, Code changes trigger reload automatically',
    'In Bun v0.1.6, bun dev returns transpiled JavaScript instead of executing server. Order of flags matters: \"bun run --hot\" works but \"bun run --hot\" does not. --hot and --watch serve different purposes.',
    0.89,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/73208846'
),
(
    'Should bun.lockb binary lockfile be versioned in git?',
    'stackoverflow-bun',
    'HIGH',
    '[
        {"solution": "Version bun.lockb in git for reproducible builds across team members and CI/CD pipelines", "percentage": 92, "note": "Standard practice for lock files like package-lock.json"},
        {"solution": "Use --frozen-lockfile flag in CI/CD to ensure exact dependency versions from bun.lockb", "percentage": 88, "note": "Prevents unexpected updates in production"},
        {"solution": "Configure git to handle binary diffs if needed: use git diff instructions from Bun documentation", "percentage": 75, "note": "Optional optimization"}
    ]'::jsonb,
    'Understanding of reproducible builds, Git repository, CI/CD pipeline setup',
    'Consistent builds across team members, Consistent builds across CI/CD and local development, No version drift issues, Exact dependency resolution from lock file',
    'Binary lock files do not display readable diffs on GitHub. Repository size impact is minimal with git compression. Similar to package-lock.json and yarn.lock versioning practices.',
    0.90,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/77093220'
),
(
    'Is a React Native app with Bun runtime possible?',
    'stackoverflow-bun',
    'MEDIUM',
    '[
        {"solution": "Use bun run start for development server if package.json has start script pointing to react-native start", "percentage": 80, "note": "Bun speeds up development server only, not native compilation"},
        {"solution": "Use Hermes JavaScript engine instead for better mobile runtime performance", "percentage": 70, "note": "Hermes improves startup time and bundle execution on device"},
        {"solution": "Consider Bun benefits for testing and linting performance if native runtime performance is not primary concern", "percentage": 65, "note": "Alternative use case"}
    ]'::jsonb,
    'Bun installed, React Native project setup, Metro bundler configured, Valid package.json',
    'Development server starts successfully with bun run start, Metro bundler activates, Device debugging functions normally',
    'Bun will not be compiled into native code - only helps with development server performance. React Native ultimately runs on native runtime. Hermes performance improvement is startup-time only, not runtime performance.',
    0.72,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/72936401'
),
(
    'List files in directory with Bun',
    'stackoverflow-bun',
    'MEDIUM',
    '[
        {"solution": "Use Bun Glob API: import { Glob } from \"bun\"; const glob = new Glob(\"*\"); for (const file of glob.scanSync(\".\")) { console.log(file); }", "percentage": 93, "note": "Bun-native method, use \"**/*\" for recursive", "command": "for (const file of new Glob(\"*\").scanSync(\".\")) { console.log(file); }"},
        {"solution": "Use Node.js fs module reimplemented in Bun: import { readdir } from \"node:fs/promises\"; await readdir(directoryPath)", "percentage": 90, "note": "Works as of Q3 2023 Bun release", "command": "const files = await readdir(\".\");"},
        {"solution": "For recursive listing use Glob with pattern \"**/*\" instead of \"*\"", "percentage": 88, "note": "Returns all files in subdirectories"}
    ]'::jsonb,
    'Bun runtime installed, Directory exists and is readable, Basic file system API knowledge',
    'Console output shows all files and directories, No permission errors, File list matches expected directory contents',
    'Bun.file().exists() does not work for directories - only use for files. Glob API is preferred for Bun-specific code. Node.js fs methods work but are less idiomatic.',
    0.91,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/77097856'
),
(
    'ESLint error: react/display-name [[GeneratorState]] is not present',
    'stackoverflow-bun',
    'MEDIUM',
    '[
        {"solution": "For Bun: generate yarn.lock with bun install --yarn, run yarn-deduplicate, then regenerate bun.lockb", "percentage": 90, "note": "Resolves dependency conflicts specific to Bun"},
        {"solution": "Run npm dedupe for npm projects or pnpm dedupe for pnpm to consolidate duplicate dependencies", "percentage": 88, "note": "Platform-specific deduplication"},
        {"solution": "Fresh install: remove node_modules and lockfiles (rm -rf node_modules yarn.lock), then reinstall", "percentage": 85, "note": "Forces clean dependency resolution"},
        {"solution": "Update eslint-plugin-react to version 7.34.1+", "percentage": 78, "note": "Newer versions address dependency issues"}
    ]'::jsonb,
    'Package manager installed (npm, yarn, pnpm, or bun), Yarn-deduplicate tool available, Next.js project with eslint-config-next',
    'ESLint runs without GeneratorState error, Linting completes successfully, No dependency conflict warnings in output',
    'Multiple incompatible package versions installed simultaneously cause this error. Bun lacks native dedupe command. Fresh install works but can lose other fixes. Update eslint-plugin-react last resort.',
    0.84,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/77464177'
),
(
    'How do you set up types with Bun?',
    'stackoverflow-bun',
    'HIGH',
    '[
        {"solution": "Install @types/bun or bun-types: bun add -D @types/bun", "percentage": 94, "note": "Essential first step for TypeScript support", "command": "bun add -D @types/bun"},
        {"solution": "Reload editor after installation for IntelliSense to activate", "percentage": 92, "note": "Many users miss this critical step"},
        {"solution": "Configure tsconfig.json with compilerOptions including types: [\"bun-types\"], lib: [\"esnext\"], moduleResolution: \"bundler\"", "percentage": 88, "note": "Explicit configuration when defaults fail"},
        {"solution": "Add \"types\": [\"bun\"] to tsconfig.json compilerOptions", "percentage": 82, "note": "Additional configuration option"}
    ]'::jsonb,
    'Bun runtime installed, TypeScript project, tsconfig.json exists, Code editor with IntelliSense support (VS Code, WebStorm)',
    'Type hints appear in IDE autocomplete, Error checking works for TypeScript files, No "Cannot find name \"Bun\"" errors, Autocomplete suggestions work for Bun APIs',
    'Forgetting editor reload after installation prevents IntelliSense from activating. @types/bun may need to be replaced with bun-types in some setups. Type hints require both package installation and editor restart.',
    0.89,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/72902409'
),
(
    'How to debug tests in Bun and VS Code',
    'stackoverflow-bun',
    'MEDIUM',
    '[
        {"solution": "Create .vscode/launch.json with Bun debug configuration: type: \"bun\", request: \"launch\", program: \"${file}\"", "percentage": 92, "note": "Standard debugging setup", "command": "Configure debug: section with bun type in launch.json"},
        {"solution": "Use --inspect-wait flag to pause execution until debugger attaches: bun test --inspect-wait=localhost:6499/ file.test.ts", "percentage": 90, "note": "Command-line approach for terminal debugging"},
        {"solution": "Install Bun for VS Code extension (v0.0.12+) for enhanced debugging support", "percentage": 88, "note": "IDE integration for better experience"},
        {"solution": "Use firsttris.vscode-jest-runner extension with jestrunner.jestCommand: \"bun test\" config for inline test debugging", "percentage": 85, "note": "Alternative with visual debug links"}
    ]'::jsonb,
    'Bun v1.1.18+, VS Code v1.91.1+, Bun for VS Code extension installed, Test files present, Valid launch.json configuration',
    'Breakpoints halt execution, Debugger console displays variable values, Test runs under debugger without errors, Toast confirmation appears after test execution',
    'Requires specific Bun and VS Code versions. Breakpoint reliability depends on proper launch.json configuration. Default breakpoint behavior may not work without proper setup. Jest Runner extension optional but enables convenient testing.',
    0.87,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/77085801'
),
(
    'Check whether a folder already exists with Bun',
    'stackoverflow-bun',
    'MEDIUM',
    '[
        {"solution": "Use readdir() to check directory: await readdir(path) in try/catch, returns true if successful, false on error", "percentage": 94, "note": "Fastest approach - perform operation and handle errors", "command": "try { await readdir(path); return true; } catch { return false; }"},
        {"solution": "Use Bun Glob API without onlyFiles filter: !!Array.from(new Bun.Glob(path).scanSync({ onlyFiles: false }))[0]", "percentage": 82, "note": "Alternative using native Bun API"},
        {"solution": "Never use Bun.file(path).exists() for directories - only works for regular files", "percentage": 80, "note": "Important limitation to remember"}
    ]'::jsonb,
    'Bun runtime installed, Directory path as string parameter, Import permissions for fs module',
    'Function returns true for existing readable directories, Returns false for non-existent paths, No permission errors thrown, Handles both files and directories correctly',
    'Bun.file().exists() explicitly returns false for directories - must use fs.readdir() instead. Checking existence first is slower than attempting operation and handling errors per Bun documentation.',
    0.88,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/77388531'
);
