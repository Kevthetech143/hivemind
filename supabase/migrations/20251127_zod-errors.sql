INSERT INTO knowledge_entries (query, category, hit_frequency, solutions, prerequisites, success_indicators, common_pitfalls, success_rate, claude_version, last_verified, source_url, contributor_email) VALUES
('Zod custom error message string validation', 'validation', 'HIGH', '[{"solution": "Use .min() with object syntax: z.string().min(1, { message: ''Custom error'' })", "percentage": 95}, {"solution": "For multiple validators, chain messages: z.string().min(1, ''required'').email(''invalid email'')", "percentage": 90}]'::jsonb, 'Zod v3.x', 'Custom error message displayed', 'Using string as second parameter instead of object', 0.93, 'haiku', NOW(), 'https://stackoverflow.com/questions/75883100', 'admin:1764228572'),
('ZodError formatting and JSON output', 'validation', 'HIGH', '[{"solution": "Use error.flatten() to get form-level and field-level errors", "percentage": 92}, {"solution": "Wrap parse in try-catch and return error.flatten() in response", "percentage": 88}]'::jsonb, 'Express/Node.js', 'JSON response contains error structure', 'Calling parse outside try-catch block', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/72743126', 'admin:1764228572'),
('Zod too_small validation for numbers', 'validation', 'HIGH', '[{"solution": "Use custom error map to include actual value: case z.ZodIssueCode.too_small: return { message: `Expected >= ${error.minimum} but got ${ctx.data}` }", "percentage": 94}, {"solution": "Use .min(value) or .min(value, { message: ''custom'' })", "percentage": 89}]'::jsonb, 'Zod with custom error map', 'Error message shows actual value received', 'Not accessing ctx.data in error map', 0.92, 'haiku', NOW(), 'https://stackoverflow.com/questions/75784416', 'admin:1764228572'),
('invalid_type error with required_error parameter', 'validation', 'MEDIUM', '[{"solution": "Zod does not have dedicated ''required'' code - use invalid_type check or defaultError fallback", "percentage": 87}, {"solution": "Check if ctx.defaultError === ''Required'' to detect required errors", "percentage": 85}]'::jsonb, 'Zod schema definition', 'Custom required message handled', 'Expecting dedicated required_error code', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/77214951', 'admin:1764228572'),
('Zod array validation custom error for null', 'validation', 'MEDIUM', '[{"solution": "Set global error map with z.setErrorMap() to handle invalid_type for arrays", "percentage": 86}, {"solution": "Use .min(1) on array with custom message", "percentage": 84}]'::jsonb, 'React Hook Form with Zod', 'Array null error returns custom message', 'Array error map not applied at global scope', 0.86, 'haiku', NOW(), 'https://stackoverflow.com/questions/77131197', 'admin:1764228572'),
('tRPC error handling with Zod validation errors', 'validation', 'MEDIUM', '[{"solution": "Override errorFormatter in tRPC to catch ZodError and return flattened errors", "percentage": 89}, {"solution": "Use onError method in tRPC router to intercept ZodErrors", "percentage": 85}]'::jsonb, 'tRPC backend setup', 'Zod errors returned as structured format', 'Not catching ZodError in errorFormatter', 0.87, 'haiku', NOW(), 'https://stackoverflow.com/questions/75063559', 'admin:1764228572'),
('React Hook Form with Zod resolver field error', 'validation', 'HIGH', '[{"solution": "Spread register function inside Input component: {...register(name)}", "percentage": 91}, {"solution": "Pass register and name as separate props to Input component", "percentage": 89}]'::jsonb, 'React Hook Form 7+', 'Error message displayed for field', 'Not spreading register inside custom Input', 0.90, 'haiku', NOW(), 'https://stackoverflow.com/questions/76672351', 'admin:1764228572'),
('Zod enum invalid_enum_value custom error', 'validation', 'MEDIUM', '[{"solution": "Use errorMap in nativeEnum: errorMap: (issue) => { case ''invalid_enum_value'': return { message: ''Custom'' } }", "percentage": 88}, {"solution": "Use message prop: z.nativeEnum(Enum, { message: ''custom'' })", "percentage": 82}]'::jsonb, 'Zod with TypeScript enums', 'Custom error shown for invalid enum', 'Using invalid_type_error instead of errorMap', 0.85, 'haiku', NOW(), 'https://stackoverflow.com/questions/73557949', 'admin:1764228572'),
('Zod superRefine multiple field validation errors', 'validation', 'MEDIUM', '[{"solution": "Use superRefine with ctx.addIssue() to add multiple errors: ctx.addIssue({ code: z.ZodIssueCode.custom, path: [field], message })", "percentage": 92}, {"solution": "Set fatal: true to stop other refinements after first issue", "percentage": 87}]'::jsonb, 'Zod schema refinement', 'Multiple fields show validation errors', 'Using refine instead of superRefine', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/77167264', 'admin:1764228572'),
('Zod unrecognized_keys in strict mode', 'validation', 'MEDIUM', '[{"solution": "Use .strict() on object schema: z.object({...}).strict()", "percentage": 94}, {"solution": "Error code is ''unrecognized_keys'' with array of keys in error.keys", "percentage": 91}]'::jsonb, 'Zod object validation', 'Error thrown for extra properties', 'Not using .strict() on schema', 0.93, 'haiku', NOW(), 'https://stackoverflow.com/questions/70415330', 'admin:1764228572'),
('Zod invalid_type with number field from HTML input', 'validation', 'HIGH', '[{"solution": "Use z.coerce.number() to convert string to number automatically", "percentage": 96}, {"solution": "Use setValueAs in React Hook Form: setValueAs: (v) => Number(v)", "percentage": 88}]'::jsonb, 'HTML form input handling', 'Number parsed correctly from string', 'Passing string to number field without coercion', 0.94, 'haiku', NOW(), 'https://stackoverflow.com/questions/77722749', 'admin:1764228572'),
('Zod invalid_date with coerce.date', 'validation', 'MEDIUM', '[{"solution": "Use errorMap override: errorMap: (issue) => ({ message: issue.code === ''invalid_date'' ? ''Custom'' : defaultError })", "percentage": 89}, {"solution": "Known issue: custom error messages not working with coerce.date() - use errorMap instead", "percentage": 85}]'::jsonb, 'Zod 3.20+', 'Custom date error message displayed', 'Trying to pass error message directly to coerce.date()', 0.87, 'haiku', NOW(), 'https://stackoverflow.com/questions/77465460', 'admin:1764228572'),
('Zod invalid_literal for union types', 'validation', 'MEDIUM', '[{"solution": "Use z.literal() for specific string values: z.union([z.literal(''A''), z.literal(''B'')])", "percentage": 93}, {"solution": "Use z.enum() as shorthand: z.enum([''A'', ''B''])", "percentage": 91}]'::jsonb, 'TypeScript union types', 'Literal value validated correctly', 'Using z.string() instead of z.literal()', 0.92, 'haiku', NOW(), 'https://stackoverflow.com/questions/75317224', 'admin:1764228572'),
('Zod invalid_union discriminated union', 'validation', 'MEDIUM', '[{"solution": "Use discriminatedUnion for type-safe unions: z.discriminatedUnion(''type'', [schema1, schema2])", "percentage": 90}, {"solution": "Error code is ''invalid_union'' when value doesn''t match any union member", "percentage": 87}]'::jsonb, 'Advanced Zod patterns', 'Union member matched based on discriminator', 'Using regular union instead of discriminatedUnion', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/77214951', 'admin:1764228572'),
('Zod date parsing from ISO string', 'validation', 'HIGH', '[{"solution": "Use z.coerce.date() to parse ISO strings: z.coerce.date()", "percentage": 95}, {"solution": "For older versions use z.string().pipe(z.coerce.date())", "percentage": 88}]'::jsonb, 'Zod 3.20+', 'ISO date string parsed to Date object', 'Using z.date() instead of z.coerce.date()', 0.93, 'haiku', NOW(), 'https://stackoverflow.com/questions/75157299', 'admin:1764228572'),
('Zod too_big array length validation', 'validation', 'MEDIUM', '[{"solution": "Use .max(n) on array: z.array(schema).max(5, { message: ''Max 5 items'' })", "percentage": 92}, {"solution": "Error code is ''too_big'' with type indicating what was too big", "percentage": 89}]'::jsonb, 'Array validation', 'Array length limited correctly', 'Not using .max() on array validator', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/78626544', 'admin:1764228572'),
('Zod invalid_string with regex validation', 'validation', 'MEDIUM', '[{"solution": "Use .regex(pattern, { message: ''Invalid format'' })", "percentage": 93}, {"solution": "Use .email(), .url() helpers with custom messages", "percentage": 91}]'::jsonb, 'String pattern matching', 'String matches required pattern', 'Using regex in refine instead of regex method', 0.92, 'haiku', NOW(), 'https://stackoverflow.com/questions/75883100', 'admin:1764228572'),
('Zod optional field with minimum constraint', 'validation', 'MEDIUM', '[{"solution": "Use union: z.string().min(4).optional().or(z.literal(''''))", "percentage": 89}, {"solution": "Use union with length check: z.union([z.string().length(0), z.string().min(4)]).optional()", "percentage": 86}]'::jsonb, 'Conditional validation', 'Optional field allows empty or min length', 'Using optional without or constraint', 0.87, 'haiku', NOW(), 'https://stackoverflow.com/questions/73582246', 'admin:1764228572'),
('Zod File validation with size and type', 'validation', 'HIGH', '[{"solution": "Use refine for File checks: .refine((file) => file?.size <= MAX, ''message'')", "percentage": 94}, {"solution": "Chain multiple refines: .refine(size).refine(type)", "percentage": 91}]'::jsonb, 'File upload handling', 'File size and type validated', 'Not using refine for File object validation', 0.92, 'haiku', NOW(), 'https://stackoverflow.com/questions/72674930', 'admin:1764228572'),
('Zod invalid_arguments in function validation', 'validation', 'MEDIUM', '[{"solution": "Use .args() and .returns() to validate function arguments: z.function().args(z.string()).returns(z.number())", "percentage": 85}, {"solution": "Error code ''invalid_arguments'' means function parameters don''t match", "percentage": 82}]'::jsonb, 'Function schema validation', 'Function arguments validated', 'Not using proper args/returns schema', 0.83, 'haiku', NOW(), 'https://stackoverflow.com/questions/77214951', 'admin:1764228572'),
('Zod invalid_return_type in callback validation', 'validation', 'LOW', '[{"solution": "Ensure .returns() schema matches actual return value type", "percentage": 84}, {"solution": "Error code ''invalid_return_type'' indicates callback return value mismatch", "percentage": 81}]'::jsonb, 'Callback validation', 'Return type matches schema', 'Function returns different type than schema', 0.82, 'haiku', NOW(), 'https://stackoverflow.com/questions/77214951', 'admin:1764228572'),
('Zod not_multiple_of numeric validation', 'validation', 'LOW', '[{"solution": "Use .multipleOf(n): z.number().multipleOf(5)", "percentage": 88}, {"solution": "Error occurs when number is not evenly divisible by specified factor", "percentage": 85}]'::jsonb, 'Numeric constraints', 'Number validated as multiple', 'Using modulo check in refine instead of multipleOf', 0.86, 'haiku', NOW(), 'https://stackoverflow.com/questions/77214951', 'admin:1764228572'),
('Zod safeParse vs parse error handling', 'validation', 'HIGH', '[{"solution": "Use safeParse for try-catch free error handling: const result = schema.safeParse(data); if (!result.success) { /* handle result.error */ }", "percentage": 96}, {"solution": "parse() throws ZodError, safeParse() returns object with success property", "percentage": 94}]'::jsonb, 'Error handling pattern', 'Safe error handling without try-catch', 'Using parse() and not catching errors', 0.95, 'haiku', NOW(), 'https://stackoverflow.com/questions/73985439', 'admin:1764228572'),
('Zod preprocess for type coercion before validation', 'validation', 'MEDIUM', '[{"solution": "Use z.preprocess(): z.preprocess((arg) => new Date(arg), z.date())", "percentage": 91}, {"solution": "Preprocess runs before validation to transform input", "percentage": 88}]'::jsonb, 'Data transformation', 'Input transformed before validation', 'Not using preprocess for type conversion', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/73202769', 'admin:1764228572'),
('Zod transform method for data mutation', 'validation', 'MEDIUM', '[{"solution": "Use .transform() after validation: z.string().transform((val) => val.toUpperCase())", "percentage": 93}, {"solution": "Transform runs after validation succeeds", "percentage": 90}]'::jsonb, 'Post-validation transformation', 'Data transformed after validation', 'Using transform instead of preprocess for input', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/75883100', 'admin:1764228572'),
('Zod record with specific key validation', 'validation', 'MEDIUM', '[{"solution": "Use .and() to combine object and record: z.object({key: z.string()}).and(z.record(z.string()))", "percentage": 87}, {"solution": "Use z.record() alone for open-ended key-value pairs", "percentage": 84}]'::jsonb, 'Dynamic object validation', 'Record with required keys validated', 'Using only z.record() without object schema', 0.85, 'haiku', NOW(), 'https://stackoverflow.com/questions/75830152', 'admin:1764228572');
