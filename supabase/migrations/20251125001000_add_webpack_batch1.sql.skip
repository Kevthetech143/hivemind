-- DOC-MINER-37: Webpack build errors batch 1
-- Source: Official Webpack documentation (webpack.js.org) and SurviveJS Webpack guide
-- Category: webpack
-- Entries: 12

INSERT INTO knowledge_entries (
    query, category, hit_frequency, solutions, prerequisites, success_indicators,
    common_pitfalls, success_rate, claude_version, last_verified, source_url
) VALUES (
    'Webpack: Module not found - Error: Cannot resolve module',
    'webpack',
    'VERY_HIGH',
    '[
        {"solution": "Verify the import path is correct and file exists at specified location", "percentage": 90, "note": "Most common cause - typo or incorrect path"},
        {"solution": "Add resolve.extensions configuration to handle file extensions: resolve: { extensions: [\".js\", \".jsx\", \".ts\", \".tsx\", \"...\"] }", "percentage": 85, "note": "Use spread operator to preserve defaults"},
        {"solution": "Check that resolve.modules includes node_modules: resolve: { modules: [\"node_modules\", path.resolve(__dirname, \"src\")] }", "percentage": 85, "command": "npm ls <module-name>"},
        {"solution": "Ensure file paths are case-sensitive - verify folder/file casing matches import statement exactly", "percentage": 80, "note": "Common on case-sensitive file systems"},
        {"solution": "Install missing dependency: npm install <module-name> --save-dev", "percentage": 95, "command": "npm install <module-name> --save-dev"}
    ]'::jsonb,
    'Node.js installed, Valid package.json, Webpack configured',
    'Import resolves without error, Module loads successfully, Build completes',
    'Relative paths in Node.js must start with ./ or ../ - omitting prefix causes module resolution failures. File paths are case-sensitive on Linux/Mac.',
    0.90,
    'sonnet-4',
    NOW(),
    'https://webpack.js.org/concepts/module-resolution/'
),
(
    'Webpack: Module parse failed - Unexpected token',
    'webpack',
    'VERY_HIGH',
    '[
        {"solution": "Add babel-loader to webpack config for JSX/ES6+ syntax: { test: /\\.jsx?$/, use: \"babel-loader\", exclude: /node_modules/ }", "percentage": 92, "note": "Required for React JSX and modern JavaScript"},
        {"solution": "Create .babelrc file with required presets: { \"presets\": [\"@babel/preset-env\", \"@babel/preset-react\"] }", "percentage": 90, "note": "Place in project root, parallel to webpack.config.js"},
        {"solution": "Install required babel packages: npm install --save-dev @babel/core @babel/preset-env @babel/preset-react babel-loader", "percentage": 95, "command": "npm install --save-dev @babel/core @babel/preset-env @babel/preset-react babel-loader"},
        {"solution": "Fix regex pattern in webpack config - use /\\.jsx?$/ instead of /\\.(js|jsx)$/", "percentage": 85, "note": "More efficient and less error-prone"},
        {"solution": "For TypeScript syntax errors, add ts-loader and configure resolve.extensions to include .ts and .tsx", "percentage": 88, "note": "TypeScript requires additional configuration"}
    ]'::jsonb,
    'Webpack installed, Node.js available, Source files using JSX or ES6+ syntax',
    'Files transpile without syntax errors, Build completes successfully, Browser runs code without errors',
    'The error message \"You may need an appropriate loader to handle this file type\" indicates missing loader configuration. Exclude /node_modules/ can cause issues if source is located under a node_modules folder.',
    0.92,
    'sonnet-4',
    NOW(),
    'https://survivejs.com/books/webpack/appendices/troubleshooting/'
),
(
    'Webpack: ERROR in Entry module not found',
    'webpack',
    'HIGH',
    '[
        {"solution": "Create the default entry file at ./src/index.js - Webpack 4+ uses this as default entry point", "percentage": 90, "note": "No explicit entry configuration needed in webpack 4+"},
        {"solution": "Verify entry path in webpack.config.js is relative to the config file location, not app root", "percentage": 88, "note": "Common mistake when webpack.config.js is not in project root"},
        {"solution": "Check context configuration - entry path is resolved relative to context directory", "percentage": 85, "note": "If context is set, entry looks in that directory"},
        {"solution": "Add file extension to resolve.extensions if using .jsx or .ts files: resolve: { extensions: [\".js\", \".jsx\", \".ts\", \"...\"] }", "percentage": 87, "note": "Allows omitting extensions in imports"},
        {"solution": "Ensure webpack.config.js filename is exactly webpack.config.js (not webpack.config)", "percentage": 95, "note": "Incorrect filename causes webpack to ignore custom config"}
    ]'::jsonb,
    'Webpack installed, Project directory structure created',
    'Webpack build starts without entry errors, Entry file loads successfully',
    'Webpack 4+ defaults to ./src/index.js as entry - file must exist unless custom entry is specified. Entry path is relative to where webpack runs, not always app root.',
    0.90,
    'sonnet-4',
    NOW(),
    'https://github.com/webpack/webpack/issues/981'
),
(
    'Webpack: Loader not found error',
    'webpack',
    'HIGH',
    '[
        {"solution": "Use correct loader package name with -loader suffix: use \"eslint-loader\" not \"eslint\"", "percentage": 95, "note": "Package name must match actual loader implementation"},
        {"solution": "Install the missing loader package: npm install <loader-name> --save-dev", "percentage": 95, "command": "npm install <loader-name> --save-dev"},
        {"solution": "Configure resolveLoader.modules to include node_modules: resolveLoader: { modules: [\"node_modules\", path.resolve(__dirname, \"loaders\")] }", "percentage": 85, "note": "Needed when node_modules is not in parent folder of source files"},
        {"solution": "Verify loaders are defined inside module.rules array, not as standalone configuration", "percentage": 90, "note": "Webpack 2+ requires rules array inside module object"},
        {"solution": "Check that loader package implements the webpack loader interface - not all npm packages are valid loaders", "percentage": 88, "note": "Runtime error occurs if package exists but is not a loader"}
    ]'::jsonb,
    'Webpack installed, Package.json configured, Node_modules accessible',
    'Loader resolves without errors, Files process through loader successfully, Build completes',
    'Loader package name must end with -loader (e.g., babel-loader, css-loader). If package exists but is not a loader, runtime error occurs instead of Module not found.',
    0.92,
    'sonnet-4',
    NOW(),
    'https://survivejs.com/books/webpack/appendices/troubleshooting/'
),
(
    'Webpack: Invalid configuration object error',
    'webpack',
    'HIGH',
    '[
        {"solution": "Use absolute paths with path.resolve: output: { path: path.resolve(__dirname, \"dist\") }", "percentage": 92, "note": "Webpack requires absolute paths for output.path"},
        {"solution": "Add path module import at top of webpack.config.js: const path = require(\"path\");", "percentage": 95, "note": "Required for path.resolve function"},
        {"solution": "Remove empty strings from resolve.extensions array: extensions: [\".js\", \".jsx\"] not [\"\", \".js\", \".jsx\"]", "percentage": 90, "note": "Empty extension causes configuration validation error"},
        {"solution": "Verify webpack.config.js uses module.exports (not module.export)", "percentage": 95, "note": "Common typo that breaks config loading"},
        {"solution": "Check configuration against schema at webpack.js.org/configuration/ for API compatibility", "percentage": 85, "note": "API changes between webpack versions"}
    ]'::jsonb,
    'Webpack installed, webpack.config.js file exists',
    'Configuration validates without errors, Webpack starts build process, No schema validation errors',
    'Configuration object must match webpack API schema exactly. Common mistakes: relative paths instead of absolute, typos in module.exports, empty strings in arrays.',
    0.93,
    'sonnet-4',
    NOW(),
    'https://webpack.js.org/configuration/'
),
(
    'Webpack: Module build failed - Unknown word or SyntaxError',
    'webpack',
    'HIGH',
    '[
        {"solution": "Add appropriate loader for the file type being imported (CSS, SASS, images, fonts, etc.)", "percentage": 90, "note": "Each file type requires specific loader configuration"},
        {"solution": "For CSS files, install and configure css-loader and style-loader: { test: /\\.css$/, use: [\"style-loader\", \"css-loader\"] }", "percentage": 92, "command": "npm install --save-dev style-loader css-loader"},
        {"solution": "Configure terser/uglify plugins to handle ES2015+ syntax: optimization: { minimizer: [new TerserPlugin({ terserOptions: { ecma: 6 } })] }", "percentage": 85, "note": "Minifiers may not support modern syntax without configuration"},
        {"solution": "Add file-loader for assets: { test: /\\.(png|jpg|gif|svg)$/, use: \"file-loader\" }", "percentage": 88, "command": "npm install --save-dev file-loader"},
        {"solution": "Install and configure appropriate loaders based on file extension in error message", "percentage": 87, "note": "Error message indicates which file type lacks loader"}
    ]'::jsonb,
    'Webpack configured, Node.js installed, File types identified',
    'All file types process without syntax errors, Build completes successfully, Assets load in browser',
    'Each file type (CSS, SASS, images, fonts) requires specific loader. Syntax errors in JavaScript may indicate missing transpilation for modern syntax.',
    0.88,
    'sonnet-4',
    NOW(),
    'https://survivejs.com/books/webpack/appendices/troubleshooting/'
),
(
    'Webpack: DeprecationWarning during build',
    'webpack',
    'MEDIUM',
    '[
        {"solution": "Run webpack with trace flag to identify source: node --trace-deprecation node_modules/.bin/webpack --mode production", "percentage": 92, "command": "node --trace-deprecation node_modules/.bin/webpack --mode production"},
        {"solution": "Update outdated plugins and loaders to versions compatible with current webpack", "percentage": 90, "note": "Check plugin documentation for webpack compatibility"},
        {"solution": "Check npm outdated to identify packages needing updates: npm outdated", "percentage": 88, "command": "npm outdated"},
        {"solution": "Review webpack migration guide for breaking changes between versions", "percentage": 85, "note": "Available at webpack.js.org for each major version"},
        {"solution": "Update package.json dependencies to latest compatible versions and run npm install", "percentage": 87, "command": "npm install"}
    ]'::jsonb,
    'Webpack installed, Project builds but shows warnings, Node.js available',
    'Deprecation warnings eliminated, Build completes without warnings, All plugins/loaders compatible',
    'Deprecation warnings indicate future breaking changes. Trace deprecation flag shows exact source of warning. Update before next major webpack version.',
    0.85,
    'sonnet-4',
    NOW(),
    'https://survivejs.com/books/webpack/appendices/troubleshooting/'
),
(
    'Webpack: Cannot find module webpack.config.js',
    'webpack',
    'MEDIUM',
    '[
        {"solution": "Place webpack.config.js in project root directory, not in src/ folder", "percentage": 95, "note": "Webpack looks for config in root by default"},
        {"solution": "Verify filename is exactly webpack.config.js (case-sensitive, with .js extension)", "percentage": 92, "note": "Incorrect filename causes webpack to use defaults"},
        {"solution": "Use --config flag to specify custom config location: webpack --config path/to/config.js", "percentage": 88, "command": "webpack --config custom-webpack.config.js"},
        {"solution": "Ensure webpack.config.js exports configuration object: module.exports = { /* config */ }", "percentage": 90, "note": "File must export valid configuration object"},
        {"solution": "Check that webpack.config.js has no syntax errors preventing it from loading", "percentage": 87, "note": "Run node webpack.config.js to test for syntax errors"}
    ]'::jsonb,
    'Webpack installed via npm, Project directory exists',
    'Webpack finds and loads configuration file, Custom configuration applied to build, No config file errors',
    'Config file must be in project root unless --config flag specifies alternate location. File must be named webpack.config.js exactly (case-sensitive).',
    0.93,
    'sonnet-4',
    NOW(),
    'https://webpack.js.org/configuration/'
),
(
    'Webpack 5: Cannot resolve polyfills for Node.js core modules',
    'webpack',
    'HIGH',
    '[
        {"solution": "Verify if Node.js core module is actually needed - webpack 5 no longer polyfills automatically", "percentage": 90, "note": "Common for util, crypto, stream, buffer modules"},
        {"solution": "Install and configure polyfill package for required module: npm install <module>-browserify", "percentage": 88, "command": "npm install crypto-browserify stream-browserify --save-dev"},
        {"solution": "Add fallback configuration to webpack config: resolve: { fallback: { \"crypto\": require.resolve(\"crypto-browserify\") } }", "percentage": 92, "note": "Required for each Node.js core module used in browser"},
        {"solution": "Set fallback to false if module is not needed: resolve: { fallback: { \"fs\": false } }", "percentage": 85, "note": "Prevents error when module is imported but not used"},
        {"solution": "Use ProvidePlugin for buffer/process globals: new webpack.ProvidePlugin({ Buffer: [\"buffer\", \"Buffer\"], process: \"process/browser\" })", "percentage": 87, "note": "Required when polyfills expect global variables"}
    ]'::jsonb,
    'Webpack 5 installed, Code using Node.js core modules in browser environment',
    'Build completes without polyfill errors, Polyfilled modules work in browser, No runtime errors for missing modules',
    'Webpack 5 removed automatic Node.js polyfills. Must explicitly configure fallbacks for each core module. Webpack 4 included these by default.',
    0.90,
    'sonnet-4',
    NOW(),
    'https://webpack.js.org/configuration/resolve/'
),
(
    'Webpack: Dependency version conflicts and peer dependency errors',
    'webpack',
    'HIGH',
    '[
        {"solution": "Use legacy peer dependencies flag: npm install --legacy-peer-deps", "percentage": 88, "command": "npm install --legacy-peer-deps", "note": "Works with npm 7+ which has stricter peer dependency resolution"},
        {"solution": "Force install if legacy flag does not work: npm install --force", "percentage": 85, "command": "npm install --force", "note": "Use with caution - may cause runtime issues"},
        {"solution": "Update conflicting package to compatible version specified in error message", "percentage": 92, "note": "Check package.json peer dependencies for version requirements"},
        {"solution": "Delete node_modules and package-lock.json, then reinstall: rm -rf node_modules package-lock.json && npm install", "percentage": 87, "command": "rm -rf node_modules package-lock.json && npm install"},
        {"solution": "Use Yarn as alternative package manager: yarn install", "percentage": 80, "command": "yarn install", "note": "Yarn handles peer dependencies differently than npm"}
    ]'::jsonb,
    'npm 7+ or compatible package manager, package.json exists, Internet connection for package downloads',
    'npm install completes without peer dependency errors, All packages install successfully, No version conflict warnings',
    'npm 7+ installs peer dependencies by default, causing conflicts npm 6 ignored. Version locking prevents unexpected updates but can create conflicts during major version upgrades.',
    0.87,
    'sonnet-4',
    NOW(),
    'https://weekendprojects.dev/posts/fix-for-npm-conflicting-peer-dependency-error/'
),
(
    'Webpack: resolve.symlinks causing npm link failures',
    'webpack',
    'MEDIUM',
    '[
        {"solution": "Disable symlink resolution in webpack config: resolve: { symlinks: false }", "percentage": 90, "note": "Required when using npm link for local development"},
        {"solution": "Use resolve.alias to point to linked package instead of relying on symlinks", "percentage": 85, "note": "More explicit control over module resolution"},
        {"solution": "Ensure linked package is built/compiled before linking", "percentage": 88, "note": "Webpack resolves to source files which may need compilation"},
        {"solution": "Add linked package path to resolve.modules: resolve: { modules: [path.resolve(__dirname, \"../linked-package\"), \"node_modules\"] }", "percentage": 87, "note": "Allows webpack to find linked package directly"}
    ]'::jsonb,
    'npm link configured for local packages, Webpack project with linked dependencies',
    'Linked packages resolve correctly, npm link works without errors, Changes in linked package reflect in consuming project',
    'Default resolve.symlinks: true causes symlinks to resolve to real paths, which can break npm link. Tools like lerna and yarn workspaces may be affected.',
    0.88,
    'sonnet-4',
    NOW(),
    'https://webpack.js.org/configuration/resolve/'
),
(
    'Webpack: resolve.extensions configuration replaces defaults',
    'webpack',
    'MEDIUM',
    '[
        {"solution": "Use spread operator to preserve default extensions: resolve: { extensions: [\".ts\", \".tsx\", \"...\"] }", "percentage": 95, "note": "Three dots preserve [.js, .json, .wasm] defaults"},
        {"solution": "Explicitly list all required extensions including defaults: extensions: [\".ts\", \".tsx\", \".js\", \".jsx\", \".json\"]", "percentage": 90, "note": "More verbose but explicit about all supported extensions"},
        {"solution": "Order extensions by usage frequency for better performance - most common first", "percentage": 85, "note": "Webpack tries extensions in order until match found"},
        {"solution": "Avoid adding too many extensions - impacts build performance", "percentage": 80, "note": "Each extension adds resolution overhead"}
    ]'::jsonb,
    'Webpack configured, Multiple file types in project',
    'All file types resolve correctly, Imports work without explicit extensions, Build performance acceptable',
    'Setting resolve.extensions completely replaces defaults [.js, .json, .wasm]. Forgetting defaults breaks standard JavaScript imports. Use ... spread to preserve.',
    0.92,
    'sonnet-4',
    NOW(),
    'https://webpack.js.org/configuration/resolve/'
),
(
    'Webpack 5: Module not found - Error: Cannot resolve util/crypto/stream',
    'webpack',
    'HIGH',
    '[
        {"solution": "Install browserify polyfill for the specific module: npm install --save-dev crypto-browserify stream-browserify util", "percentage": 92, "command": "npm install --save-dev crypto-browserify stream-browserify util"},
        {"solution": "Add resolve.fallback configuration: resolve: { fallback: { \"crypto\": require.resolve(\"crypto-browserify\"), \"stream\": require.resolve(\"stream-browserify\"), \"util\": require.resolve(\"util/\") } }", "percentage": 95, "note": "Each Node.js core module requires explicit fallback in webpack 5"},
        {"solution": "Install buffer and process polyfills if needed: npm install --save-dev buffer process", "percentage": 90, "command": "npm install --save-dev buffer process"},
        {"solution": "Add ProvidePlugin for global polyfills: plugins: [new webpack.ProvidePlugin({ process: \"process/browser\", Buffer: [\"buffer\", \"Buffer\"] })]", "percentage": 88, "note": "Required when code expects global Buffer/process"},
        {"solution": "If module is not needed, set fallback to false: resolve: { fallback: { \"fs\": false, \"path\": false } }", "percentage": 87, "note": "Prevents bundling unnecessary polyfills"}
    ]'::jsonb,
    'Webpack 5 project, Dependencies using Node.js core modules, Browser target environment',
    'Build completes without module resolution errors, Polyfilled modules function correctly in browser, No runtime errors for missing modules',
    'Webpack 5 removed automatic Node.js polyfills that webpack 4 included by default. Each core module (crypto, stream, buffer, process, util, etc.) must be explicitly polyfilled or set to false.',
    0.93,
    'sonnet-4',
    NOW(),
    'https://webpack.js.org/configuration/resolve/'
);
