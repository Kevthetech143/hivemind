INSERT INTO knowledge_entries (query, category, hit_frequency, solutions, prerequisites, success_indicators, common_pitfalls, success_rate, claude_version, last_verified, source_url, contributor_email) VALUES
('SendGrid 401 Unauthorized API Key', 'api', 'HIGH', '[{"solution": "Verify API key format - must start with SG. prefix", "percentage": 85}, {"solution": "Ensure dotenv.config() is called before accessing process.env", "percentage": 90}, {"solution": "Check .env file location is in project root", "percentage": 80}]'::jsonb, 'SendGrid API key, Node.js or Python SDK', 'Email sent successfully with 202 status', 'Using API key ID instead of generated key, env variable not loaded', 0.87, 'haiku', NOW(), 'https://stackoverflow.com/questions/67003183/nodejs-sendgrid-401-unauthorized', 'admin:1764224921'),
('SendGrid 403 Forbidden - Unverified Sender', 'api', 'HIGH', '[{"solution": "Verify sender email address in SendGrid dashboard", "percentage": 95}, {"solution": "Go to Settings > Sender Authentication and complete verification", "percentage": 92}]'::jsonb, 'SendGrid account, verified sender email', 'Email sends with 202 response code', 'Unverified from address, sender not whitelabeled', 0.94, 'haiku', NOW(), 'https://stackoverflow.com/questions/61149142/node-js-sendgrid-mail-403-forbidden-error', 'admin:1764224921'),
('SendGrid 400 Bad Request - Duplicate Recipients', 'api', 'MEDIUM', '[{"solution": "Remove duplicate email addresses from TO, CC, BCC fields", "percentage": 85}, {"solution": "Deduplicate recipient list before sending", "percentage": 88}]'::jsonb, 'SendGrid API, email addresses', 'Email accepted with 202 status', 'Same email in multiple recipient fields', 0.86, 'haiku', NOW(), 'https://stackoverflow.com/questions/28878924/bad-request-check-errors-for-a-list-of-errors-returned-by-the-api-at-sendgrid', 'admin:1764224921'),
('SendGrid 400 Bad Request - Substitutions Not Strings', 'api', 'MEDIUM', '[{"solution": "Convert all personalizations substitutions to string values", "percentage": 90}, {"solution": "Change numeric values like 16.5 to ''16.5'' for substitutions", "percentage": 88}]'::jsonb, 'SendGrid Mail API v3, personalizations', 'Email request accepted', 'Non-string values in substitution fields', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/40303918/sendgrid-api-v3-returns-400-bad-request', 'admin:1764224921'),
('SendGrid 429 Rate Limit Exceeded', 'api', 'MEDIUM', '[{"solution": "Check X-Ratelimit headers and wait until X-Ratelimit-Reset", "percentage": 80}, {"solution": "Implement exponential backoff retry logic", "percentage": 85}, {"solution": "For free tier, limit to 100 emails/day; handle 429 gracefully", "percentage": 82}]'::jsonb, 'SendGrid API, rate limit awareness', 'Request succeeds after retry delay', 'Exceeding plan limits without retry logic', 0.81, 'haiku', NOW(), 'https://stackoverflow.com/questions/76072087/what-happens-if-i-reached-the-limit-of-my-sendgrid-plan', 'admin:1764224921'),
('SendGrid Email Activity API - 10 requests per 5 minutes', 'api', 'MEDIUM', '[{"solution": "Rate limit is 10 requests per 5 minute block - hard limit", "percentage": 100}, {"solution": "Use webhooks instead for real-time event tracking", "percentage": 85}, {"solution": "Implement request batching and queue processing", "percentage": 75}]'::jsonb, 'SendGrid Email Activity API, rate awareness', 'API requests succeed within rate limits', 'Exceeding 10 requests per 5 minute window', 0.82, 'haiku', NOW(), 'https://stackoverflow.com/questions/66604230/sendgrid-email-activity-api-rate-limit', 'admin:1764224921'),
('SendGrid SMTP Error 550 - Unauthenticated Sender', 'smtp', 'MEDIUM', '[{"solution": "Authenticate first with SMTP AUTH command before MAIL FROM", "percentage": 90}, {"solution": "Verify same connection is used for auth and sending", "percentage": 85}]'::jsonb, 'SMTP connection, credentials', 'Email sends without 550 error', 'Sending before authentication, connection reset', 0.87, 'haiku', NOW(), 'https://stackoverflow.com/questions/39901300/smtp-mail-server-sendgrid-error-on-submission', 'admin:1764224921'),
('SendGrid C# TLS Version Error', 'client', 'LOW', '[{"solution": "Update to TLS 1.2 or higher", "percentage": 90}, {"solution": "Check .NET Framework version supports modern TLS", "percentage": 85}]'::jsonb, '.NET Framework, SendGrid C# client', 'Email sends successfully', 'Using outdated TLS version, old .NET Framework', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/76787329/error-trying-to-send-email-with-c-sharp-library-sendgrid', 'admin:1764224921'),
('SendGrid Empty Response Body (202 Status)', 'api', 'LOW', '[{"solution": "This is expected behavior - 202 means success with no response body", "percentage": 100}, {"solution": "Do not expect response body for successful sends", "percentage": 95}]'::jsonb, 'SendGrid Mail Send API', 'Email delivered, 202 status confirmed', 'Expecting response body where none is returned', 0.98, 'haiku', NOW(), 'https://stackoverflow.com/questions/72791035/sendgrid-mail-send-not-returning-a-response-undefined', 'admin:1764224921'),
('SendGrid Bulk Email Throttling - AsyncForEach Issue', 'performance', 'MEDIUM', '[{"solution": "Use queued load-leveling with Azure Functions or job queue", "percentage": 90}, {"solution": "Avoid loops that bypass backpressure; batch emails in chunks", "percentage": 85}]'::jsonb, 'SendGrid API, async/await, job queue or Azure Functions', 'All 90 emails sent within timeout', 'Sequential sends in tight loop, no backpressure handling', 0.83, 'haiku', NOW(), 'https://stackoverflow.com/questions/69620048/sendgrid-nodejs-handling-errors-when-sending-bulk-emails', 'admin:1764224921'),
('SendGrid Invalid From Email Address Error', 'api', 'MEDIUM', '[{"solution": "Change from field to array format: from: [''email@example.com'']", "percentage": 85}, {"solution": "Use JSON format: from: { email: ''email@example.com'' }", "percentage": 90}]'::jsonb, 'SendGrid API, from field', 'Email sends with correct from format', 'Using string instead of object/array for from field', 0.87, 'haiku', NOW(), 'https://stackoverflow.com/questions/64080600/error-invalid-from-email-address-sendgrid', 'admin:1764224921'),
('SendGrid DKIM Alignment - Domain Signature Mismatch', 'security', 'LOW', '[{"solution": "This is expected - SendGrid adds secondary DKIM signature for reputation", "percentage": 95}, {"solution": "Primary signature aligns with your domain - secondary is optional", "percentage": 90}]'::jsonb, 'SendGrid, DMARC setup, domain authentication', 'DMARC passes for primary domain signature', 'Misunderstanding secondary SendGrid DKIM signature purpose', 0.92, 'haiku', NOW(), 'https://stackoverflow.com/questions/71150656/dkim-validation-warning-when-sending-e-mail-from-sendgrid-api', 'admin:1764224921'),
('SendGrid Unsubscribe Not Working - Missing ASM Group', 'api', 'MEDIUM', '[{"solution": "Add asm.groupId to root of request body: asm: { groupId: 123 }", "percentage": 95}, {"solution": "Ensure unsubscribe group is configured in SendGrid dashboard", "percentage": 90}]'::jsonb, 'SendGrid API, dynamic templates, unsubscribe groups', 'Unsubscribe link visible and functional', 'Missing asm groupId in request, unsubscribe block in template only', 0.93, 'haiku', NOW(), 'https://stackoverflow.com/questions/71445513/sendgrid-api-dynamic-cant-get-unsubscribe-to-work', 'admin:1764224921'),
('SendGrid Webhook Signature Verification Failed - rawBody Issue', 'security', 'HIGH', '[{"solution": "Use req.rawBody instead of req.body for signature verification", "percentage": 95}, {"solution": "Add bodyParser.raw middleware for JSON endpoints", "percentage": 92}]'::jsonb, 'SendGrid webhook, Express.js, signature verification', 'Webhook signature verifies correctly', 'Using parsed JSON body instead of raw buffer', 0.94, 'haiku', NOW(), 'https://stackoverflow.com/questions/76215848/sendgrid-webhook-signature-verification-failures-in-node-js', 'admin:1764224921'),
('SendGrid Webhook Signature Verification - Format Adjustment', 'security', 'MEDIUM', '[{"solution": "Replace },\\n{ with },\\r\\n{ in payload before verification", "percentage": 88}, {"solution": "Add \\r\\n line ending to payload: payload.concat(''\\r\\n'')", "percentage": 85}]'::jsonb, 'SendGrid webhook, Ruby/Java, signature verification', 'Webhook signature verification passes', 'Incorrect payload formatting for ECDSA verification', 0.86, 'haiku', NOW(), 'https://stackoverflow.com/questions/74699600/sendgrid-webhook-verification-fails-always', 'admin:1764224921'),
('SendGrid API Key Does Not Start With SG', 'client', 'HIGH', '[{"solution": "Ensure you have the full generated key including SG. prefix", "percentage": 90}, {"solution": "Do not use just the API key ID - use the generated key", "percentage": 95}]'::jsonb, 'SendGrid API key, environment setup', 'API key accepted by SendGrid client', 'Using API key ID instead of full generated key', 0.92, 'haiku', NOW(), 'https://stackoverflow.com/questions/61863508/api-key-does-not-start-with-sg-sendgrid', 'admin:1764224921'),
('SendGrid API Key Evaluating to Undefined', 'client', 'HIGH', '[{"solution": "Use require(''dotenv'').config() at top of entry file", "percentage": 95}, {"solution": "Ensure .env file is in project root directory", "percentage": 92}]'::jsonb, 'Node.js, dotenv package, .env file', 'process.env.SENDGRID_API_KEY returns valid key', 'dotenv not configured, .env file not loaded', 0.93, 'haiku', NOW(), 'https://stackoverflow.com/questions/78594295/sendgrid-api-key-evaluating-to-undefined', 'admin:1764224921'),
('SendGrid Invalid Authorization Grant Error', 'api', 'MEDIUM', '[{"solution": "Use the generated API key, not the API key ID", "percentage": 95}, {"solution": "Regenerate key if original was not saved", "percentage": 90}]'::jsonb, 'SendGrid API key', 'Email sent successfully', 'Using API key ID instead of full generated key', 0.92, 'haiku', NOW(), 'https://stackoverflow.com/questions/34789622/sendgrid-api-key-is-not-working-the-provided-authorization-grant-is-invalid-e', 'admin:1764224921'),
('SendGrid ASP.NET - Environment.GetEnvironmentVariable Returns Null', 'client', 'MEDIUM', '[{"solution": "Set environment variable using SetEnvironmentVariable before GetEnvironmentVariable", "percentage": 90}, {"solution": "Use ConfigurationManager.AppSettings instead of environment variables", "percentage": 85}]'::jsonb, 'ASP.NET, environment variables, web.config', 'Email sends with valid API key', 'Environment variable not set, incorrect variable name', 0.87, 'haiku', NOW(), 'https://stackoverflow.com/questions/55572139/asp-net-sendgrid-environment-getenvironmentvariableapikey-return-null-value', 'admin:1764224921'),
('SendGrid Signature Verification - Array Format Issue', 'security', 'MEDIUM', '[{"solution": "Add },\\r\\n{ replacements to payload when testing with Postman", "percentage": 85}, {"solution": "Production webhooks need no modification", "percentage": 95}]'::jsonb, 'SendGrid webhook, Java, signature verification', 'Webhook signature verification passes', 'Testing with Postman without adjusting payload format', 0.80, 'haiku', NOW(), 'https://stackoverflow.com/questions/76720425/sendgrid-signature-verification-getting-failed-all-time', 'admin:1764224921'),
('SendGrid Bounce Email Handling - Webhook Approach', 'workflow', 'MEDIUM', '[{"solution": "Use event webhooks for real-time bounce/complaint tracking", "percentage": 90}, {"solution": "Poll bounces endpoint weekly with Event API", "percentage": 75}]'::jsonb, 'SendGrid webhooks or Event API, database', 'Bounces flagged in database, prevent resends', 'Only checking stats endpoint without webhook implementation', 0.85, 'haiku', NOW(), 'https://stackoverflow.com/questions/38991472/handling-bounce-in-sendgrid-smtp-api-in-python', 'admin:1764224921'),
('SendGrid Emails Rejected as Spam - Domain Whitelabel', 'deliverability', 'MEDIUM', '[{"solution": "Set up domain whitelabeling in SendGrid dashboard", "percentage": 90}, {"solution": "Use paid tier with fixed IP addresses for better deliverability", "percentage": 85}]'::jsonb, 'SendGrid account, domain, paid tier', 'Emails pass spam filters, high delivery rate', 'Using free tier without whitelabeling, short email content', 0.79, 'haiku', NOW(), 'https://stackoverflow.com/questions/31375914/sendgrid-emails-getting-rejected-as-spam', 'admin:1764224921'),
('SendGrid Email Delivery Issues - Bounce List', 'troubleshooting', 'MEDIUM', '[{"solution": "Clear bounce log in SendGrid dashboard if email was previously bounced", "percentage": 90}, {"solution": "SendGrid caches bounces and will not retry bounced addresses", "percentage": 95}]'::jsonb, 'SendGrid account, bounce list', 'Email sends to previously bounced address', 'Bounce list not cleared, previous bounce cached', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/4642790/problems-with-email-delivery-rates-through-sendgrid', 'admin:1764224921'),
('SendGrid Rate Limit Headers Missing on Mail Send', 'api', 'LOW', '[{"solution": "Mail send endpoint has no rate limit or very high limit", "percentage": 95}, {"solution": "Other endpoints return X-Ratelimit headers; mail/send does not", "percentage": 90}]'::jsonb, 'SendGrid API, mail/send endpoint', 'Mail sends without rate limit errors', 'Expecting rate limit headers on mail/send', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/43430416/sendgrid-send-email-rate-limit', 'admin:1764224921'),
('SendGrid Node.js Missing dotenv.config', 'client', 'HIGH', '[{"solution": "Add require(''dotenv'').config() at top of file", "percentage": 95}, {"solution": "Ensure .env file exists in correct location", "percentage": 90}]'::jsonb, 'Node.js, dotenv, .env file', 'process.env variables load correctly', 'Missing dotenv initialization, .env in wrong location', 0.94, 'haiku', NOW(), 'https://stackoverflow.com/questions/62193629/getting-the-api-key-from-sendgrid-env-file-node-js', 'admin:1764224921'),
('SendGrid Python API Key Not Loading from env', 'client', 'HIGH', '[{"solution": "Call dotenv.config() or source .env before importing SendGrid", "percentage": 95}, {"solution": "Hardcode key temporarily to isolate environment issue", "percentage": 85}]'::jsonb, 'Python, SendGrid SDK, environment variables', 'Email sends successfully with hardcoded key', 'Environment variable not loaded, os.environ not updated', 0.90, 'haiku', NOW(), 'https://stackoverflow.com/questions/73890873/sendgrid-resulting-in-an-error-401-unauthorized', 'admin:1764224921'),
('SendGrid AngularJS CORS Issue - Legacy API', 'client', 'LOW', '[{"solution": "Use newer API endpoints instead of legacy v3 API", "percentage": 90}, {"solution": "Add CORS headers or make requests from backend", "percentage": 85}]'::jsonb, 'AngularJS, SendGrid API v3, CORS', 'API request succeeds with 200 status', 'Using deprecated endpoint, CORS blocking request', 0.80, 'haiku', NOW(), 'https://stackoverflow.com/questions/50158167/getting-unauthorised-error-401-sendgrid-api', 'admin:1764224921'),
('SendGrid Verification Email Not Received', 'deliverability', 'MEDIUM', '[{"solution": "Check spam/junk folder for verification email", "percentage": 85}, {"solution": "Resend verification email or contact SendGrid support", "percentage": 75}]'::jsonb, 'SendGrid account, email address', 'Verification email received and processed', 'Email in spam folder, verification not found', 0.70, 'haiku', NOW(), 'https://stackoverflow.com/questions/75985608/using-sendgrid-to-send-verifiction-e-mail-not-working', 'admin:1764224921'),
('SendGrid PHP - Chain Operator Syntax Error', 'client', 'LOW', '[{"solution": "Remove excess -> operator at end of method chain", "percentage": 100}, {"solution": "Ensure method chain ends with assignment, not null operator", "percentage": 95}]'::jsonb, 'PHP, SendGrid library', 'Email sends without syntax error', 'Extra -> operator breaking method chain', 0.99, 'haiku', NOW(), 'https://stackoverflow.com/questions/32379238/cannot-access-empty-property-sendgrid', 'admin:1764224921'),
('SendGrid Legacy Contacts API Deprecated - Use New Endpoint', 'api', 'MEDIUM', '[{"solution": "Use PUT https://api.sendgrid.com/v3/marketing/contacts instead", "percentage": 95}, {"solution": "Migrate from /v3/contactdb/recipients to /v3/marketing/contacts", "percentage": 90}]'::jsonb, 'SendGrid API v3, marketing contacts', 'Contact added with 200 status', 'Using deprecated contactdb endpoint', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/38613941/sendgrid-error-access-forbidden-when-trying-to-get-user-profile-api', 'admin:1764224921'),
('SendGrid 403 - Outdated SDK or Legacy API', 'api', 'MEDIUM', '[{"solution": "Update SendGrid SDK to latest version", "percentage": 85}, {"solution": "Use sg.client.marketing instead of sg.client.contactdb", "percentage": 90}]'::jsonb, 'SendGrid SDK, API v3', 'API request returns 200 status', 'Using outdated SDK methods, deprecated endpoints', 0.82, 'haiku', NOW(), 'https://stackoverflow.com/questions/73572785/unable-to-test-sendgrid-locally-with-http-error-403-forbidden', 'admin:1764224921');
