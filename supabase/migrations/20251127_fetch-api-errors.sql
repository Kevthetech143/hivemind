INSERT INTO knowledge_entries (query, category, hit_frequency, solutions, prerequisites, success_indicators, common_pitfalls, success_rate, claude_version, last_verified, source_url, contributor_email) VALUES
('Failed to fetch with no error message', 'javascript', 'HIGH', '[{"solution": "Fetch only rejects on network errors. Check response.ok for HTTP errors: fetch(url).then(res => { if (!res.ok) throw new Error(res.status); return res; })", "percentage": 92}, {"solution": "Verify DNS, server availability, and CORS headers. Check browser console for specific error", "percentage": 88}]'::jsonb, 'JavaScript ES6+', 'Fetch completes without generic error', 'Assuming all HTTP errors throw rejection', 0.90, 'haiku', NOW(), 'https://stackoverflow.com/questions/45383874/fetch-api-yields-typeerror-failed-to-fetch', 'admin:1764225748'),
('TypeError: response.json is not a function', 'javascript', 'MEDIUM', '[{"solution": "response.json() returns a promise. Use .then() or await: response.json().then(data => console.log(data))", "percentage": 94}, {"solution": "Ensure response is a Response object, not already parsed data", "percentage": 89}]'::jsonb, 'JavaScript ES6+', 'JSON data logged to console', 'Calling response.json() without waiting for promise', 0.93, 'haiku', NOW(), 'https://stackoverflow.com/questions/66655216/why-is-my-response-data-undefined-when-sending-a-fetch', 'admin:1764225748'),
('CORS error: No Access-Control-Allow-Origin header', 'javascript', 'HIGH', '[{"solution": "Server must set Access-Control-Allow-Origin header. Configure CORS on server: res.header(''Access-Control-Allow-Origin'', ''http://localhost:3000'')", "percentage": 95}, {"solution": "Remove mode: ''no-cors'' if you need to read response body", "percentage": 87}]'::jsonb, 'JavaScript + Server Configuration', 'Request succeeds with proper CORS headers', 'Using mode: ''no-cors'' when you need CORS', 0.92, 'haiku', NOW(), 'https://stackoverflow.com/questions/48728173/how-do-i-fix-cors-issue-in-fetch-api', 'admin:1764225748'),
('SyntaxError: JSON.parse: unexpected character', 'javascript', 'HIGH', '[{"solution": "Use response.json() instead of JSON.parse(response): fetch(url).then(res => res.json())", "percentage": 96}, {"solution": "Check that Content-Type is application/json and response body is valid JSON", "percentage": 90}]'::jsonb, 'JavaScript ES6+', 'Valid JSON parsed without errors', 'Calling JSON.parse on Response object instead of response.json()', 0.94, 'haiku', NOW(), 'https://stackoverflow.com/questions/75259909/javascript-fetch-api-json-parse-has-syntax-error-despite-json-being-correct', 'admin:1764225748'),
('response.ok is false but no error thrown', 'javascript', 'MEDIUM', '[{"solution": "Fetch doesn''t reject on HTTP errors. Check response.ok explicitly: if (!response.ok) throw new Error(response.statusText)", "percentage": 94}, {"solution": "Always handle both success (ok=true) and error (ok=false) paths", "percentage": 91}]'::jsonb, 'JavaScript ES6+', 'HTTP errors properly handled in catch block', 'Not checking response.ok before processing data', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/50330795/fetch-api-error-handling', 'admin:1764225748'),
('TypeError: Cannot read property of undefined response', 'javascript', 'MEDIUM', '[{"solution": "Return response from first .then(): .then(res => res.json()).then(data => console.log(data))", "percentage": 95}, {"solution": "console.log returns undefined. Always return the value you want to pass to next .then()", "percentage": 92}]'::jsonb, 'JavaScript Promise Chains', 'Response data accessible in final .then()', 'Not returning value from .then() callback', 0.93, 'haiku', NOW(), 'https://stackoverflow.com/questions/33237200/fetch-response-json-gives-responsedata-undefined', 'admin:1764225748'),
('credentials: include breaks CORS preflight', 'javascript', 'HIGH', '[{"solution": "When using credentials, server cannot use Access-Control-Allow-Origin: *. Must specify exact origin: ''http://localhost:3000''", "percentage": 96}, {"solution": "Configure server CORS: cors({ origin: ''http://localhost:3000'', credentials: true })", "percentage": 94}]'::jsonb, 'JavaScript + Server CORS Configuration', 'Credentials included and CORS headers correct', 'Using wildcard * with credentials mode include', 0.95, 'haiku', NOW(), 'https://stackoverflow.com/questions/63351799/react-fetch-credentials-include-breaks-my-entire-request-and-i-get-an-error', 'admin:1764225748'),
('Network error: Failed to fetch resource', 'javascript', 'HIGH', '[{"solution": "This is a real network error. Check: DNS resolution, server availability, firewall/proxy rules, CORS configuration", "percentage": 88}, {"solution": "Use try-catch with async/await to catch TypeError from network failures", "percentage": 86}]'::jsonb, 'JavaScript ES6+ with Network Setup', 'Fetch connects to available server', 'Misconfigured server or network connectivity issue', 0.87, 'haiku', NOW(), 'https://stackoverflow.com/questions/61113344/fetch-api-how-to-determine-if-an-error-is-a-network-error', 'admin:1764225748'),
('AbortError: The operation was aborted', 'javascript', 'MEDIUM', '[{"solution": "Use AbortController to implement timeout: const controller = new AbortController(); setTimeout(() => controller.abort(), 5000); fetch(url, { signal: controller.signal })", "percentage": 93}, {"solution": "Catch AbortError separately: catch(err => { if (err.name === ''AbortError'') { handle timeout } })", "percentage": 89}]'::jsonb, 'JavaScript ES2018+, AbortController', 'Fetch aborts cleanly on timeout', 'Not handling AbortError as distinct from other errors', 0.90, 'haiku', NOW(), 'https://stackoverflow.com/questions/58552173/abortcontroller-not-terminating-fetch-request', 'admin:1764225748'),
('Cannot set Content-Type header with mode: no-cors', 'javascript', 'MEDIUM', '[{"solution": "Remove mode: ''no-cors'' to allow custom headers: fetch(url, { headers: { ''Content-Type'': ''application/json'' } })", "percentage": 95}, {"solution": "In no-cors mode, only simple headers are allowed. Use CORS-enabled server instead", "percentage": 90}]'::jsonb, 'JavaScript Fetch API + Server CORS', 'Custom headers sent successfully', 'Using no-cors mode with custom headers', 0.92, 'haiku', NOW(), 'https://stackoverflow.com/questions/78177191/javascript-fetch-unable-to-set-content-type-header-to-application-json', 'admin:1764225748'),
('withCredentials is not a valid fetch option', 'javascript', 'MEDIUM', '[{"solution": "Use credentials instead: fetch(url, { credentials: ''include'' }) not { withCredentials: true }", "percentage": 97}, {"solution": "credentials accepts: ''omit'' (default), ''same-origin'', or ''include''", "percentage": 96}]'::jsonb, 'JavaScript Fetch API', 'Credentials properly included in fetch', 'Using XMLHttpRequest option withCredentials in fetch', 0.96, 'haiku', NOW(), 'https://stackoverflow.com/questions/40543372/set-withcredentials-to-the-new-es6-built-in-http-request-api-fetch', 'admin:1764225748'),
('SyntaxError: JSON.parse: unexpected end of data', 'javascript', 'MEDIUM', '[{"solution": "Response body is empty or not JSON. Use response.text() to inspect: response.text().then(text => console.log(text))", "percentage": 92}, {"solution": "Check server sends Content-Type: application/json and body is not empty", "percentage": 89}]'::jsonb, 'JavaScript ES6+', 'Valid JSON returned from server', 'Server returning empty or malformed response body', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/47213564/javascript-fetch-response-returning-undefined', 'admin:1764225748'),
('Fetch doesn''t reject on 404 or 500 status', 'javascript', 'MEDIUM', '[{"solution": "Fetch only rejects on network error, not HTTP errors. Check status manually: if (!response.ok) throw new Error(''HTTP '' + response.status)", "percentage": 95}, {"solution": "Use response.ok property which is false for 4xx and 5xx", "percentage": 93}]'::jsonb, 'JavaScript ES6+', 'All HTTP error codes handled in catch', 'Expecting promise rejection on HTTP errors like 404', 0.92, 'haiku', NOW(), 'https://stackoverflow.com/questions/56295606/typescriptor-javascript-fetch-api-async-await-error-handling', 'admin:1764225748'),
('Promise.reject not called properly in catch', 'javascript', 'LOW', '[{"solution": "Use Promise.reject(response) instead of just throwing, then call response.json() in catch: Promise.reject(response).catch(r => r.json())", "percentage": 88}, {"solution": "Simpler: just throw error and handle all errors in catch block", "percentage": 92}]'::jsonb, 'JavaScript Promise API', 'Error response JSON parsed and displayed', 'Incorrectly using Promise.reject syntax', 0.85, 'haiku', NOW(), 'https://stackoverflow.com/questions/50330795/fetch-api-error-handling', 'admin:1764225748'),
('Async/await doesn''t catch fetch errors properly', 'javascript', 'MEDIUM', '[{"solution": "Use try/catch: try { const res = await fetch(url); if (!res.ok) throw new Error(res.status); } catch(err) { }", "percentage": 94}, {"solution": "Check response.ok before using response.json()", "percentage": 91}]'::jsonb, 'JavaScript ES2017+', 'All errors caught by try/catch block', 'Not checking response.ok in async/await code', 0.90, 'haiku', NOW(), 'https://stackoverflow.com/questions/54163952/async-await-in-fetch-how-to-handle-errors', 'admin:1764225748'),
('Fetch API global error handling missing', 'javascript', 'MEDIUM', '[{"solution": "Create wrapper function for all fetches: function secureFetch(url, opts) { return fetch(url, opts).then(res => res.ok ? res : Promise.reject(res)).catch(err => { console.log(err); throw err; }) }", "percentage": 89}, {"solution": "Implement middleware pattern for consistent error handling across app", "percentage": 85}]'::jsonb, 'JavaScript ES6+', 'Consistent error handling across all requests', 'Handling errors inline instead of globally', 0.86, 'haiku', NOW(), 'https://stackoverflow.com/questions/51297206/fetch-api-global-error-handler', 'admin:1764225748'),
('TypeError: Cannot read body response twice', 'javascript', 'LOW', '[{"solution": "Response body is a stream. Read once: const text = await response.text(); or const json = await response.json(). Don''t read twice", "percentage": 91}, {"solution": "Clone response if you need to read twice: response.clone().text()", "percentage": 88}]'::jsonb, 'JavaScript Streams API', 'Response body read successfully once', 'Trying to call response.json() and response.text() on same response', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/47380429/fetch-api-response-json-resulting-in-syntaxerror-json-parse-unexpected-end-o', 'admin:1764225748'),
('Fetch request succeeds but returns opaque response', 'javascript', 'MEDIUM', '[{"solution": "mode: ''no-cors'' returns opaque response. Remove it and ensure server has proper CORS headers", "percentage": 93}, {"solution": "Opaque responses can''t access body, headers, or status. Use CORS instead", "percentage": 94}]'::jsonb, 'JavaScript Fetch API + Server CORS', 'Response body and status accessible', 'Using mode: ''no-cors'' when you need to read response', 0.93, 'haiku', NOW(), 'https://stackoverflow.com/questions/43262121/trying-to-use-fetch-and-pass-in-mode-no-cors', 'admin:1764225748'),
('Image/binary file fetch Content-Type error', 'javascript', 'LOW', '[{"solution": "For binary files, use response.blob() instead of response.json(): fetch(url).then(res => res.blob())", "percentage": 92}, {"solution": "Verify server sends correct Content-Type header for file type", "percentage": 87}]'::jsonb, 'JavaScript Fetch API + Binary Handling', 'Binary file correctly downloaded', 'Using response.json() for non-JSON content types', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/45383874/fetch-api-yields-typeerror-failed-to-fetch', 'admin:1764225748'),
('Fetch request disabled by browser security policy', 'javascript', 'MEDIUM', '[{"solution": "Check: CORS headers, Content-Type compatibility, opaque responses. Use fetch OPTIONS preflight for complex requests", "percentage": 86}, {"solution": "Enable server to handle OPTIONS requests for CORS preflight", "percentage": 88}]'::jsonb, 'JavaScript + Server Configuration', 'Request passes CORS preflight and completes', 'Missing server-side CORS preflight handling', 0.85, 'haiku', NOW(), 'https://stackoverflow.com/questions/37078215/how-to-handle-errors-in-fetch-responses-with-redux-thunk', 'admin:1764225748');
