INSERT INTO knowledge_entries (query, category, hit_frequency, solutions, prerequisites, success_indicators, common_pitfalls, success_rate, claude_version, last_verified, source_url, contributor_email) VALUES
('UNREACHABLE! Failed to connect to the host via ssh: Permission denied', 'devops', 'HIGH', '[{"solution": "Add remote_user in playbook: remote_user: username or use --user flag in command", "percentage": 85}, {"solution": "Ensure SSH key is in authorized_keys on target host", "percentage": 90}, {"solution": "Check ansible_ssh_extra_args configuration and remove conflicting options like -K", "percentage": 75}]'::jsonb, 'SSH configured, correct username, private key present', 'Host connects successfully without ansible', 'Using wrong SSH key path or permissions 600 on key', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/50855206/unreachable-error-while-running-an-ansible-playbook', 'admin:1764223862'),
('ansible-playbook UNREACHABLE - host unreachable in playbook execution', 'devops', 'HIGH', '[{"solution": "Use block-rescue to catch unreachable errors: block: - tasks rescue: - debug msg Host unreachable", "percentage": 80}, {"solution": "Add any_errors_fatal: false to continue on unreachable hosts", "percentage": 85}]'::jsonb, 'Ansible 2.3+, playbook structure', 'Playbook continues despite unreachable host', 'Using when conditions with unreachable variable', 0.82, 'haiku', NOW(), 'https://stackoverflow.com/questions/55935582/ansible-playbook-how-to-write-unreachable-inventory-host-names-to-a-file', 'admin:1764223862'),
('fatal: [host] UNREACHABLE! aborting ansible playbook', 'devops', 'HIGH', '[{"solution": "Set max_fail_percentage: 50 to allow partial failures", "percentage": 80}, {"solution": "Use ignore_unreachable: yes in task to skip unreachable hosts", "percentage": 88}]'::jsonb, 'Ansible 2.2+, multi-host playbook', 'Playbook fails only on unreachable hosts', 'Not understanding difference between failed and unreachable', 0.86, 'haiku', NOW(), 'https://stackoverflow.com/questions/25930503/aborting-ansible-playbook-if-a-host-is-unreachable', 'admin:1764223862'),
('ansible SSH connection fail - permission denied gssapi', 'devops', 'HIGH', '[{"solution": "Specify correct remote user: ansible-playbook -u username playbook.yml", "percentage": 85}, {"solution": "Disable GSSAPI in SSH: ansible_ssh_common_args=-o GSSAPIAuthentication=no", "percentage": 82}]'::jsonb, 'SSH access, correct credentials', 'SSH connection established', 'GSSAPI timeout issues, wrong port number', 0.84, 'haiku', NOW(), 'https://stackoverflow.com/questions/37213551/ansible-ssh-connection-fail', 'admin:1764223862'),
('UNREACHABLE error - recover from host unreachable in playbook', 'devops', 'MEDIUM', '[{"solution": "Use register variable with ignore_unreachable: yes to capture state", "percentage": 75}, {"solution": "Create separate tasks for unreachable hosts using when: ansible_host_unreachable is not defined", "percentage": 70}]'::jsonb, 'Ansible 2.0+, error handling knowledge', 'Task completes with captured unreachable state', 'Trying to recover from unreachable without task isolation', 0.72, 'haiku', NOW(), 'https://stackoverflow.com/questions/37467038/recover-from-host-unreachable-inside-ansible-playbook', 'admin:1764223862'),
('UNREACHABLE - handle unreachable host in ansible playbook', 'devops', 'MEDIUM', '[{"solution": "Use meta tasks: - meta: clear_host_errors to reset error state", "percentage": 78}, {"solution": "Add ignore_host_key_checking: True in ansible.cfg if key verification fails", "percentage": 72}]'::jsonb, 'Ansible 2.2+, meta module', 'Host recovery without playbook failure', 'Not using clear_host_errors before retry', 0.75, 'haiku', NOW(), 'https://stackoverflow.com/questions/72356908/handle-unreachable-host-in-ansible', 'admin:1764223862'),
('SSH OK but ansible returns unreachable error', 'devops', 'MEDIUM', '[{"solution": "Check if user has correct shell: ssh user@host echo $SHELL", "percentage": 80}, {"solution": "Ensure python/python3 is installed on target: ansible all -m raw -a which python3", "percentage": 92}, {"solution": "Add ansible_python_interpreter: /usr/bin/python3 to inventory", "percentage": 88}]'::jsonb, 'Direct SSH access, Python on target', 'ansible all -m ping returns SUCCESS', 'Missing python, non-standard shell, missing required modules', 0.87, 'haiku', NOW(), 'https://stackoverflow.com/questions/40607688/ssh-ok-but-ansible-returns-unreachable', 'admin:1764223862'),
('ansible-playbook fails on particular server only', 'devops', 'MEDIUM', '[{"solution": "Check server-specific facts: debug: var=ansible_os_family", "percentage": 75}, {"solution": "Use server-specific inventory group variables to override defaults", "percentage": 80}]'::jsonb, 'Playbook works on other servers, server has SSH', 'Playbook succeeds on all servers or identified specific issue', 'Server config differences not investigated', 0.73, 'haiku', NOW(), 'https://stackoverflow.com/questions/54505940/ansible-playbook-fails-on-a-particular-server-only/54506624', 'admin:1764223862'),
('operation requires privilege escalation ansible error', 'devops', 'HIGH', '[{"solution": "Add become: yes and become_method: sudo to task", "percentage": 90}, {"solution": "Set NOPASSWD in sudoers: username ALL=(ALL) NOPASSWD: ALL", "percentage": 88}, {"solution": "Provide become_pass in playbook or use ansible-vault for credentials", "percentage": 82}]'::jsonb, 'Sudo access on remote host', 'Task executes with elevated privileges', 'Forgetting become: yes, sudoers misconfiguration, wrong become_method', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/49752512/operation-requires-privilege-escalation', 'admin:1764223862'),
('ansible privilege escalation issue with password', 'devops', 'HIGH', '[{"solution": "Add become_pass: password_variable or pass with --ask-become-pass flag", "percentage": 85}, {"solution": "Configure sudoers NOPASSWD to avoid password prompt: ansible_user_id ALL=(ALL) NOPASSWD: ALL", "percentage": 88}, {"solution": "Use ansible-vault to encrypt password in playbook", "percentage": 80}]'::jsonb, 'Sudo privilege on target, correct user', 'Task executes with root privileges', 'Password not provided, NOPASSWD not configured', 0.87, 'haiku', NOW(), 'https://stackoverflow.com/questions/58189729/ansible-privilege-escalation-issue-with-password', 'admin:1764223862'),
('timeout waiting for privilege escalation prompt ansible', 'devops', 'MEDIUM', '[{"solution": "Increase timeout: become_method_timeout: 30 or ansible_timeout: 30", "percentage": 85}, {"solution": "Add async: 300 for long-running privilege escalation tasks", "percentage": 75}]'::jsonb, 'EC2 or slow systems, become configured', 'Task completes within timeout period', 'Not accounting for EC2 slow startups, tight timeout values', 0.80, 'haiku', NOW(), 'https://stackoverflow.com/questions/39533532/ansible-timeout-12s-waiting-for-privilege-escalation-prompt', 'admin:1764223862'),
('ansible non-root sudo user privilege escalation', 'devops', 'MEDIUM', '[{"solution": "Set remote_user: non_root_user and become_user: root", "percentage": 90}, {"solution": "Ensure sudoers includes: non_root_user ALL=(ALL) ALL without password", "percentage": 88}]'::jsonb, 'Non-root user with sudo, sudoers configured', 'Non-root user can run tasks with become', 'Using wrong become_user, sudoers not configured for non-root user', 0.86, 'haiku', NOW(), 'https://stackoverflow.com/questions/40983674/ansible-non-root-sudo-user-and-become-privilege-escalation', 'admin:1764223862'),
('ansible undefined variable in host_vars', 'devops', 'HIGH', '[{"solution": "Verify variable file exists in /etc/ansible/host_vars/hostname.yml", "percentage": 88}, {"solution": "Use debug: var=variable_name to verify variable is loaded", "percentage": 90}, {"solution": "Check roles_path is correct in ansible.cfg: roles_path = /etc/ansible/roles", "percentage": 82}]'::jsonb, 'Ansible 2.7+, host_vars directory exists', 'Variable loads and displays correct value', 'host_vars file not in correct path, wrong filename, incorrect roles_path', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/55536600/problems-with-ansible-2-7-9-using-host-vars-undefined-variable', 'admin:1764223862'),
('ansible network device operation requires privilege escalation', 'devops', 'MEDIUM', '[{"solution": "For network modules, use authorize: yes instead of become: yes", "percentage": 85}, {"solution": "Set auth_pass for network device authentication", "percentage": 82}]'::jsonb, 'Network device access, enable password set', 'Network task executes with elevated privileges', 'Using become for network devices instead of authorize', 0.81, 'haiku', NOW(), 'https://stackoverflow.com/questions/68045569/ansible-networks-error-operation-requires-privilege-escalation', 'admin:1764223862'),
('ansible cisco switch privilege escalation required', 'devops', 'MEDIUM', '[{"solution": "Use ansible_become_method: enable for Cisco devices", "percentage": 88}, {"solution": "Set ansible_become_pass with enable secret password", "percentage": 85}, {"solution": "Configure enable password in inventory: ansible_become_pass=secret123", "percentage": 80}]'::jsonb, 'Cisco device access, enable password known', 'Switch configuration commands execute successfully', 'Using sudo method for Cisco instead of enable', 0.84, 'haiku', NOW(), 'https://stackoverflow.com/questions/61781060/ansible-cisco-switch-operation-requires-privilege-escalation-networkchuck-exa', 'admin:1764223862'),
('ansible undefined variable in task error', 'devops', 'HIGH', '[{"solution": "Define variable before use: - set_fact: variable_name=value", "percentage": 92}, {"solution": "Use default filter: {{ variable_name | default(default_value) }}", "percentage": 90}, {"solution": "Check variable scope - ensure variable defined in same play or globally", "percentage": 88}]'::jsonb, 'Basic Jinja2 knowledge, playbook structure', 'Task executes without undefined variable error', 'Variable name typo, scope issues, undefined loop items', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/59318382/ansible-undefined-variable-in-task', 'admin:1764223862'),
('ansible ignore errors in tasks and fail at end of playbook', 'devops', 'MEDIUM', '[{"solution": "Use ignore_errors: yes per task and any_errors_fatal: false for play", "percentage": 85}, {"solution": "Set failed_when condition to control failure: failed_when: result.rc > 0", "percentage": 88}, {"solution": "Use block-rescue to handle errors gracefully", "percentage": 82}]'::jsonb, 'Ansible 2.0+, error handling knowledge', 'Playbook completes with final failure status', 'Not understanding difference between failed and changed', 0.85, 'haiku', NOW(), 'https://stackoverflow.com/questions/38876487/ansible-ignore-errors-in-tasks-and-fail-at-end-of-the-playbook-if-any-tasks-had', 'admin:1764223862'),
('ansible catch errors in handlers', 'devops', 'MEDIUM', '[{"solution": "Use listen directive in handler: - listen: restart apache", "percentage": 80}, {"solution": "Handlers cannot directly use ignore_errors - use notify with error checking", "percentage": 75}, {"solution": "Create separate handler tasks with individual error handling", "percentage": 78}]'::jsonb, 'Ansible 2.2+, handler knowledge', 'Handler executes and errors are logged', 'Handlers do not support ignore_errors directly', 0.76, 'haiku', NOW(), 'https://stackoverflow.com/questions/71665568/how-to-catch-errors-in-handlers-in-ansible', 'admin:1764223862'),
('clean error output in ansible playbook', 'devops', 'MEDIUM', '[{"solution": "Use stdout_callback: json in ansible.cfg for parseable output", "percentage": 82}, {"solution": "Redirect stderr: command: something 2>/dev/null", "percentage": 75}, {"solution": "Use no_log: true to hide sensitive error output", "percentage": 88}]'::jsonb, 'Ansible 2.0+, callback plugin knowledge', 'Cleaner, more readable output from playbook runs', 'Using wrong callback plugin for requirements', 0.80, 'haiku', NOW(), 'https://stackoverflow.com/questions/37171966/clean-error-output-in-ansible-playbook', 'admin:1764223862'),
('ansible custom error message when task fails', 'devops', 'MEDIUM', '[{"solution": "Use fail module: - fail: msg=Custom error message", "percentage": 90}, {"solution": "Set custom failed_when: failed_when: result.stdout | length == 0", "percentage": 88}, {"solution": "Use register and check with debug before failing", "percentage": 85}]'::jsonb, 'Ansible 2.0+, conditional logic', 'Custom error message displays when task fails', 'Unclear failed_when conditions, improper syntax', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/64045634/how-can-i-print-a-custom-error-message-when-an-ansible-tasks-fails', 'admin:1764223862'),
('ansible errors coming from ansible roles', 'devops', 'MEDIUM', '[{"solution": "Check role syntax: ansible-playbook --syntax-check playbook.yml", "percentage": 85}, {"solution": "Verify role directory structure: roles/role_name/tasks/main.yml", "percentage": 88}, {"solution": "Use debug: msg=problem to trace role execution", "percentage": 82}]'::jsonb, 'Ansible roles structure knowledge', 'Role executes without errors', 'Missing main.yml, incorrect role_path, task dependencies', 0.84, 'haiku', NOW(), 'https://stackoverflow.com/questions/55521078/how-to-deal-with-errors-coming-from-ansible-roles', 'admin:1764223862'),
('ansible failure message based on conditional failed_when', 'devops', 'MEDIUM', '[{"solution": "Combine failed_when with custom message: block: - tasks failed_when: condition rescue: - fail: msg=Custom message", "percentage": 82}, {"solution": "Use register with debug to show conditional failure reason", "percentage": 80}]'::jsonb, 'Ansible 2.1+, block-rescue, conditional logic', 'Task fails with custom message on condition', 'Complex failed_when logic not tested individually', 0.79, 'haiku', NOW(), 'https://stackoverflow.com/questions/64125566/ansible-failure-message-based-on-conditional-failed-when', 'admin:1764223862'),
('ansible failed task result variables undefined when registered', 'devops', 'MEDIUM', '[{"solution": "Check if task registered variable: - name: task register: result - debug: result", "percentage": 88}, {"solution": "Verify task ran - failed tasks may not register: failed_when: false in previous task", "percentage": 85}]'::jsonb, 'Ansible 2.0+, register knowledge', 'Registered variable contains task result', 'Using register without checking if task executed', 0.83, 'haiku', NOW(), 'https://stackoverflow.com/questions/41104241/ansible-failed-task-ansible-failed-result-variables-are-undefined-when-res', 'admin:1764223862'),
('ansible fix error for most modules required module missing', 'devops', 'HIGH', '[{"solution": "Install required module: - apt: name=python3-module-name state=present", "percentage": 88}, {"solution": "Specify ansible_python_interpreter if using wrong Python version", "percentage": 85}, {"solution": "Check module documentation for OS-specific requirements", "percentage": 82}]'::jsonb, 'Module documentation, OS knowledge', 'Module executes without missing dependency error', 'Missing OS-specific library, wrong Python version', 0.86, 'haiku', NOW(), 'https://stackoverflow.com/questions/78020198/how-to-fix-this-ansible-error-for-most-of-the-modules', 'admin:1764223862'),
('ansible become_user with variable error', 'devops', 'MEDIUM', '[{"solution": "Set become_user as variable: become_user: {{ remote_user }}", "percentage": 88}, {"solution": "Ensure variable is defined before task: - set_fact: remote_user=username", "percentage": 90}, {"solution": "Use conditional become: become: yes when: condition", "percentage": 82}]'::jsonb, 'Ansible 2.0+, variable scoping', 'Task executes as specified user', 'Undefined variable in become_user, wrong scope', 0.87, 'haiku', NOW(), 'https://stackoverflow.com/questions/37992256/ansible-become-user-with-variable', 'admin:1764223862'),
('ansible invalid JSON when using extra-vars', 'devops', 'HIGH', '[{"solution": "Properly quote JSON: -e key=value or use @file.json", "percentage": 90}, {"solution": "Escape quotes in extra-vars: -e key=value", "percentage": 88}, {"solution": "Use file for complex JSON: ansible-playbook -e @vars.json playbook.yml", "percentage": 92}]'::jsonb, 'JSON syntax, shell escaping', 'extra-vars parses without JSON errors', 'Shell quote escaping, improper JSON structure', 0.90, 'haiku', NOW(), 'https://stackoverflow.com/questions/60139121/ansible-invalid-json-when-using-extra-vars', 'admin:1764223862'),
('ansible requires a JSON module none found error', 'devops', 'HIGH', '[{"solution": "Install Python JSON: pip install json or use Python 3 (has json builtin)", "percentage": 92}, {"solution": "Set ansible_python_interpreter: /usr/bin/python3 in inventory", "percentage": 90}, {"solution": "Check /proc/*/environ for correct Python path", "percentage": 85}]'::jsonb, 'Python 2/3 knowledge, pip', 'Module list/parse commands work without JSON error', 'Using Python 2, JSON module not installed', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/28380771/error-ansible-requires-a-json-module-none-found', 'admin:1764223862'),
('ansible errors when using json_query filter', 'devops', 'MEDIUM', '[{"solution": "Install jmespath: pip install jmespath", "percentage": 92}, {"solution": "Verify JSON structure with debug: var=variable before json_query", "percentage": 88}, {"solution": "Use correct jmespath syntax - test at jmespath.org", "percentage": 90}]'::jsonb, 'jmespath library, JSON parsing', 'json_query filter returns expected values', 'Missing jmespath, incorrect JMESPath syntax, malformed JSON input', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/67195878/errors-when-use-json-query-in-ansible', 'admin:1764223862'),
('ansible playbook always return error resolved', 'devops', 'MEDIUM', '[{"solution": "Check playbook syntax: ansible-playbook --syntax-check playbook.yml", "percentage": 90}, {"solution": "Run with -vvv for verbose output to identify actual error", "percentage": 88}, {"solution": "Validate YAML formatting with yamllint tool", "percentage": 85}]'::jsonb, 'YAML syntax, debugging knowledge', 'Playbook runs without syntax or runtime errors', 'YAML indentation, syntax errors, undefined variables', 0.87, 'haiku', NOW(), 'https://stackoverflow.com/questions/34998561/why-does-my-ansible-playbook-always-return-error', 'admin:1764223862'),
('ansible error when reading values from JSON response', 'devops', 'MEDIUM', '[{"solution": "Parse JSON response: - debug: msg={{ result.json() | json_query(key) }}", "percentage": 88}, {"solution": "Register response and check structure: - debug: var=response.json", "percentage": 90}, {"solution": "Use from_json filter for string JSON: {{ json_string | from_json }}", "percentage": 87}]'::jsonb, 'JSON parsing, jinja2 filters', 'JSON values extracted and used in tasks', 'Wrong json_query syntax, missing json() call, string vs object confusion', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/52987251/ansible-error-when-reading-values-from-json-response', 'admin:1764223862');
