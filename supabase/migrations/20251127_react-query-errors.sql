INSERT INTO knowledge_entries (query, category, hit_frequency, solutions, prerequisites, success_indicators, common_pitfalls, success_rate, claude_version, last_verified, source_url, contributor_email) VALUES
('onError callback called multiple times on useQuery', 'react-query', 'HIGH', '[{"solution": "Use query-level onError instead of component-level alert/toast to avoid duplicate calls per observer", "percentage": 85}, {"solution": "Move imperative error handling to mutation onError or useErrorHandler hook", "percentage": 80}]'::jsonb, 'React Query v4+', 'Single error notification displayed', 'Placing error logic in render causes multiple triggers', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/71537128/how-to-imperatively-handle-an-error-with-react-query', 'admin:1764225673'),
('error type defaults to unknown in useQuery', 'react-query', 'HIGH', '[{"solution": "Use type guard: if (error instanceof Error) before accessing error.message", "percentage": 90}, {"solution": "Use axios.isAxiosError(error) helper for AxiosError type narrowing", "percentage": 88}]'::jsonb, 'TypeScript 4.4+, React Query', 'No type errors on error.message access', 'Assuming error type without guards', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/72321623/whats-the-type-of-react-querys-error-and-how-to-handle-different-cases', 'admin:1764225673'),
('Cannot access status code in global onError handler', 'react-query', 'MEDIUM', '[{"solution": "Access error.request.status instead of error.status for axios errors", "percentage": 92}, {"solution": "Verify error object type is AxiosError or implement custom fetch error wrapper", "percentage": 85}]'::jsonb, 'Axios or fetch library', 'Status code accessible in onError handler', 'Assuming all errors have status property', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/69926976/react-query-get-error-status-code-in-global-onerror-handler', 'admin:1764225673'),
('isError not setting to true on failed mutation', 'react-query', 'HIGH', '[{"solution": "Remove catch block from mutation function to let React Query handle rejection", "percentage": 95}, {"solution": "Ensure mutation function returns rejected promise instead of catching internally", "percentage": 93}]'::jsonb, 'React Query mutations', 'isError flag correctly set on failure', 'Catching errors inside mutation function prevents React Query detection', 0.94, 'haiku', NOW(), 'https://stackoverflow.com/questions/71903974/react-query-mutation-iserror-not-setting-true-on-failed-post', 'admin:1764225673'),
('Bad argument type error in React Query v5', 'react-query', 'MEDIUM', '[{"solution": "Update queryFn signature to match v5 requirements for axios requests", "percentage": 87}, {"solution": "Check axios import and ensure proper error handling in queryFn", "percentage": 82}]'::jsonb, 'React Query v5, Axios', 'No type validation errors on queryFn', 'Using v4 function signatures in v5', 0.85, 'haiku', NOW(), 'https://stackoverflow.com/questions/77513697/react-query-error-when-making-axios-request', 'admin:1764225673'),
('Retry does not work on useMutation in React Query v2', 'react-query', 'MEDIUM', '[{"solution": "Upgrade to React Query v3+ which supports retry parameter", "percentage": 90}, {"solution": "Use axios-retry library as workaround for v2", "percentage": 78}]'::jsonb, 'React Query v2, Axios', 'Mutation retries on failure', 'Using v2 without upgrade or axios-retry', 0.84, 'haiku', NOW(), 'https://stackoverflow.com/questions/69834975/retry-with-usemutation-react-query', 'admin:1764225673'),
('invalidateQueries does not trigger retries when query is disabled', 'react-query', 'MEDIUM', '[{"solution": "Enable query before invalidation and ensure component using query is mounted", "percentage": 88}, {"solution": "Use enabled: true temporarily or move query into mounted component tree", "percentage": 82}]'::jsonb, 'React Query enabled/disabled queries', 'Retries execute on invalidation', 'Invalidating disabled queries without mounting consumer component', 0.85, 'haiku', NOW(), 'https://stackoverflow.com/questions/79654745/tanstack-query-invalidate-queries-not-working-with-retry', 'admin:1764225673'),
('QueryClient recreated on every render clears cache', 'react-query', 'HIGH', '[{"solution": "Create QueryClient outside of component or use useMemo to prevent recreation", "percentage": 97}, {"solution": "Move queryClient to separate file and import as singleton", "percentage": 95}]'::jsonb, 'React Query setup', 'Cache persists across component re-renders', 'Instantiating QueryClient inside component', 0.96, 'haiku', NOW(), 'https://stackoverflow.com/questions/67040687/react-query-doesnt-seem-to-be-caching', 'admin:1764225673'),
('staleTime=0 causes aggressive background refetching', 'react-query', 'HIGH', '[{"solution": "Set staleTime to higher value like 10000 (10 seconds) or Infinity for app lifetime", "percentage": 93}, {"solution": "Set staleTime in defaultOptions at QueryClient level for global config", "percentage": 90}]'::jsonb, 'React Query configuration', 'No unnecessary background refetches', 'Using default staleTime of 0', 0.92, 'haiku', NOW(), 'https://stackoverflow.com/questions/70238846/react-query-query-is-not-using-cache', 'admin:1764225673'),
('Data still stale after mutation and query invalidation', 'react-query', 'MEDIUM', '[{"solution": "Use resetQueries instead of invalidateQueries to clear cache completely", "percentage": 86}, {"solution": "Ensure component using query is still mounted when invalidation occurs", "percentage": 84}]'::jsonb, 'React Query mutations and queries', 'Updated data displays immediately after mutation', 'Using invalidateQueries alone without component remount', 0.85, 'haiku', NOW(), 'https://stackoverflow.com/questions/72679118/data-still-stale-after-mutation-and-query-invalidation', 'admin:1764225673'),
('Request timeout not handled by React Query', 'react-query', 'LOW', '[{"solution": "Use axios.get with timeout option: axios.get(url, { timeout: 5000 })", "percentage": 92}, {"solution": "Use ky fetch library which supports built-in timeout", "percentage": 85}]'::jsonb, 'Axios or Fetch API', 'Request aborts after specified timeout', 'Attempting timeout at React Query level instead of HTTP client', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/73345005/can-i-give-react-query-a-timeout-seconds-or-milliseconds-so-after-that-amou', 'admin:1764225673'),
('retryOnMount causes infinite retry loop on error state', 'react-query', 'MEDIUM', '[{"solution": "Set retryOnMount: false in global defaultOptions or query config", "percentage": 94}, {"solution": "Implement proper error boundary to prevent component remount cycles", "percentage": 87}]'::jsonb, 'React Query with conditional rendering', 'No infinite query retry loops', 'Using retryOnMount true with conditional component rendering', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/78444255/react-query-infinite-retry-loop', 'admin:1764225673'),
('invalidateQueries returns stale data before fresh data', 'react-query', 'MEDIUM', '[{"solution": "Use resetQueries instead to completely clear cache and force hard loading state", "percentage": 89}, {"solution": "Set staleTime: 0 to mark data stale immediately when invalidated", "percentage": 82}]'::jsonb, 'React Query cache management', 'Fresh data displays without stale intermediate state', 'Understanding invalidateQueries still returns cached data during refetch', 0.86, 'haiku', NOW(), 'https://stackoverflow.com/questions/76044003/react-query-invalidatequeries-cache', 'admin:1764225673'),
('Cache time zero does not remove query from disabled state', 'react-query', 'LOW', '[{"solution": "Set cacheTime: 0 to remove from cache on page navigation", "percentage": 87}, {"solution": "Use removeQueries on unmount for disabled queries", "percentage": 80}]'::jsonb, 'React Query enabled: false', 'Disabled query cleared from cache on remount', 'Not setting cacheTime: 0 on disabled queries', 0.84, 'haiku', NOW(), 'https://stackoverflow.com/questions/71436790/invalidate-disabled-query-in-react-query', 'admin:1764225673'),
('invalidateQueries acts as stale marker not cache reset', 'react-query', 'MEDIUM', '[{"solution": "Use queryClient.resetQueries to clear data completely", "percentage": 91}, {"solution": "Understand invalidation only marks as stale, not deletion", "percentage": 88}]'::jsonb, 'React Query cache philosophy', 'Correctly using resetQueries for hard clear', 'Expecting invalidateQueries to delete cached data', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/66796136/how-to-invalidate-cache-with-react-query-v3', 'admin:1764225673'),
('isFetching vs isLoading distinction in invalidated queries', 'react-query', 'MEDIUM', '[{"solution": "Use isFetching for background refetch state after invalidation", "percentage": 90}, {"solution": "Use isLoading only for initial fetch without cached data", "percentage": 88}]'::jsonb, 'React Query v3+', 'Correct loading state display during cache invalidation', 'Confusing isLoading with isFetching on invalidated queries', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/76647615/how-to-invalidate-cache-initialdata-in-react-query', 'admin:1764225673'),
('initialData not updated when parent query changes', 'react-query', 'MEDIUM', '[{"solution": "Use queryClient.setQueryData to sync initialData after parent invalidation", "percentage": 93}, {"solution": "Watch dependency and refetch child query when parent changes", "percentage": 87}]'::jsonb, 'React Query useQuery with initialData', 'Child query data syncs with parent changes', 'Relying on initialData without explicit cache synchronization', 0.90, 'haiku', NOW(), 'https://stackoverflow.com/questions/76647615/how-to-invalidate-cache-initialdata-in-react-query', 'admin:1764225673'),
('Cache invalidation with pagination and filtering not working', 'react-query', 'HIGH', '[{"solution": "Include all filter and pagination values in queryKey array", "percentage": 95}, {"solution": "Invalidate with partial queryKey matching to affect all pagination states", "percentage": 91}]'::jsonb, 'React Query with dynamic queryKey', 'All pagination/filter combinations properly cached and invalidated', 'Not including filters/pagination in queryKey structure', 0.93, 'haiku', NOW(), 'https://stackoverflow.com/questions/77616029/react-query-cache-invalidation-issue-with-pagination-and-filtering-in-usequery', 'admin:1764225673'),
('Network response was not ok error in fetch wrapper', 'react-query', 'MEDIUM', '[{"solution": "Throw error from queryFn when response.ok is false", "percentage": 92}, {"solution": "Include status code in thrown error for downstream error handling", "percentage": 88}]'::jsonb, 'Fetch API error handling', 'Error caught by React Query error state', 'Not throwing error on non-ok response status', 0.90, 'haiku', NOW(), 'https://stackoverflow.com/questions/71903974/react-query-mutation-iserror-not-setting-true-on-failed-post', 'admin:1764225673'),
('onError and onSuccess callbacks deprecated in React Query v5', 'react-query', 'MEDIUM', '[{"solution": "Use mutation callbacks or integrate error handling at component level", "percentage": 86}, {"solution": "Check TanStack Query v5 docs for replacement patterns", "percentage": 84}]'::jsonb, 'React Query v5 migration', 'No console deprecation warnings', 'Using v4 callback pattern in v5', 0.85, 'haiku', NOW(), 'https://stackoverflow.com/questions/71537128/how-to-imperatively-handle-an-error-with-react-query', 'admin:1764225673');
