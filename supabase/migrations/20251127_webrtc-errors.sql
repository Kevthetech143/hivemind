INSERT INTO knowledge_entries (query, category, hit_frequency, solutions, prerequisites, success_indicators, common_pitfalls, success_rate, claude_version, last_verified, source_url, contributor_email) VALUES
('ICE connection failed add STUN server', 'webrtc', 'HIGH', '[{"solution": "Configure STUN servers in iceServers config: stun:stun.l.google.com:19302", "percentage": 95}, {"solution": "Add TURN server for relay when behind firewall/NAT", "percentage": 85}]'::jsonb, 'RTCPeerConnection configuration', 'Connection state changes to connected', 'Not configuring any ICE servers for LAN testing', 0.92, 'haiku', NOW(), 'https://stackoverflow.com/questions/72862092/webrtc-ice-failed-in-firefox-but-working-in-ms-edge', 'admin:1764225777'),
('WebSocket connection failed Invalid frame header', 'webrtc', 'HIGH', '[{"solution": "Check WebSocket server is running and accessible at correct port", "percentage": 90}, {"solution": "Verify firewall rules allow WebSocket connections", "percentage": 85}]'::jsonb, 'WebSocket signaling server', 'Successful WebSocket connection established', 'Wrong port or server not running', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/67848745/is-there-any-solution-for-fixing-this-webrtc-error', 'admin:1764225777'),
('NotAllowedError user denied permission getUserMedia', 'webrtc', 'HIGH', '[{"solution": "Handle permission denial gracefully with catch block", "percentage": 100}, {"solution": "Check browser permissions and trust site in settings", "percentage": 95}]'::jsonb, 'Browser permission system', 'getUserMedia stream obtained successfully', 'Not handling catch block for permission errors', 0.97, 'haiku', NOW(), 'https://stackoverflow.com/questions/65780761/getusermedia-webrtc-error-on-ios-14-3-safari-notallowederror', 'admin:1764225777'),
('Failed to execute setRemoteDescription called in wrong state', 'webrtc', 'HIGH', '[{"solution": "Set remote description after offer received, before calling createAnswer", "percentage": 98}, {"solution": "Maintain proper signaling state machine order", "percentage": 95}]'::jsonb, 'RTCPeerConnection in correct state', 'setRemoteDescription completes without error', 'Setting remote description before receiving offer', 0.94, 'haiku', NOW(), 'https://stackoverflow.com/questions/44114925/webrtc-failed-to-set-remote-answer-sdp-called-in-wrong-state-state-inprogres', 'admin:1764225777'),
('OverconstrainedError constraints not supported camera', 'webrtc', 'MEDIUM', '[{"solution": "Remove strict max constraints and use only ideal values", "percentage": 92}, {"solution": "Test supported resolutions on target browser and device", "percentage": 88}]'::jsonb, 'Browser video constraint capabilities', 'getUserMedia returns stream with supported resolution', 'Using exact min/max constraints that device cannot satisfy', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/66261658/i-got-overconstrainederror-only-firefox-on-macbook-pro', 'admin:1764225777'),
('NotFoundError no media devices found', 'webrtc', 'MEDIUM', '[{"solution": "Verify camera/microphone connected and permissions granted in OS", "percentage": 93}, {"solution": "Use adapter.js for browser compatibility", "percentage": 87}]'::jsonb, 'Physical media devices attached', 'getUserMedia succeeds on Edge and all browsers', 'Missing camera/mic hardware or no browser permission', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/61290193/webrtc-getusermedia-raises-notfounderror-on-edge', 'admin:1764225777'),
('Failed to execute addIceCandidate candidate missing sdpMid sdpMLineIndex', 'webrtc', 'HIGH', '[{"solution": "Verify candidate object has sdpMid or sdpMLineIndex before adding", "percentage": 91}, {"solution": "Check if addIceCandidate is called before setRemoteDescription", "percentage": 89}]'::jsonb, 'Remote description set on peer connection', 'ICE candidate added successfully', 'Adding malformed candidate objects or candidates before remote description', 0.87, 'haiku', NOW(), 'https://stackoverflow.com/questions/58908081/webrtc-getting-failed-to-execute-addicecandidate-on-rtcpeerconnection-error-on', 'admin:1764225777'),
('Cannot read property addIceCandidate of undefined', 'webrtc', 'HIGH', '[{"solution": "Initialize RTCPeerConnection before receiving candidates", "percentage": 96}, {"solution": "Queue candidates until peer connection is ready", "percentage": 92}]'::jsonb, 'RTCPeerConnection object exists', 'addIceCandidate called successfully', 'Sending candidates before peer connection is created', 0.93, 'haiku', NOW(), 'https://stackoverflow.com/questions/63101096/webrtc-cannot-read-property-addicecandidate-of-undefined', 'admin:1764225777'),
('Cannot read property getTracks of null', 'webrtc', 'HIGH', '[{"solution": "Ensure getUserMedia resolves before accessing stream.getTracks()", "percentage": 97}, {"solution": "Use async/await pattern properly in promise chain", "percentage": 95}]'::jsonb, 'getUserMedia promise resolved', 'Tracks retrieved from stream and added to peer connection', 'Calling getTracks before getUserMedia promise resolves', 0.96, 'haiku', NOW(), 'https://stackoverflow.com/questions/62700376/uncaught-typeerror-cannot-read-property-gettracks-of-null', 'admin:1764225777'),
('InvalidStateError cannot add ICE candidate when no remote SDP', 'webrtc', 'HIGH', '[{"solution": "Call setRemoteDescription before addIceCandidate", "percentage": 99}, {"solution": "Queue candidates until remote description is set", "percentage": 96}]'::jsonb, 'Remote session description set', 'addIceCandidate succeeds without InvalidStateError', 'Attempting to add ICE candidates in wrong signaling state', 0.98, 'haiku', NOW(), 'https://stackoverflow.com/questions/57256828/how-to-fix-invalidstateerror-cannot-add-ice-candidate-when-there-is-no-remote-s', 'admin:1764225777'),
('DOMException error processing ICE candidate', 'webrtc', 'MEDIUM', '[{"solution": "Check remote description is set before adding candidates", "percentage": 92}, {"solution": "Avoid connecting peer to itself using same local ID", "percentage": 88}]'::jsonb, 'Valid ICE candidate and remote description', 'Connection established without ICE candidate errors', 'Adding candidates before remote description or duplicate connections', 0.85, 'haiku', NOW(), 'https://stackoverflow.com/questions/38198751/domexception-error-processing-ice-candidate', 'admin:1764225777'),
('Stream is undefined on ontrack event', 'webrtc', 'MEDIUM', '[{"solution": "Use event.streams[0] instead of event.stream for track event", "percentage": 94}, {"solution": "Create new MediaStream if no streams provided", "percentage": 88}]'::jsonb, 'Remote track received from peer', 'Remote video displays in video element', 'Using deprecated stream property instead of streams array', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/54264235/stream-is-undefined-on-ontrack-event-in-webrtc', 'admin:1764225777'),
('ontrack is not called', 'webrtc', 'MEDIUM', '[{"solution": "Add tracks before creating offer with addTrack", "percentage": 93}, {"solution": "Ensure remoteConnection is configured before offer", "percentage": 91}]'::jsonb, 'Tracks added to peer connection', 'Remote video stream received and displayed', 'Not adding local tracks before creating offer', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/51145222/webrtc-ontrack-is-not-called', 'admin:1764225777'),
('iceConnectionState failed without error', 'webrtc', 'HIGH', '[{"solution": "Queue ICE candidates until remote description is set", "percentage": 94}, {"solution": "Use proper signaling order and timing", "percentage": 89}]'::jsonb, 'Proper signaling sequence with remote description', 'iceConnectionState transitions to connected', 'Receiving ICE candidates before remote description is processed', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/47871943/iceconnectionstate-is-failed-without-any-error', 'admin:1764225777'),
('UDP port blocked by firewall WebRTC connection refused', 'webrtc', 'MEDIUM', '[{"solution": "Configure TURN server to relay through TCP/443 for firewall bypass", "percentage": 90}, {"solution": "Open UDP ports or configure firewall rules to allow P2P", "percentage": 85}]'::jsonb, 'Network access to media or TURN server', 'Peer connection succeeds across different networks', 'Firewall blocking UDP without TURN server fallback', 0.87, 'haiku', NOW(), 'https://stackoverflow.com/questions/76466107/cant-connect-to-peer-for-some-devices-webrtc', 'admin:1764225777'),
('Data channel not getting messages no listener', 'webrtc', 'MEDIUM', '[{"solution": "Use ondatachannel on answerer side to receive channel", "percentage": 95}, {"solution": "Only offerer creates channel with createDataChannel", "percentage": 97}]'::jsonb, 'Peer connection with both sides listening', 'Data channel messages sent and received', 'Both peers creating data channels instead of asymmetric pattern', 0.93, 'haiku', NOW(), 'https://stackoverflow.com/questions/35858158/cannot-get-message-through-data-channel', 'admin:1764225777'),
('RTCDataChannel readyState not open', 'webrtc', 'MEDIUM', '[{"solution": "Wait for onopen event before calling send on data channel", "percentage": 98}, {"solution": "Create data channel before creating offer", "percentage": 96}]'::jsonb, 'Data channel onopen event fired', 'Messages sent through data channel successfully', 'Calling send before data channel readyState is open', 0.95, 'haiku', NOW(), 'https://stackoverflow.com/questions/38181220/webrtc-rtcdatachannel-is-not-open', 'admin:1764225777'),
('Audio not working but video does', 'webrtc', 'MEDIUM', '[{"solution": "Check microphone permissions granted in browser and OS", "percentage": 92}, {"solution": "Verify audio tracks in local stream with getAudioTracks", "percentage": 88}]'::jsonb, 'Microphone device attached and enabled', 'Audio track obtained and transmitted', 'Missing audio permission or microphone hardware issue', 0.86, 'haiku', NOW(), 'https://stackoverflow.com/questions/43969147/audio-is-not-working-but-video-does-on-webrtc', 'admin:1764225777'),
('Audio only works one way calling user', 'webrtc', 'MEDIUM', '[{"solution": "Ensure both peers add audio tracks before creating offer", "percentage": 91}, {"solution": "Use offerToReceiveAudio true in sdpConstraints", "percentage": 89}]'::jsonb, 'Both peers with audio streams and tracks', 'Bidirectional audio transmission working', 'Only offerer has audio tracks or wrong constraint settings', 0.87, 'haiku', NOW(), 'https://stackoverflow.com/questions/31242353/webrtc-audio-only-works-one-way', 'admin:1764225777'),
('getDisplayMedia NotAllowedError permission denied', 'webrtc', 'MEDIUM', '[{"solution": "User must explicitly allow screen share in browser dialog", "percentage": 97}, {"solution": "Use HTTPS and handle permission dialog correctly", "percentage": 94}]'::jsonb, 'User permission for screen capture granted', 'Screen stream captured and displayed', 'User denying screen share permission or missing HTTPS', 0.94, 'haiku', NOW(), 'https://stackoverflow.com/questions/74412999/navigator-mediadevices-getdisplaymedia-returning-notallowederror-permission-de', 'admin:1764225777'),
('getUserMedia insecure document localhost Safari HTTPS', 'webrtc', 'MEDIUM', '[{"solution": "Use HTTPS even for localhost testing in Safari", "percentage": 98}, {"solution": "Enable Allow Media Capture on Insecure Sites in Safari Develop menu", "percentage": 92}]'::jsonb, 'HTTPS connection or Safari permission enabled', 'getUserMedia succeeds and camera access granted', 'Using HTTP on localhost with Safari', 0.93, 'haiku', NOW(), 'https://stackoverflow.com/questions/44523609/getusermedia-is-not-allowed-in-localhost-safari-11', 'admin:1764225777'),
('RTCPeerConnection connectionState failed symmetric NAT', 'webrtc', 'MEDIUM', '[{"solution": "Configure TURN server for relay through NAT", "percentage": 88}, {"solution": "Add multiple STUN servers to find best candidate", "percentage": 85}]'::jsonb, 'ICE server configuration with TURN relay', 'Connection state becomes connected successfully', 'Behind symmetric NAT without TURN server configured', 0.82, 'haiku', NOW(), 'https://stackoverflow.com/questions/70865190/webrtc-error-rtcpeerconnection-connectionstate-failed', 'admin:1764225777'),
('RTCPeerConnection connectionState failed stuck connecting', 'webrtc', 'MEDIUM', '[{"solution": "Call restartIce when connectionState becomes failed", "percentage": 89}, {"solution": "Configure ICE servers including TURN for relay", "percentage": 87}]'::jsonb, 'Ability to restart ICE and renegotiate', 'Connection successfully established after restart', 'Not handling failed connection state or missing ICE servers', 0.84, 'haiku', NOW(), 'https://stackoverflow.com/questions/61879184/webrtc-rtcpeerconnection-sometimes-fails-to-connect', 'admin:1764225777'),
('Aspect ratio constraint not enforced 16x9 video', 'webrtc', 'LOW', '[{"solution": "Add adapter.js for cross-browser constraint support", "percentage": 86}, {"solution": "Remove strict aspect ratio constraints in Firefox", "percentage": 81}]'::jsonb, 'Browser video processing capabilities', 'Video stream with acceptable aspect ratio', 'Using aspectRatio without adapter.js or browser support', 0.79, 'haiku', NOW(), 'https://stackoverflow.com/questions/36960035/failed-to-get-a-11-aspect-ratio-video-in-webrtc', 'admin:1764225777'),
('oniceconnectionstatechange stuck new checking failed', 'webrtc', 'HIGH', '[{"solution": "Ensure proper ICE server configuration with STUN/TURN", "percentage": 90}, {"solution": "Handle oniceconnectionstatechange event and implement reconnection logic", "percentage": 87}]'::jsonb, 'ICE server configuration', 'iceConnectionState transitions through proper states', 'Missing ICE servers or not monitoring connection state changes', 0.86, 'haiku', NOW(), 'https://stackoverflow.com/questions/69002779/rtcpeerconnection-fails-when-peers-on-different-networks', 'admin:1764225777');
