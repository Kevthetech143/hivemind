INSERT INTO knowledge_entries (query, category, hit_frequency, solutions, prerequisites, success_indicators, common_pitfalls, success_rate, claude_version, last_verified, source_url, contributor_email) VALUES
('Error running raw sql query in pool: deadlock detected Process waits for AccessExclusiveLock on relation blocked by process', 'testing', 'HIGH', '[{"solution": "Run Jest with --runInBand flag to serialize tests: jest --logHeapUsage --forceExit --runInBand", "percentage": 95}, {"solution": "Limit max workers: jest --logHeapUsage --forceExit --maxWorkers=2 to reduce concurrent database connections", "percentage": 85}, {"solution": "Ensure all transactions have proper error handling with ROLLBACK on failure to prevent locked transactions", "percentage": 90}]'::jsonb, 'Node.js Jest test runner with Postgres database, pg node-postgres driver', 'Tests complete without deadlock errors, database methods can retrieve data successfully', 'Running tests in parallel without limiting workers, missing error handling on transactions, multiple test suites accessing same database instance', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/52826464/how-can-i-prevent-postgres-deadlocks-when-running-jest-tests-on-circleci', 'admin:1764191935'),

('MySQL Deadlock when running Vitest tests with Knex: ER_LOCK_DEADLOCK errno 1213', 'testing', 'HIGH', '[{"solution": "Serialize database tests using vitest sequential mode instead of concurrent test execution", "percentage": 92}, {"solution": "Use database transactions with proper rollback in each test to isolate data changes", "percentage": 87}, {"solution": "Set MySQL max_connections higher and optimize Knex pool configuration with proper acquire and release timeouts", "percentage": 80}]'::jsonb, 'Vitest test runner with MySQL database and Knex query builder', 'Tests complete with zero deadlock errors, database operations succeed within timeout windows', 'Running all tests concurrently without considering database constraints, missing transaction cleanup, insufficient pool connections', 0.85, 'haiku', NOW(), 'https://stackoverflow.com/questions/78381020/mysql-deadlock-when-running-vitest-tests-and-knex', 'admin:1764191935'),

('Deadlock when running Celery tests under Pytest with xdist: Hung process and chord callback errors', 'testing', 'MEDIUM', '[{"solution": "Use @pytest.mark.xdist_group(name=\"celery\") to group celery tests and run --dist loadgroup to serialize on same worker", "percentage": 93}, {"solution": "Set CELERY_TASK_ALWAYS_EAGER=False and CELERY_TASK_EAGER_PROPAGATES=False in test settings to use actual celery worker", "percentage": 89}, {"solution": "Start celery worker in setUpClass and tearDown in tearDownClass with proper lifecycle management", "percentage": 85}]'::jsonb, 'Pytest with django, Celery workers, pytest-xdist parallel execution plugin', 'All celery tasks complete with successful() assertions passing, no hung processes or Chord callback errors', 'Mixing eager and non-eager task execution, running celery tests across multiple xdist workers without grouping, missing celery worker lifecycle management', 0.82, 'haiku', NOW(), 'https://stackoverflow.com/questions/74016562/deadlock-when-running-celery-tests-under-pytest-with-xdist', 'admin:1764191935'),

('Playwright TimeoutError Timeout 30000.0ms exceeded while waiting for event download', 'testing', 'MEDIUM', '[{"solution": "Increase timeout on specific locator action: page.locator(\"text=Download\").click(timeout=60000) for longer operations", "percentage": 94}, {"solution": "Set timeout=0 in expect_download() to wait indefinitely until download completes: with page.expect_download(timeout=0)", "percentage": 91}, {"solution": "Configure global Playwright timeout in config file or increase default 30 second timeout for slow server responses", "percentage": 78}]'::jsonb, 'Playwright browser automation with file download operations, slow server processing', 'File downloads complete successfully without timeout exceptions, download file is saved to expected location', 'Using default 30 second timeout for operations taking longer, not specifying custom timeout for specific actions, global timeout too low for entire test suite', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/72882461/python-playwright-timeout', 'admin:1764191935'),

('Possible session deadlock when testing FastAPI route: Program hangs forever on session yield in dependency injection', 'testing', 'MEDIUM', '[{"solution": "Remove \"with session:\" context manager from route endpoint - dependency injection already manages session lifecycle", "percentage": 96}, {"solution": "Create proper context manager in get_session dependency using __enter__ and __exit__ dunder methods instead of relying on \"with\" in endpoint", "percentage": 88}, {"solution": "Use db_manager class with proper context manager implementation to separate session management from route dependency injection", "percentage": 82}]'::jsonb, 'FastAPI with SQLAlchemy 2.0 sessions, pytest fixtures with database transactions, dependency injection pattern', 'Route endpoint executes without hanging, test completes with transaction rollback despite session.commit() in code', 'Using \"with session:\" context manager inside endpoint when session already provided by dependency injection, improper session scope management, mixing context manager behavior with yield dependencies', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/76918457/possible-session-deadlock-when-testing-a-fastapi-route-that-uses-sqlalchemy', 'admin:1764191935');
