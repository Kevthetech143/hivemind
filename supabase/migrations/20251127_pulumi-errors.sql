INSERT INTO knowledge_entries (query, category, hit_frequency, solutions, prerequisites, success_indicators, common_pitfalls, success_rate, claude_version, last_verified, source_url, contributor_email) VALUES
('container exited immediately docker platform mismatch arm64 amd64', 'iac', 'MEDIUM', '[{"solution": "Ensure Docker image supports multiarch (arm64 and amd64). Check image tags for multiarch variants or use platform-specific images.", "percentage": 85}, {"solution": "Use pulumi/tutorial-pulumi-fundamentals-database-local:latest for multiarch support on Linux.", "percentage": 90}]'::jsonb, 'Docker multiarch images, Pulumi installed', 'Container runs successfully without platform mismatch errors', 'Not checking if image is multiarch, assuming single-platform images work on all systems', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/77309022', 'admin:1764225858'),
('Pulumi SDK has not been installed npm install yarn install', 'iac', 'HIGH', '[{"solution": "Run npm install or yarn install before pulumi up in GitHub Actions", "percentage": 92}, {"solution": "For Pulumi v2 GitHub Actions, add actions/setup-node and npm install step BEFORE pulumi/actions@v2", "percentage": 95}]'::jsonb, 'Node.js, npm/yarn, Pulumi v2 or later', 'No SDK installation errors, pulumi up succeeds', 'Forgetting to add npm install step in CI/CD pipeline, assuming SDK is pre-installed', 0.93, 'haiku', NOW(), 'https://stackoverflow.com/questions/66562876', 'admin:1764225858'),
('nodejs14.x runtime no longer supported Lambda creating updating functions', 'iac', 'HIGH', '[{"solution": "Update Lambda runtime from nodejs14.x to nodejs16.x or nodejs20.x", "percentage": 93}, {"solution": "Update @pulumi/aws and @pulumi/awsx packages to latest versions supporting new runtimes", "percentage": 88}]'::jsonb, 'AWS Lambda, Pulumi TypeScript SDK', 'Lambda function created successfully with supported runtime', 'Using deprecated runtime versions, not updating SDK packages', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/78295143', 'admin:1764225858'),
('invalid or unknown key auth0 client id client secret config', 'iac', 'MEDIUM', '[{"solution": "Rename project/stack if it uses reserved name like ''aws''. Renaming resolves namespace conflicts: pulumi stack rename /user/new_name/stack", "percentage": 87}, {"solution": "Clear config and reconfigure: pulumi config rm key && pulumi config set --secret new_key value", "percentage": 82}]'::jsonb, 'Pulumi stack configured with secrets', 'Config keys recognized, no namespace errors', 'Using reserved project names like ''aws'', inconsistent hyphen/underscore naming', 0.85, 'haiku', NOW(), 'https://stackoverflow.com/questions/62069650', 'admin:1764225858'),
('invoke aws:ec2/getSecurityGroup failed multiple Security Groups matched', 'iac', 'MEDIUM', '[{"solution": "Use get_security_groups (plural) with vpc filter instead of get_security_group: aws.ec2.get_security_groups(filters=[aws.ec2.GetSecurityGroupsFilterArgs(name=''vpc-id'', values=[vpc.vpc_id])])", "percentage": 90}, {"solution": "Ensure VPC exists before querying security groups, use pulumi preview to verify", "percentage": 85}]'::jsonb, 'Pulumi Python SDK, AWS VPC resources', 'Security groups found with correct vpc filter', 'Assuming only one security group exists, not using filters', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/73227519', 'admin:1764225858'),
('stack is currently locked by 1 lock operation in progress', 'iac', 'HIGH', '[{"solution": "Use Ctrl+C once to gracefully stop, twice for forceful stop, or Ctrl+Z for SIGKILL", "percentage": 92}, {"solution": "Run pulumi cancel to clear lock file, then pulumi refresh to sync state", "percentage": 89}]'::jsonb, 'Pulumi stack with hanging operation', 'Stack lock released, pulumi commands execute', 'Not understanding lock mechanism, force-killing without refresh', 0.90, 'haiku', NOW(), 'https://stackoverflow.com/questions/71968562', 'admin:1764225858'),
('could not get cloud url failed to read Pulumi credentials file unexpected end of JSON', 'iac', 'MEDIUM', '[{"solution": "Delete corrupted credentials.json file and run pulumi login again", "percentage": 94}, {"solution": "Run ''which pulumi'' to find installation dir, locate credentials.json and delete it", "percentage": 91}]'::jsonb, 'Pulumi CLI installed, corrupted credentials file', 'Credentials restored, pulumi login succeeds', 'Interrupted pulumi up corrupts JSON, not clearing credentials cache', 0.92, 'haiku', NOW(), 'https://stackoverflow.com/questions/71407002', 'admin:1764225858'),
('409 Conflict Another update is currently in progress GitHub Actions', 'iac', 'HIGH', '[{"solution": "Create unique stack per GitHub run using pulumi stack init github-${{ github.run_id }}", "percentage": 93}, {"solution": "Use sequential GitHub Actions jobs instead of parallel workflows, or use Local filesystem backend", "percentage": 88}]'::jsonb, 'GitHub Actions, Pulumi with app.pulumi.com backend', 'Parallel workflows complete without conflicts', 'Running parallel workflows on same stack, not using unique stack names', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/66563656', 'admin:1764225858'),
('error calling sts:GetCallerIdentity InvalidClientTokenId destroy stack', 'iac', 'MEDIUM', '[{"solution": "Update AWS credentials in stack config: pulumi config set aws:accessKey xxx && pulumi config set aws:secretKey yyy", "percentage": 85}, {"solution": "Download state with pulumi stack export, replace accessKey/secretKey, reimport with pulumi stack import", "percentage": 82}]'::jsonb, 'AWS credentials, Pulumi stack with old credentials', 'Destroy succeeds with valid credentials', 'Old credentials still stored in config, not refreshing credentials', 0.83, 'haiku', NOW(), 'https://stackoverflow.com/questions/75777231', 'admin:1764225858'),
('failed to delete user role cannot be dropped because some objects depend on it GCP SQL', 'iac', 'MEDIUM', '[{"solution": "Drop role ownership and privileges before deletion: REASSIGN OWNED BY user TO postgres; DROP OWNED BY user; DROP USER user;", "percentage": 89}, {"solution": "Run pulumi refresh after manual cleanup to sync state", "percentage": 86}]'::jsonb, 'GCP Cloud SQL instance with PostgreSQL, Pulumi Go SDK', 'User role deleted successfully', 'Attempting to drop role with active privileges, not using REASSIGN OWNED', 0.87, 'haiku', NOW(), 'https://stackoverflow.com/questions/72874057', 'admin:1764225858'),
('database being accessed by other users cannot be deleted Azure Postgres', 'iac', 'MEDIUM', '[{"solution": "Terminate active connections before deletion, use manual SQL commands if needed", "percentage": 87}, {"solution": "Run pulumi refresh and pulumi destroy to retry deletion", "percentage": 84}]'::jsonb, 'Azure SQL Managed Instance, Database with active connections', 'Database drops successfully after terminating connections', 'Not terminating active connections before deletion', 0.85, 'haiku', NOW(), 'https://stackoverflow.com/questions/72874057', 'admin:1764225858'),
('InUseSubnetCannotBeDeleted subnet is in use by application gateway', 'iac', 'HIGH', '[{"solution": "Ensure resources are deleted in correct order - delete Application Gateway before Subnet", "percentage": 91}, {"solution": "Avoid creating resources inside Apply callbacks which breaks dependency ordering", "percentage": 89}]'::jsonb, 'Azure Pulumi stack with Application Gateway and Subnets', 'Subnet deletes successfully after dependent resources removed', 'Creating resources in Apply callbacks, wrong deletion order', 0.90, 'haiku', NOW(), 'https://stackoverflow.com/questions/69998636', 'admin:1764225858'),
('refusing to delete protected resource remove imported resource from stack', 'iac', 'MEDIUM', '[{"solution": "Use pulumi state delete <urn> to remove from state without deleting in provider", "percentage": 90}, {"solution": "Unprotect resource first with flag --force: pulumi state delete <urn> --force", "percentage": 87}]'::jsonb, 'Pulumi stack with imported protected resources', 'Resource removed from state without affecting AWS', 'Not knowing pulumi state delete command, trying to delete via code', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/66162196', 'admin:1764225858'),
('resources manually deleted in Kubernetes continue with update pulumi refresh', 'iac', 'MEDIUM', '[{"solution": "Run pulumi refresh to sync Pulumi state with GCP Kubernetes resources", "percentage": 93}, {"solution": "Use pulumi state delete <urn> to remove deleted resources from state", "percentage": 90}]'::jsonb, 'GCP Kubernetes, Pulumi stack tracking resources', 'Pulumi state synced with actual Kubernetes state', 'Not running refresh after manual deletions', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/52616888', 'admin:1764225858'),
('operation timed out Azure SQL Managed Instance 2 hour default timeout', 'iac', 'MEDIUM', '[{"solution": "Override timeout with CustomTimeouts: CustomTimeouts { Create = TimeSpan.FromHours(4) }", "percentage": 92}, {"solution": "Increase timeout to 4+ hours for Managed Instance provisioning (takes longer than portal)", "percentage": 88}]'::jsonb, 'Azure Pulumi C#, SQL Managed Instance resources', 'Managed Instance completes without timeout', 'Using default 2-hour timeout for long-running operations', 0.90, 'haiku', NOW(), 'https://stackoverflow.com/questions/70126305', 'admin:1764225858'),
('cannot read property get during update or preview Output wrapper', 'iac', 'HIGH', '[{"solution": "Use .apply() instead of .get() for Output transformations: myOutput.apply(val => transform(val))", "percentage": 95}, {"solution": "Wrap string manipulation in apply callback when using Outputs", "percentage": 93}]'::jsonb, 'Pulumi Azure, Output<string> resources', 'String transformation works with apply during update', 'Calling .get() on Output during preview when not resolved', 0.94, 'haiku', NOW(), 'https://stackoverflow.com/questions/54241503', 'admin:1764225858'),
('cloning templates repo reference not found pulumi new', 'iac', 'LOW', '[{"solution": "Delete template cache: rm -rf ~/.pulumi/templates and retry pulumi new", "percentage": 89}, {"solution": "Reinstall Pulumi to refresh template repository", "percentage": 84}]'::jsonb, 'Pulumi CLI, internet connection', 'Pulumi new creates project successfully', 'Corrupted template cache from previous failed runs', 0.86, 'haiku', NOW(), 'https://stackoverflow.com/questions/75573638', 'admin:1764225858'),
('Rule does not exist on EventBus default EventBridge Target mismatch', 'iac', 'MEDIUM', '[{"solution": "Specify EventBusName in EventTarget args: new EventTargetArgs() { EventBusName = eventBus.Name }", "percentage": 91}, {"solution": "Default EventBus is used instead of custom - explicitly pass EventBusName to EventTarget", "percentage": 89}]'::jsonb, 'AWS Pulumi C#, EventBridge resources', 'EventTarget created on correct EventBus', 'Not specifying EventBusName, defaulting to ''default'' bus', 0.90, 'haiku', NOW(), 'https://stackoverflow.com/questions/76683058', 'admin:1764225858'),
('ResourceNotReady exceeded wait attempts ECS CODE_DEPLOY deployment controller', 'iac', 'MEDIUM', '[{"solution": "Ensure ECS Cluster exists in same stack before Fargate service with CODE_DEPLOY", "percentage": 87}, {"solution": "Verify stack dependencies if cluster is in separate stack", "percentage": 85}]'::jsonb, 'AWS Pulumi, ECS Fargate with Blue/Green deployment', 'Fargate service stabilizes with CODE_DEPLOY controller', 'Cluster in different stack, timeout waiting for cross-stack resource', 0.86, 'haiku', NOW(), 'https://stackoverflow.com/questions/70098496', 'admin:1764225858');
