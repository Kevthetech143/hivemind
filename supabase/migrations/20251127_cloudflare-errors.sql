INSERT INTO knowledge_entries (query, category, hit_frequency, solutions, prerequisites, success_indicators, common_pitfalls, success_rate, claude_version, last_verified, source_url, contributor_email) VALUES
('Cloudflare Error 502 Bad Gateway when server takes longer to respond', 'cdn', 'HIGH', '[{"solution": "Disable Railgun in Cloudflare control panel - immediately resolves 502 errors", "percentage": 95}, {"solution": "Change HTTPS to HTTP in database wp_option settings", "percentage": 85}, {"solution": "Set SSL to Full in Cloudflare settings instead of Flexible", "percentage": 80}]'::jsonb, 'Cloudflare enabled, origin server responding', 'No 502 errors, requests complete normally', 'Not reviewing server logs for actual errors', 0.90, 'haiku', NOW(), 'https://stackoverflow.com/questions/33741777', 'admin:1764225171'),
('Cloudflare 502 error during web scraping with Selenium', 'cdn', 'MEDIUM', '[{"solution": "Increase implicit wait time to allow origin server to respond before timeout", "percentage": 90}, {"solution": "Review Cloudflare timeout settings and increase if possible", "percentage": 80}, {"solution": "Check if origin server is overloaded and optimize backend", "percentage": 75}]'::jsonb, 'Selenium WebDriver, Cloudflare enabled', 'Web scraping completes without 502 errors', 'Not waiting long enough for server response', 0.85, 'haiku', NOW(), 'https://stackoverflow.com/questions/76448512', 'admin:1764225171'),
('Cloudflare Error 524 connection timeout on origin server', 'cdn', 'HIGH', '[{"solution": "Check if origin server script execution time exceeds 100 seconds - add padding in PHP to prevent timeout", "percentage": 95}, {"solution": "Verify firewall rules not blocking Cloudflare IPs - whitelist Cloudflare IP ranges", "percentage": 90}, {"solution": "Increase origin read timeout on Enterprise plan", "percentage": 70}]'::jsonb, 'Cloudflare DNS configured, origin server', 'Server responds within Cloudflare timeout window', 'Not checking server logs for slow scripts', 0.92, 'haiku', NOW(), 'https://stackoverflow.com/questions/43489801', 'admin:1764225171'),
('Cloudflare Error 504 Gateway Timeout with custom error pages', 'cdn', 'MEDIUM', '[{"solution": "Upgrade to Pro plan to customize error pages for 5xx errors", "percentage": 85}, {"solution": "Use NGINX error_page directive to map 502/504 to non-5xx status codes before Cloudflare intercepts", "percentage": 90}, {"solution": "Increase PHP max_execution_time to handle long-running operations", "percentage": 80}]'::jsonb, 'NGINX reverse proxy, Cloudflare enabled', 'Custom error pages shown on timeouts', 'Not accounting for Cloudflare intercepting 5xx responses', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/31051138', 'admin:1764225171'),
('Cloudflare 521 error when origin server is down or unreachable', 'cdn', 'HIGH', '[{"solution": "Verify origin server is actually running and responding to requests", "percentage": 100}, {"solution": "Disable Development Mode in Cloudflare if previously hidden the error", "percentage": 85}, {"solution": "Check database connection string is correctly configured", "percentage": 88}]'::jsonb, 'Cloudflare enabled, origin server, browser access', 'Server responds normally, no 521 errors', 'Assuming server is down without checking status', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/43079783', 'admin:1764225171'),
('Cloudflare Error 521 with AWS API Gateway and HTTPS', 'cdn', 'HIGH', '[{"solution": "Set Cloudflare SSL setting to Full or Full (strict) - AWS API Gateway requires HTTPS", "percentage": 98}, {"solution": "Generate valid SSL certificate for custom domain in API Gateway", "percentage": 90}, {"solution": "Use Full (strict) for extra security instead of Off or Flexible", "percentage": 95}]'::jsonb, 'AWS API Gateway with Lambda, Cloudflare', 'API Gateway responds with 200 OK, no 521 errors', 'Setting SSL to Off or Flexible when Full is required', 0.96, 'haiku', NOW(), 'https://stackoverflow.com/questions/73009087', 'admin:1764225171'),
('Hugo website build error on Cloudflare Pages - partial not found', 'cdn', 'MEDIUM', '[{"solution": "Check theme directory structure matches between local development and deployed environment", "percentage": 85}, {"solution": "Verify Hugo version compatibility between local and Cloudflare Pages build environment", "percentage": 80}, {"solution": "Commit theme as subdirectory instead of git submodule to avoid path resolution issues", "percentage": 90}]'::jsonb, 'Hugo site, Cloudflare Pages, git repo', 'Site builds successfully on Cloudflare Pages', 'Directory paths working locally but not in build environment', 0.82, 'haiku', NOW(), 'https://stackoverflow.com/questions/74425511', 'admin:1764225171'),
('Cloudflare Error 524 connection timeout - slow origin response', 'cdn', 'HIGH', '[{"solution": "Monitor origin server response time - typical timeout is 100 seconds max", "percentage": 95}, {"solution": "Optimize database queries and backend code to respond faster", "percentage": 85}, {"solution": "Check firewall rules not rate limiting or blocking Cloudflare connections", "percentage": 88}]'::jsonb, 'Cloudflare enabled, origin server, monitoring tools', 'Origin server responds within timeout window', 'Not measuring actual server response times', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/73661686', 'admin:1764225171'),
('Cloudflare Error 520 when accessing S3 files through application', 'cdn', 'HIGH', '[{"solution": "Review server logs and contact Cloudflare support to check their 1% sampled logs (Enterprise logs 100%)", "percentage": 85}, {"solution": "Check for empty response or protocol violations from origin when downloading S3 files", "percentage": 80}, {"solution": "Increase timeout for large S3 file downloads", "percentage": 75}]'::jsonb, 'AWS S3, PHP application, Cloudflare, server logs', 'S3 files download successfully through app', 'Not checking both application and origin server logs', 0.80, 'haiku', NOW(), 'https://stackoverflow.com/questions/56972361', 'admin:1764225171'),
('Cloudflare Error 520 on specific files like index.php and verification files', 'cdn', 'MEDIUM', '[{"solution": "Check for empty response or connection reset - review server logs for PHP errors", "percentage": 90}, {"solution": "Verify htaccess rewrite rules not causing infinite loops or empty responses", "percentage": 85}, {"solution": "Increase max header size limit on origin server", "percentage": 80}]'::jsonb, 'Web server, PHP, htaccess configured, Cloudflare', 'All files respond with valid content', 'Not checking htaccess rewrite rules for issues', 0.83, 'haiku', NOW(), 'https://stackoverflow.com/questions/35630826', 'admin:1764225171'),
('Cloudflare Error 521 when SSL set to Full mode but should be Flexible', 'cdn', 'MEDIUM', '[{"solution": "Set SSL mode to Flexible if origin server has no SSL certificate installed", "percentage": 95}, {"solution": "Install SSL certificate on origin server, then set Cloudflare to Full or Full Strict", "percentage": 90}, {"solution": "If self-signed cert on origin, use Full mode not Full Strict", "percentage": 85}]'::jsonb, 'Cloudflare SSL settings, origin server', 'Website loads without 521 error', 'Mismatch between actual SSL cert and Cloudflare SSL setting', 0.92, 'haiku', NOW(), 'https://stackoverflow.com/questions/72956551', 'admin:1764225171'),
('Cloudflare Worker to refresh page on Error 520', 'cdn', 'LOW', '[{"solution": "Implement Cloudflare Worker with retry logic on 520 error response", "percentage": 85}, {"solution": "Return cached response on 520 error to avoid blank page", "percentage": 80}, {"solution": "Log 520 errors in Worker to alert on origin server issues", "percentage": 75}]'::jsonb, 'Cloudflare Workers, JavaScript, caching', 'Worker catches 520 and handles gracefully', 'Not implementing proper error handling in Worker', 0.78, 'haiku', NOW(), 'https://stackoverflow.com/questions/75108630', 'admin:1764225171'),
('Cloudflare Error 521 on WordPress edit screen after set up', 'cdn', 'MEDIUM', '[{"solution": "Issue usually resolves itself - may be temporary Cloudflare edge node issue", "percentage": 85}, {"solution": "Disable Developer Mode temporarily then re-enable to clear cache", "percentage": 80}, {"solution": "Clear Cloudflare cache and WordPress cache simultaneously", "percentage": 75}]'::jsonb, 'WordPress on AWS Lightsail, Cloudflare DNS', 'WordPress edit screen loads without 521 error', 'Assuming server issue when it''s Cloudflare cache related', 0.82, 'haiku', NOW(), 'https://stackoverflow.com/questions/67614115', 'admin:1764225171'),
('Cloudflare Error 522 with AWS Application Load Balancer', 'cdn', 'MEDIUM', '[{"solution": "Ensure ALB is internet-facing and not internal-only in security group", "percentage": 95}, {"solution": "Whitelist all Cloudflare IP ranges in security group inbound rules", "percentage": 98}, {"solution": "Check target group health checks passing for all instances", "percentage": 90}]'::jsonb, 'AWS ALB, Cloudflare, security groups', 'ALB healthy, Cloudflare connects successfully', 'Not verifying ALB is internet-facing', 0.94, 'haiku', NOW(), 'https://stackoverflow.com/questions/65425145', 'admin:1764225171'),
('Cloudflare Error 522 with Google Cloud Platform origin server', 'cdn', 'MEDIUM', '[{"solution": "Whitelist Cloudflare IP ranges in GCP firewall rules - check https://www.cloudflare.com/ips", "percentage": 98}, {"solution": "Verify GCP firewall not rate limiting connections from Cloudflare", "percentage": 92}, {"solution": "Check GCP Compute Engine instance security group allows inbound from Cloudflare", "percentage": 95}]'::jsonb, 'Google Cloud Platform, Cloudflare DNS, firewall', 'GCP accepts Cloudflare connections, no 522 error', 'Not checking firewall rules for Cloudflare IPs', 0.96, 'haiku', NOW(), 'https://stackoverflow.com/questions/63475349', 'admin:1764225171'),
('Cloudflare Error 1020 Access Denied when load testing API with JMeter', 'cdn', 'HIGH', '[{"solution": "Configure JMeter to send identical headers as Postman request - use HTTP Test Script Recorder", "percentage": 90}, {"solution": "Request Cloudflare to whitelist JMeter source IP or allow load testing", "percentage": 85}, {"solution": "Disable Cloudflare DDoS protection rules or add exception for load testing IP", "percentage": 88}]'::jsonb, 'JMeter, API behind Cloudflare, Postman working', 'JMeter requests return 200 OK, no 1020 error', 'Cloudflare DDoS protection blocking load test traffic', 0.87, 'haiku', NOW(), 'https://stackoverflow.com/questions/67401390', 'admin:1764225171'),
('Cloudflare Error 1020 Access Denied with JMeter when Postman works', 'cdn', 'HIGH', '[{"solution": "Enable cookies in JMeter via jmeter.properties configuration", "percentage": 92}, {"solution": "Copy exact request headers from Postman including User-Agent and Accept headers", "percentage": 88}, {"solution": "Use JMeter''s HTTP(S) Test Script Recorder to record Postman request automatically", "percentage": 90}]'::jsonb, 'JMeter, Postman, API, cookies enabled', 'JMeter returns same response as Postman', 'Not matching request headers between tools', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/63833613', 'admin:1764225171'),
('Cloudflare Error 1000 DNS points to prohibited IP in reverse proxy setup', 'cdn', 'MEDIUM', '[{"solution": "Configure Node.js proxy to point directly to origin server, not back through Cloudflare", "percentage": 95}, {"solution": "Update hosts file on proxy server to route to origin directly without Cloudflare loop", "percentage": 90}, {"solution": "Remove Cloudflare DNS record pointing to proxy - point only to origin", "percentage": 98}]'::jsonb, 'Cloudflare, reverse proxy, Node.js, multiple proxies', 'Reverse proxy connects to origin without loop', 'Creating cyclic proxy loop through Cloudflare', 0.93, 'haiku', NOW(), 'https://stackoverflow.com/questions/38257884', 'admin:1764225171'),
('Cloudflare Error 1000 when using Terraform to manage API tokens', 'cdn', 'MEDIUM', '[{"solution": "Check Terraform API token has correct permissions set in Cloudflare dashboard", "percentage": 90}, {"solution": "Verify import ID in Terraform has no typos - must match exact resource ID from Cloudflare", "percentage": 95}, {"solution": "Regenerate API token if permissions insufficient", "percentage": 85}]'::jsonb, 'Terraform, Cloudflare API, token permissions', 'Terraform applies successfully, resources imported', 'Typo in import resource ID or insufficient permissions', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/77918768', 'admin:1764225171'),
('Cloudflare Error 1020 Access Denied in C# .NET Core REST client', 'cdn', 'HIGH', '[{"solution": "Add User-Agent header with Chrome user agent (e.g. Chrome/79) to bypass Cloudflare bot detection", "percentage": 95}, {"solution": "Include all required HTTP headers from browser request - Content-Type, Accept, etc", "percentage": 90}, {"solution": "Use HttpClient instead of RestClient for better compatibility", "percentage": 85}]'::jsonb, 'C# .NET Core, RestClient, REST API', 'API request returns 200 OK response', 'Missing User-Agent header causing Cloudflare to block', 0.93, 'haiku', NOW(), 'https://stackoverflow.com/questions/64550252', 'admin:1764225171'),
('Cloudflare error blocking Python requests with cookies disabled', 'cdn', 'HIGH', '[{"solution": "Enable cookie jar in requests library to maintain session across requests", "percentage": 95}, {"solution": "Add User-Agent header and accept all headers that Cloudflare expects", "percentage": 90}, {"solution": "Use cloudscraper library which handles Cloudflare challenge automatically", "percentage": 88}]'::jsonb, 'Python requests library, Cloudflare protected site', 'Requests library successfully fetches content', 'Not enabling cookies or using appropriate library', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/60802468', 'admin:1764225171'),
('Cloudflare Error 1020 Access Denied in Node.js fetch GraphQL API scraping', 'cdn', 'HIGH', '[{"solution": "Add User-Agent header matching real browser (Chrome/OpenSea headers)", "percentage": 95}, {"solution": "Include all headers from browser DevTools including Sec-CH-UA, Sec-Fetch headers", "percentage": 92}, {"solution": "Use headless browser or cloudscraper alternative instead of fetch for protected sites", "percentage": 85}]'::jsonb, 'Node.js, fetch API, GraphQL, Cloudflare protection', 'API request returns data without 1020 error', 'Not sending browser-like headers with fetch requests', 0.90, 'haiku', NOW(), 'https://stackoverflow.com/questions/68789369', 'admin:1764225171'),
('Cloudflare authentication error code 10000 when logging to dashboard', 'cdn', 'MEDIUM', '[{"solution": "Verify user account has required permissions assigned in Cloudflare dashboard", "percentage": 92}, {"solution": "Check API token has correct scope permissions if using API access", "percentage": 90}, {"solution": "Clear browser cookies and cache, try logging in again with correct credentials", "percentage": 88}]'::jsonb, 'Cloudflare dashboard account, API tokens', 'Successfully login to Cloudflare dashboard', 'User permissions not assigned correctly', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/65730051', 'admin:1764225171'),
('Cloudflare Error 520 catch-all response from origin server', 'cdn', 'HIGH', '[{"solution": "Check origin server logs for actual error - 520 is catch-all for protocol violations", "percentage": 95}, {"solution": "Verify origin is sending valid HTTP response headers not empty", "percentage": 92}, {"solution": "Review Cloudflare header size limits (usually 8KB) - ensure origin response within limit", "percentage": 88}]'::jsonb, 'Origin server, HTTP protocol, Cloudflare', 'Origin sends valid HTTP response', 'Empty response or protocol violation from origin', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/35630826', 'admin:1764225171'),
('Cloudflare Error 522 rate limiting connections from Cloudflare IPs', 'cdn', 'HIGH', '[{"solution": "Whitelist all Cloudflare IPs listed at https://www.cloudflare.com/ips - do not rate limit", "percentage": 98}, {"solution": "Check firewall and hosting provider not blocking Cloudflare connections", "percentage": 95}, {"solution": "Contact hosting provider to remove IP-based rate limits for Cloudflare", "percentage": 90}]'::jsonb, 'Origin server, firewall, Cloudflare IPs', 'Cloudflare connects successfully, requests proxied', 'Rate limiting or blocking Cloudflare IP ranges', 0.96, 'haiku', NOW(), 'https://stackoverflow.com/questions/63475349', 'admin:1764225171'),
('Cloudflare Error 521 SSL mode Flexible does not allow HTTPS origin', 'cdn', 'HIGH', '[{"solution": "Change SSL mode from Flexible to Full - for HTTPS origin servers", "percentage": 98}, {"solution": "Install valid SSL certificate on origin if using Full Strict mode", "percentage": 95}, {"solution": "If only self-signed cert, use Full not Full Strict mode", "percentage": 92}]'::jsonb, 'Cloudflare SSL settings, HTTPS origin server', 'HTTPS origin server connects successfully', 'Setting SSL to Flexible when origin requires HTTPS', 0.97, 'haiku', NOW(), 'https://stackoverflow.com/questions/72956551', 'admin:1764225171'),
('Cloudflare 504 error more than 60 seconds execution time PHP', 'cdn', 'MEDIUM', '[{"solution": "Increase PHP max_execution_time in php.ini to handle long scripts", "percentage": 92}, {"solution": "Add padding/chunks to PHP output to prevent timeout during long operations", "percentage": 88}, {"solution": "Consider async processing with queue system for tasks over 60 seconds", "percentage": 85}]'::jsonb, 'PHP application, long-running scripts, Cloudflare', 'Script completes within Cloudflare timeout', 'Script exceeds Cloudflare 60-100 second timeout', 0.90, 'haiku', NOW(), 'https://stackoverflow.com/questions/31051138', 'admin:1764225171'),
('Cloudflare Worker handling 520 error with cache fallback', 'cdn', 'LOW', '[{"solution": "Implement try-catch in Worker fetch with error handling on 520", "percentage": 88}, {"solution": "Return stale cached response instead of error page on 520", "percentage": 85}, {"solution": "Log 520 events to monitoring service for alerting", "percentage": 80}]'::jsonb, 'Cloudflare Workers, Cache API, edge computing', 'Worker gracefully handles 520 errors', 'Not implementing cache fallback in Worker', 0.82, 'haiku', NOW(), 'https://stackoverflow.com/questions/75108630', 'admin:1764225171'),
('Cloudflare 1020 bot detection blocking automated tools and scripts', 'cdn', 'HIGH', '[{"solution": "Configure Cloudflare Security tab to whitelist specific IP addresses", "percentage": 92}, {"solution": "Add custom headers matching browser requests - User-Agent, Accept, Referer", "percentage": 90}, {"solution": "Use Cloudflare Workers to create custom rules allowing specific users", "percentage": 88}]'::jsonb, 'Cloudflare security settings, bot detection', 'Automated tools pass Cloudflare challenge', 'Bot detection rules blocking legitimate traffic', 0.87, 'haiku', NOW(), 'https://stackoverflow.com/questions/67401390', 'admin:1764225171'),
('Cloudflare Error 502 502 Bad Gateway vs 520 Web Server Error difference', 'cdn', 'MEDIUM', '[{"solution": "502 = Cloudflare cannot establish valid connection to origin server", "percentage": 100}, {"solution": "520 = Origin server sent invalid/empty HTTP response", "percentage": 100}, {"solution": "Review server logs to identify whether issue is connection or response", "percentage": 95}]'::jsonb, 'Cloudflare enabled, origin server, HTTP protocol', 'Understand difference between 502 and 520 errors', 'Confusing 502 and 520 error meanings', 0.98, 'haiku', NOW(), 'https://stackoverflow.com/questions/76448512', 'admin:1764225171'),
('Disable Cloudflare custom error pages and show origin error instead', 'cdn', 'MEDIUM', '[{"solution": "Upgrade to Pro plan to customize error pages in Custom Pages tab", "percentage": 95}, {"solution": "Map 5xx status codes to 2xx using NGINX error_page directive before Cloudflare sees them", "percentage": 90}, {"solution": "Use Development Mode temporarily to bypass Cloudflare errors during debugging", "percentage": 85}]'::jsonb, 'Cloudflare enabled, NGINX reverse proxy, Pro plan', 'Origin error pages displayed instead of Cloudflare pages', 'Not having Pro plan for custom error pages', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/43079783', 'admin:1764225171');
