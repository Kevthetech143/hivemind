-- Twilio Errors Mining
-- 40 common Twilio errors extracted from Stack Overflow

BEGIN;

INSERT INTO knowledge_entries (query, category, hit_frequency, solutions, prerequisites, success_indicators, common_pitfalls, success_rate, claude_version, last_verified, source_url, contributor_email) VALUES

('Twilio error 21212 alphanumeric sender ID invalid', 'api', 'HIGH', '[{"solution": "Ensure alphanumeric From parameter is registered with Twilio as an approved sender ID", "percentage": 90}, {"solution": "Use a verified Twilio phone number instead of alphanumeric ID if not set up properly", "percentage": 85}]'::jsonb, 'Registered sender ID', 'Message sent without 21212 error', 'Using unregistered alphanumeric sender ID', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/37062689', 'admin:1764224884'),

('Twilio error 21211 invalid phone number format', 'api', 'CRITICAL', '[{"solution": "Ensure phone numbers are in E.164 format: +[country code][number]", "percentage": 95}, {"solution": "Remove any spaces, parentheses, or dashes from phone numbers", "percentage": 93}]'::jsonb, 'Valid phone number', 'Message sent without 21211 error', 'Using local phone format instead of E.164', 0.94, 'haiku', NOW(), 'https://stackoverflow.com/questions/63964226', 'admin:1764224884'),

('Twilio error 11200 HTTP retrieval failure webhook', 'webhook', 'CRITICAL', '[{"solution": "Ensure webhook returns valid TwiML response, not just processing logic", "percentage": 92}, {"solution": "Return proper Content-Type header as application/xml", "percentage": 90}, {"solution": "Make sure webhook responds within 15 second timeout", "percentage": 88}]'::jsonb, 'Webhook endpoint configured', 'Webhook callback successful with TwiML response', 'Not returning TwiML from webhook, only processing', 0.90, 'haiku', NOW(), 'https://stackoverflow.com/questions/38469738', 'admin:1764224884'),

('Twilio error 20003 authentication failed unauthorized', 'api', 'CRITICAL', '[{"solution": "Verify Account SID and Auth Token are correct", "percentage": 94}, {"solution": "Check if account funds have been depleted", "percentage": 85}, {"solution": "Ensure credentials are not exposed or revoked", "percentage": 92}]'::jsonb, 'Valid Twilio credentials', '401 Authenticate error resolved', 'Using wrong SID/token combination', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/10538810', 'admin:1764224884'),

('Twilio error 30008 unknown error SMS delivery', 'sms', 'HIGH', '[{"solution": "Check if message contains URLs which may trigger 30008", "percentage": 80}, {"solution": "Verify destination carrier supports message format", "percentage": 75}, {"solution": "Contact Twilio support with message SID for detailed investigation", "percentage": 70}]'::jsonb, 'Twilio message logs accessible', 'Message delivered without 30008 error', 'Sending messages with special characters or URLs without testing', 0.72, 'haiku', NOW(), 'https://stackoverflow.com/questions/76162223', 'admin:1764224884'),

('Twilio error 30007 carrier violation message flagged as spam', 'sms', 'HIGH', '[{"solution": "Review message content for spam indicators per carrier guidelines", "percentage": 85}, {"solution": "Reduce sending frequency to avoid carrier rate limiting", "percentage": 80}, {"solution": "Use short codes instead of long codes for high volume SMS", "percentage": 90}]'::jsonb, 'Carrier filtering documentation', 'Message sent without 30007 carrier violation', 'Sending identical messages rapidly or suspicious content', 0.82, 'haiku', NOW(), 'https://stackoverflow.com/questions/53670710', 'admin:1764224884'),

('Twilio error 30003 unreachable destination handset', 'sms', 'MEDIUM', '[{"solution": "Verify destination phone number is valid and in service", "percentage": 75}, {"solution": "Check if phone is roaming off-network", "percentage": 70}, {"solution": "Consider carrier filtering - try different message content", "percentage": 65}]'::jsonb, 'Valid destination phone number', 'Message delivered without 30003 error', 'Sending to disconnected or invalid numbers repeatedly', 0.70, 'haiku', NOW(), 'https://stackoverflow.com/questions/62088524', 'admin:1764224884'),

('Twilio error 13224 dial invalid phone number E.164', 'voice', 'CRITICAL', '[{"solution": "Format phone number in E.164 format: +[country code][number]", "percentage": 96}, {"solution": "Verify destination country code exists and is valid", "percentage": 94}, {"solution": "Check destination area code is not a reserved test code", "percentage": 90}]'::jsonb, 'Valid phone number in E.164', 'Call completed without 13224 error', 'Using local format instead of E.164 or invalid country code', 0.93, 'haiku', NOW(), 'https://stackoverflow.com/questions/45967709', 'admin:1764224884'),

('Twilio error 20001 missing required parameter', 'api', 'CRITICAL', '[{"solution": "Check all required fields are present in API request (To, From, Body)", "percentage": 97}, {"solution": "Ensure request Content-Type is application/x-www-form-urlencoded", "percentage": 92}, {"solution": "Verify parameter names match API specification exactly", "percentage": 95}]'::jsonb, 'Twilio API docs reference', 'API request accepted without parameter errors', 'Missing To or From parameter, or wrong Content-Type', 0.94, 'haiku', NOW(), 'https://stackoverflow.com/questions/46421965', 'admin:1764224884'),

('Twilio error 403 webhook validation failure firewall block', 'webhook', 'HIGH', '[{"solution": "Whitelist Twilio IP addresses in firewall rules", "percentage": 92}, {"solution": "Check AWS WAF or security group rules for blocking", "percentage": 90}, {"solution": "Validate request signature with Twilio middleware", "percentage": 88}]'::jsonb, 'Firewall access logs', 'Webhook callback received and processed', 'Firewall blocking Twilio IPs or missing validation', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/65946401', 'admin:1764224884'),

('Twilio error 401 unauthorized chat token authentication', 'chat', 'HIGH', '[{"solution": "Use API Key and Secret instead of Auth Token for Access Token generation", "percentage": 94}, {"solution": "Verify AccountSid, API_KEY_SID and API_KEY_SECRET match console values", "percentage": 92}, {"solution": "Ensure IP Messaging service SID is correct in grants", "percentage": 88}]'::jsonb, 'Twilio console credentials', 'Chat channel accessed with valid token', 'Using Auth Token instead of API Key for token generation', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/44805999', 'admin:1764224884'),

('Twilio error 400 bad request REST API content type', 'api', 'CRITICAL', '[{"solution": "Use application/x-www-form-urlencoded Content-Type for form data", "percentage": 94}, {"solution": "Use lowercase parameter names: to, from, body", "percentage": 92}, {"solution": "Ensure request body is properly encoded form data, not JSON", "percentage": 90}]'::jsonb, 'Twilio API specification', 'REST API request accepted with 200 response', 'Using JSON Content-Type or wrong parameter casing', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/77098393', 'admin:1764224884'),

('Twilio timeout 15 second webhook execution limit exceeded', 'webhook', 'HIGH', '[{"solution": "Respond with empty TwiML and 202 status code, process async", "percentage": 95}, {"solution": "Move long-running operations to background job queue", "percentage": 93}, {"solution": "Optimize database queries to complete within 15 seconds", "percentage": 88}]'::jsonb, 'Twilio webhook configuration', 'Webhook responds within 15 second timeout', 'Synchronous processing of long API calls in webhook', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/72626751', 'admin:1764224884'),

('Twilio Functions timeout 10 second execution limit', 'functions', 'MEDIUM', '[{"solution": "Break complex operations into separate sequential function calls", "percentage": 90}, {"solution": "Use Studio Flow Split widget to retry on timeout", "percentage": 88}, {"solution": "Move data processing to backend service called from function", "percentage": 85}]'::jsonb, 'Twilio Functions documentation', 'Function completes within 10 second limit', 'Complex loops or multiple API calls in single function', 0.87, 'haiku', NOW(), 'https://stackoverflow.com/questions/70753810', 'admin:1764224884'),

('Twilio PythonAnywhere connection refused no internet access', 'hosting', 'MEDIUM', '[{"solution": "Use proxy configuration with http_proxy and https_proxy environment variables", "percentage": 92}, {"solution": "Create TwilioHttpClient with proxy settings for restricted hosts", "percentage": 90}, {"solution": "Upgrade to paid PythonAnywhere account with unrestricted internet", "percentage": 85}]'::jsonb, 'PythonAnywhere account configuration', 'Twilio messages created successfully from PythonAnywhere', 'Free account without proxy configuration', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/62981939', 'admin:1764224884'),

('Twilio 502 bad gateway intermittent webhook failure', 'webhook', 'MEDIUM', '[{"solution": "Check Content-Type header is application/xml in response", "percentage": 85}, {"solution": "Verify server returns 200 HTTP response code consistently", "percentage": 83}, {"solution": "Test webhook latency and ensure response time is acceptable", "percentage": 80}]'::jsonb, 'Webhook server logs', 'Webhook returns 200 with valid TwiML consistently', 'Intermittent server issues or connection problems', 0.80, 'haiku', NOW(), 'https://stackoverflow.com/questions/33156482', 'admin:1764224884'),

('Twilio API key vs auth token authentication difference', 'auth', 'MEDIUM', '[{"solution": "Use API Key/Secret for improved security and rotation capability", "percentage": 85}, {"solution": "Construct client with account SID, API Key SID, and API Key Secret", "percentage": 88}, {"solution": "Auth Token works but API Keys allow per-service credential management", "percentage": 80}]'::jsonb, 'Twilio console API keys section', 'Client initializes successfully with chosen auth method', 'Mixing API Key with Auth Token or wrong parameter order', 0.83, 'haiku', NOW(), 'https://stackoverflow.com/questions/59031379', 'admin:1764224884'),

('Twilio SMS API authentication with API key credentials', 'api', 'MEDIUM', '[{"solution": "Use account SID as first parameter, then API key, then API secret", "percentage": 90}, {"solution": "Verify API Key starts with SK and secret is properly set", "percentage": 88}, {"solution": "Test with curl using basic auth with API key:secret", "percentage": 85}]'::jsonb, 'API key credentials from Twilio console', 'SMS message sent successfully with API key auth', 'Wrong parameter order or missing accountSid option', 0.86, 'haiku', NOW(), 'https://stackoverflow.com/questions/74155688', 'admin:1764224884'),

('Twilio message status callback not received delivery tracking', 'webhook', 'MEDIUM', '[{"solution": "Include statusCallback parameter when creating message", "percentage": 92}, {"solution": "Ensure webhook endpoint is publicly accessible and returns 200 OK", "percentage": 90}, {"solution": "Check Twilio logs to verify callback request was attempted", "percentage": 85}]'::jsonb, 'Webhook endpoint URL', 'Status callbacks received with delivery updates', 'Missing statusCallback parameter or webhook not accessible', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/70862384', 'admin:1764224884'),

('Twilio carrier network undelivered message sent status', 'sms', 'MEDIUM', '[{"solution": "Check carrier network logs for specific failure reason", "percentage": 75}, {"solution": "Verify destination phone is turned on and can receive SMS", "percentage": 80}, {"solution": "Contact Twilio support with message SID for investigation", "percentage": 70}]'::jsonb, 'Twilio message logs', 'Message delivered with successful carrier network delivery', 'Sending to phones with poor signal or blocked by carrier', 0.73, 'haiku', NOW(), 'https://stackoverflow.com/questions/40303589', 'admin:1764224884'),

('Twilio error 12200 TwiML schema validation warning invalid', 'twiml', 'HIGH', '[{"solution": "Validate TwiML XML structure against Twilio schema", "percentage": 94}, {"solution": "Ensure only valid TwiML verbs are used (Sms, Say, Gather, etc)", "percentage": 92}, {"solution": "Remove any host-injected HTML or PHP tags from response", "percentage": 88}]'::jsonb, 'Twilio TwiML documentation', 'TwiML validates without schema warnings', 'Invalid XML tags or host injecting content into response', 0.90, 'haiku', NOW(), 'https://stackoverflow.com/questions/39156172', 'admin:1764224884'),

('Twilio error 12200 Message tag not allowed in voice response', 'twiml', 'HIGH', '[{"solution": "Use Sms verb instead of Message for SMS in voice context", "percentage": 95}, {"solution": "Message verb is SMS-only, use Sms for voice applications", "percentage": 94}, {"solution": "Check if response is for voice call or SMS context", "percentage": 92}]'::jsonb, 'TwiML verb documentation', 'TwiML response valid for context (voice/SMS)', 'Using Message verb in voice application', 0.93, 'haiku', NOW(), 'https://stackoverflow.com/questions/33535524', 'admin:1764224884'),

('Twilio error 12100 TwiML parsing failed malformed XML', 'twiml', 'CRITICAL', '[{"solution": "Remove invalid XML tags from TwiML response", "percentage": 96}, {"solution": "Use only valid Twilio TwiML verb tags", "percentage": 95}, {"solution": "Validate XML is well-formed with proper opening/closing tags", "percentage": 94}]'::jsonb, 'TwiML validator tool', 'TwiML parses without 12100 error', 'Invalid nested tags or malformed XML structure', 0.94, 'haiku', NOW(), 'https://stackoverflow.com/questions/58877930', 'admin:1764224884'),

('Twilio WhatsApp MessageFlow parameter missing required field', 'api', 'MEDIUM', '[{"solution": "Include MessageFlow parameter in WhatsApp message POST request", "percentage": 93}, {"solution": "Verify all required parameters are present in request body", "percentage": 91}, {"solution": "Check Twilio WhatsApp API documentation for parameter requirements", "percentage": 89}]'::jsonb, 'Twilio WhatsApp API docs', 'WhatsApp message sent successfully', 'Missing required MessageFlow or other parameters', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/77984622', 'admin:1764224884'),

('Twilio from number not registered alphanumeric sender ID', 'api', 'HIGH', '[{"solution": "Register alphanumeric sender ID in Twilio console first", "percentage": 92}, {"solution": "Use registered Twilio phone number as From parameter", "percentage": 90}, {"solution": "Check sender ID is in approved status in console", "percentage": 88}]'::jsonb, 'Twilio Copilot settings', 'Message sent from registered sender', 'Using unregistered alphanumeric sender ID directly', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/47307673', 'admin:1764224884'),

('Twilio Python import error syntax outdated SDK usage', 'sdk', 'MEDIUM', '[{"solution": "Update Twilio Python SDK to latest version", "percentage": 94}, {"solution": "Use from twilio.rest import Client modern import", "percentage": 93}, {"solution": "Check for deprecated library imports like way2sms in code", "percentage": 88}]'::jsonb, 'Twilio Python SDK latest version', 'Code imports and executes without syntax errors', 'Using outdated Twilio library or wrong import statement', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/44923222', 'admin:1764224884'),

('Twilio message handling try catch ApiException error code', 'sdk', 'MEDIUM', '[{"solution": "Catch ApiException and check e.Code property for error details", "percentage": 92}, {"solution": "Use try/catch blocks around message creation calls", "percentage": 90}, {"solution": "Log error code and message for debugging purposes", "percentage": 88}]'::jsonb, 'C# try/catch blocks', 'Errors caught and logged with error codes', 'Not wrapping API calls in error handling', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/48721577', 'admin:1764224884'),

('Twilio messaging service fallback number routing configuration', 'feature', 'MEDIUM', '[{"solution": "Create Messaging Service in Twilio console", "percentage": 94}, {"solution": "Add alphanumeric sender and fallback number to service", "percentage": 92}, {"solution": "Use messagingServiceSid parameter instead of from parameter", "percentage": 91}]'::jsonb, 'Messaging Services in console', 'Messages route through configured service correctly', 'Not configuring fallback numbers in messaging service', 0.92, 'haiku', NOW(), 'https://stackoverflow.com/questions/48721577', 'admin:1764224884'),

('Twilio credentials exposed in git history security', 'security', 'CRITICAL', '[{"solution": "Rotate Account SID and Auth Token immediately in console", "percentage": 96}, {"solution": "Add .env and credentials to .gitignore before committing", "percentage": 95}, {"solution": "Use environment variables for all sensitive credentials", "percentage": 94}]'::jsonb, 'Credentials not in version control', 'No credentials exposed in git history', 'Committing .env or credentials.json to repository', 0.95, 'haiku', NOW(), 'https://stackoverflow.com/questions/10538810', 'admin:1764224884'),

('Twilio incoming message from parameter parsing webhook', 'webhook', 'MEDIUM', '[{"solution": "Parse From parameter from webhook POST request body", "percentage": 94}, {"solution": "Extract phone number from request.values[''From''] in Python", "percentage": 92}, {"solution": "Store incoming number for response routing logic", "percentage": 90}]'::jsonb, 'Webhook request body documentation', 'Incoming messages routed correctly based on From', 'Not extracting From parameter from webhook data', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/62981939', 'admin:1764224884'),

('Twilio trial account unverified phone number sending limitation', 'account', 'MEDIUM', '[{"solution": "Verify your own phone number in Twilio console", "percentage": 95}, {"solution": "Upgrade to paid account to send to any number", "percentage": 92}, {"solution": "Test with verified numbers only on trial account", "percentage": 90}]'::jsonb, 'Verified phone numbers list', 'Able to send to unverified numbers or upgraded account', 'Sending to unverified numbers on trial account', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/46421965', 'admin:1764224884'),

('Twilio error 60540 rate limit exceeded too many requests', 'api', 'HIGH', '[{"solution": "Implement exponential backoff retry logic", "percentage": 90}, {"solution": "Reduce request rate and add delays between API calls", "percentage": 88}, {"solution": "Use message queuing to throttle bulk operations", "percentage": 85}]'::jsonb, 'Rate limiting documentation', 'Requests succeed without 60540 errors', 'Sending rapid consecutive API requests without delays', 0.87, 'haiku', NOW(), 'https://stackoverflow.com/questions/76162223', 'admin:1764224884'),

('Twilio response empty 202 async webhook processing', 'webhook', 'MEDIUM', '[{"solution": "Return empty TwiML with 202 status for async operations", "percentage": 94}, {"solution": "Process long operations in background job after response", "percentage": 92}, {"solution": "Send follow-up SMS via REST API after async processing completes", "percentage": 90}]'::jsonb, 'Twilio async webhook pattern', 'Webhook responds quickly with 202 and processes async', 'Blocking webhook with synchronous processing', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/72626751', 'admin:1764224884'),

('Twilio TwilioException generic error handling Python', 'sdk', 'MEDIUM', '[{"solution": "Import TwilioException from twilio.base.exceptions", "percentage": 93}, {"solution": "Catch TwilioException and access .code and .msg attributes", "percentage": 91}, {"solution": "Log exception details for specific error handling", "percentage": 89}]'::jsonb, 'Python TwilioException class', 'Specific exceptions caught with error codes', 'Catching generic Exception instead of TwilioException', 0.90, 'haiku', NOW(), 'https://stackoverflow.com/questions/59483053', 'admin:1764224884'),

('Twilio studio flow webhook URL variable parameter passing', 'studio', 'MEDIUM', '[{"solution": "Add parameters to webhook URL as query strings or POST body", "percentage": 94}, {"solution": "Set variables in Studio flow before calling webhook", "percentage": 92}, {"solution": "Parse parameters in webhook and use for routing", "percentage": 90}]'::jsonb, 'Studio flow documentation', 'Webhook receives and processes parameters correctly', 'Not properly formatting webhook URL with parameters', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/77098393', 'admin:1764224884'),

('Twilio test credentials mocked responses for development', 'testing', 'LOW', '[{"solution": "Use test credentials for sandbox testing", "percentage": 90}, {"solution": "Understand that test SMS won''t actually deliver", "percentage": 88}, {"solution": "Verify production credentials in live environment", "percentage": 85}]'::jsonb, 'Test credentials from console', 'Test mode responses behave as documented', 'Using test credentials without understanding limitations', 0.86, 'haiku', NOW(), 'https://stackoverflow.com/questions/17881220', 'admin:1764224884'),

('Twilio gather timeout input not received voice app', 'voice', 'MEDIUM', '[{"solution": "Increase numDigits and timeout parameters in Gather verb", "percentage": 92}, {"solution": "Add finishOnKey to allow early user input completion", "percentage": 90}, {"solution": "Test with multiple phone types for input detection", "percentage": 85}]'::jsonb, 'Gather verb TwiML documentation', 'User input collected within gather timeout', 'Insufficient timeout or numDigits for user input', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/76674956', 'admin:1764224884');

COMMIT;
