INSERT INTO knowledge_entries (query, category, hit_frequency, solutions, prerequisites, success_indicators, common_pitfalls, success_rate, claude_version, last_verified, source_url, contributor_email) VALUES
('NoSuchKey', 'aws-s3', 'HIGH', '[{"solution": "Verify the object key exists in the bucket before attempting to access it", "percentage": 95}, {"solution": "Check that the bucket name and key path are correctly spelled", "percentage": 90}, {"solution": "Use ListObjects to verify object exists before GetObject", "percentage": 88}]'::jsonb, 'S3 bucket exists with ListBuckets permission', 'Object retrieved successfully or 404 handled gracefully', 'Using wrong bucket name or incorrect object key', 0.92, 'haiku', NOW(), 'https://stackoverflow.com/questions/33113987/cannot-catch-aws-s3-exception', 'admin:1764216890'),
('NoSuchBucket', 'aws-s3', 'HIGH', '[{"solution": "Create the bucket first before attempting operations", "percentage": 96}, {"solution": "Verify bucket name is spelled correctly and exists", "percentage": 94}, {"solution": "Use https://s3.amazonaws.com/bucketname not full URL format", "percentage": 88}]'::jsonb, 'AWS credentials with S3 access', 'Bucket exists and operations complete successfully', 'Using full S3 URL instead of bucket name, bucket not created', 0.94, 'haiku', NOW(), 'https://stackoverflow.com/questions/26491981/aws-s3-api-error-specified-bucket-does-not-exist', 'admin:1764216890'),
('AccessDenied', 'aws-s3', 'HIGH', '[{"solution": "Check IAM policy allows s3:GetObject and s3:PutObject actions", "percentage": 93}, {"solution": "Verify bucket policy doesn''t restrict access", "percentage": 91}, {"solution": "Check if user has proper s3:* permissions in IAM role", "percentage": 89}]'::jsonb, 'IAM user/role configured', 'S3 operations succeed without permission errors', 'Insufficient IAM policy, bucket policy restrictions', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/22077445/aws-s3-bucket-permissions-access-denied', 'admin:1764216890'),
('InvalidAccessKeyId', 'aws-s3', 'HIGH', '[{"solution": "Generate new access keys from AWS console if old ones are invalid", "percentage": 95}, {"solution": "Verify credentials are correct in ~/.aws/credentials file", "percentage": 93}, {"solution": "Unset conflicting AWS_* environment variables before using CLI", "percentage": 90}]'::jsonb, 'AWS account with IAM access', 'Authentication succeeds and operations complete', 'Expired credentials, wrong access key, conflicting env vars', 0.93, 'haiku', NOW(), 'https://stackoverflow.com/questions/39051477/the-aws-access-key-id-does-not-exist-in-our-records', 'admin:1764216890'),
('SignatureDoesNotMatch', 'aws-s3', 'HIGH', '[{"solution": "Check that secret access key matches the access key ID", "percentage": 94}, {"solution": "Verify system clock is synchronized with NTP", "percentage": 91}, {"solution": "Unset conflicting AWS_SECRET_ACCESS_KEY environment variables", "percentage": 89}]'::jsonb, 'Correct AWS credentials configured', 'Request signature validation passes', 'Wrong secret key, system time skew, conflicting env vars', 0.92, 'haiku', NOW(), 'https://stackoverflow.com/questions/37903462/aws-cli-listing-s3-buckets-gives-signaturedoesnotmatch-error-using-iam-user-cred', 'admin:1764216890'),
('InvalidBucketName', 'aws-s3', 'MEDIUM', '[{"solution": "Bucket names must be 3-63 chars with lowercase letters, numbers, periods, dashes only", "percentage": 97}, {"solution": "Cannot use uppercase letters, underscores, or consecutive periods", "percentage": 96}, {"solution": "Cannot start/end with dash or be formatted as IP address", "percentage": 95}]'::jsonb, 'S3 CreateBucket permission', 'Bucket created with valid name', 'Using uppercase, underscores, or invalid characters', 0.96, 'haiku', NOW(), 'https://stackoverflow.com/questions/49548451/invalid-bucket-name-when-creating-s3-bucket-with-aws-sdk', 'admin:1764216890'),
('BucketAlreadyExists', 'aws-s3', 'MEDIUM', '[{"solution": "Choose a globally unique bucket name with a prefix like your-company-name", "percentage": 96}, {"solution": "Check AWS console to verify bucket is not already created", "percentage": 94}, {"solution": "Bucket names are global across all AWS accounts", "percentage": 92}]'::jsonb, 'S3 CreateBucket permission', 'Bucket created with unique name', 'Bucket name already taken globally', 0.94, 'haiku', NOW(), 'https://stackoverflow.com/questions/39044362/why-is-aws-telling-me-bucketalreadyexists-when-it-doesnt', 'admin:1764216890'),
('RequestTimeTooSkewed', 'aws-s3', 'MEDIUM', '[{"solution": "Synchronize system clock using NTP or manual sync", "percentage": 97}, {"solution": "On Docker/VM, restart the container/VM to resync time", "percentage": 94}, {"solution": "Compare local time with AWS time: curl http://s3.amazonaws.com -v", "percentage": 91}]'::jsonb, 'System has internet connectivity and can sync time', 'S3 operations succeed without time-based errors', 'System clock out of sync, time drift in VM/Docker', 0.95, 'haiku', NOW(), 'https://stackoverflow.com/questions/25964491/aws-s3-upload-fails-requesttimetooskewed', 'admin:1764216890'),
('ExpiredToken', 'aws-s3', 'MEDIUM', '[{"solution": "For temporary credentials, refresh tokens using STS AssumeRole before expiry", "percentage": 93}, {"solution": "Unset AWS_SESSION_TOKEN if using incorrect temporary credentials", "percentage": 90}, {"solution": "Check token is valid for minimum 15 minutes (900 seconds)", "percentage": 88}]'::jsonb, 'Temporary credentials from STS', 'Request succeeds with valid token', 'Token expired after 1 hour, session token not refreshed', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/35685729/the-security-token-included-in-the-request-is-expired', 'admin:1764216890'),
('ThrottlingException', 'aws-s3', 'MEDIUM', '[{"solution": "Implement exponential backoff retry logic with Config(retries={''max_attempts'': 5})", "percentage": 92}, {"solution": "Reduce request rate when exceeding S3 limits (>3500 PUT/COPY, >5500 GET)", "percentage": 90}, {"solution": "Use batching and async patterns to distribute load", "percentage": 87}]'::jsonb, 'boto3 with botocore.config', 'Requests succeed with throttling handled gracefully', 'Making >1 request per second, exceeding partition limits', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/30104286/getting-throttling-exception-on-aws-cli-calls-as-throttlingexception-error', 'admin:1764216890'),
('MalformedXML', 'aws-s3', 'LOW', '[{"solution": "Validate XML request body is well-formed and matches S3 API schema", "percentage": 94}, {"solution": "For multipart uploads, ensure upload is formatted as valid XML", "percentage": 91}, {"solution": "Check for missing or extra tags in lifecycle configurations", "percentage": 89}]'::jsonb, 'XML request body to S3 API', 'XML parsed successfully, operation completes', 'Invalid XML structure, missing required fields, broken tags', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/31838990/amazon-s3-bucket-malformedxml-error-when-uploading', 'admin:1764216890'),
('InvalidLocationConstraint', 'aws-s3', 'LOW', '[{"solution": "For us-east-1 region, omit CreateBucketConfiguration entirely", "percentage": 96}, {"solution": "Use valid region codes like eu-west-1, ap-south-1 in LocationConstraint", "percentage": 94}, {"solution": "Verify region syntax matches AWS region naming convention", "percentage": 92}]'::jsonb, 'Valid AWS region', 'Bucket created in correct region', 'Wrong region code, us-east-1 with LocationConstraint', 0.94, 'haiku', NOW(), 'https://stackoverflow.com/questions/51912072/invalidlocationconstraint-error-while-creating-s3-bucket-when-the-used-command-i', 'admin:1764216890'),
('ServiceUnavailable', 'aws-s3', 'LOW', '[{"solution": "Implement retry logic with exponential backoff", "percentage": 88}, {"solution": "Check AWS Service Health Dashboard for S3 status", "percentage": 85}, {"solution": "Reduce request rate and try again after delay", "percentage": 83}]'::jsonb, 'Network connectivity to S3', 'Request succeeds after retry', 'Making requests during S3 outage or high load', 0.84, 'haiku', NOW(), 'https://stackoverflow.com/questions/45429947/c-sharp-and-aws-s3-receiving-serviceunavailable-error-despite-only-making-a-si', 'admin:1764216890'),
('InternalError', 'aws-s3', 'LOW', '[{"solution": "Retry the request - this is a transient server error", "percentage": 89}, {"solution": "Implement exponential backoff for multipart upload failures", "percentage": 86}, {"solution": "Check if all parts uploaded successfully before CompleteMultipartUpload", "percentage": 84}]'::jsonb, 'S3 API access with multipart upload', 'Operation succeeds after retry', 'Transient AWS server error, partial upload not retried', 0.87, 'haiku', NOW(), 'https://stackoverflow.com/questions/55464844/internalerror-on-multipart-upload', 'admin:1764216890'),
('NoSuchUpload', 'aws-s3', 'LOW', '[{"solution": "Verify upload ID is correct from CreateMultipartUpload response", "percentage": 92}, {"solution": "Ensure all parts are uploaded before CompleteMultipartUpload", "percentage": 90}, {"solution": "Do not reuse upload ID across different bucket/key combinations", "percentage": 88}]'::jsonb, 'Multipart upload initiated', 'CompleteMultipartUpload succeeds', 'Using wrong upload ID, upload aborted, upload expired (24h)', 0.90, 'haiku', NOW(), 'https://stackoverflow.com/questions/71841518/unable-to-complete-multipart-upload-to-s3-using-aws-sdk', 'admin:1764216890'),
('MethodNotAllowed', 'aws-s3', 'LOW', '[{"solution": "Verify HTTP method matches the S3 API operation (GET, PUT, POST, DELETE)", "percentage": 95}, {"solution": "Check that bucket exists for the method being called", "percentage": 93}, {"solution": "Ensure object path is correct for the HTTP method", "percentage": 91}]'::jsonb, 'Valid S3 bucket and object', 'Operation succeeds with correct HTTP method', 'Using GET on operation that requires PUT, wrong method', 0.93, 'haiku', NOW(), 'https://stackoverflow.com/questions/72745087/how-to-handle-error-codes-in-aws-s3-using-typescript', 'admin:1764216890'),
('PermanentRedirect', 'aws-s3', 'LOW', '[{"solution": "Update endpoint to match bucket region (bucket created in different region)", "percentage": 94}, {"solution": "Use virtual-hosted-style URLs instead of path-style for cross-region access", "percentage": 91}, {"solution": "Specify correct region when creating S3 client", "percentage": 89}]'::jsonb, 'S3 bucket in specific region', 'Redirected to correct regional endpoint', 'Using wrong region endpoint, cross-region access issues', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/29324461/aws-s3-cp-to-bucket-returns-error-code-1-on-large-files', 'admin:1764216890'),
('BucketNotEmpty', 'aws-s3', 'LOW', '[{"solution": "Delete all objects in bucket before deleting bucket", "percentage": 96}, {"solution": "Use AWS CLI: aws s3 rm s3://bucket-name --recursive", "percentage": 94}, {"solution": "Use S3 batch delete operation or lifecycle policy", "percentage": 91}]'::jsonb, 'S3 DeleteBucket permission', 'Bucket deleted successfully after emptying', 'Attempting to delete bucket with objects', 0.95, 'haiku', NOW(), 'https://stackoverflow.com/questions/29911573/does-aws-s3-automatically-abort-multipart-uploads-after-a-timeout', 'admin:1764216890'),
('EntityTooSmall', 'aws-s3', 'LOW', '[{"solution": "For multipart uploads, each part must be at least 5MB (except last part)", "percentage": 96}, {"solution": "For single object, ensure content-length is > 0 bytes", "percentage": 94}, {"solution": "Use minimum 5242880 bytes (5MB) for all parts except final", "percentage": 92}]'::jsonb, 'Multipart upload in progress', 'All parts meet minimum size requirements', 'Part size < 5MB for non-final parts, empty object', 0.94, 'haiku', NOW(), 'https://stackoverflow.com/questions/63672702/aws-cli-command-aws-s3-sync-producing-error-completemultipartupload-multipart', 'admin:1764216890'),
('AllAccessDisabled', 'aws-s3', 'LOW', '[{"solution": "Check that account is not suspended for billing or abuse", "percentage": 92}, {"solution": "Verify AWS account status in Account Settings", "percentage": 90}, {"solution": "Contact AWS Support if account suspended", "percentage": 88}]'::jsonb, 'Active AWS account', 'All S3 operations work normally', 'Account suspended, billing issues, abuse policy violation', 0.85, 'haiku', NOW(), 'https://stackoverflow.com/questions/22246553/amazon-aws-403-invalidaccesskey-error-when-i-run-the-amazon-s3-sample', 'admin:1764216890'),
('OperationAborted', 'aws-s3', 'LOW', '[{"solution": "Retry the operation as it was aborted mid-execution", "percentage": 89}, {"solution": "Check for concurrent operations on same object or bucket", "percentage": 86}, {"solution": "Verify request completed fully before issuing another", "percentage": 84}]'::jsonb, 'S3 bucket with PUT/DELETE permissions', 'Operation completes successfully on retry', 'Concurrent requests on same object, network interrupted', 0.87, 'haiku', NOW(), 'https://stackoverflow.com/questions/40660214/amazon-s3-re-starting-a-failed-upload', 'admin:1764216890'),
('SlowDown', 'aws-s3', 'MEDIUM', '[{"solution": "Reduce PUT request rate below 3500 per second per partition", "percentage": 92}, {"solution": "Reduce GET request rate below 5500 per second per partition", "percentage": 91}, {"solution": "Implement exponential backoff: wait 1s, 2s, 4s, 8s", "percentage": 89}]'::jsonb, 'S3 bucket with high request volume', 'Requests complete successfully without throttling', 'Exceeding 503 Slow Down limits, no backoff', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/46787072/s3-slowdown-please-reduce-your-request-rate-exception', 'admin:1764216890'),
('InvalidRange', 'aws-s3', 'LOW', '[{"solution": "Verify byte range in Range header is valid for object size", "percentage": 94}, {"solution": "Ensure start range <= end range <= object size - 1", "percentage": 93}, {"solution": "For files, use 0 to (size-1) inclusive byte ranges", "percentage": 91}]'::jsonb, 'S3 GetObject with Range header', 'Partial object retrieved with correct byte range', 'Range exceeds object size, invalid start/end', 0.92, 'haiku', NOW(), 'https://stackoverflow.com/questions/67497260/where-to-find-an-enumeration-of-error-codes-in-awssdk-s3-for-net', 'admin:1764216890'),
('CrossLocationLoggingProhibited', 'aws-s3', 'LOW', '[{"solution": "Log bucket must be in same region as source bucket", "percentage": 96}, {"solution": "Create logging bucket in the same region as main bucket", "percentage": 94}, {"solution": "Enable logging only after target bucket is in same region", "percentage": 92}]'::jsonb, 'S3 bucket logging enabled', 'Logging configured without cross-region issues', 'Logging target in different region', 0.94, 'haiku', NOW(), 'https://stackoverflow.com/questions/24182458/how-to-change-http-response-code-on-an-object-in-amazon-s3', 'admin:1764216890'),
('UserDisabled', 'aws-s3', 'LOW', '[{"solution": "Check IAM user status in AWS console - may be disabled", "percentage": 94}, {"solution": "Re-enable user in IAM if disabled", "percentage": 92}, {"solution": "Use different IAM user or root credentials", "percentage": 88}]'::jsonb, 'IAM user access enabled', 'S3 operations succeed for user', 'IAM user disabled by administrator', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/73572743/error-awss3errorsinvalidaccesskeyid-the-aws-access-key-id-you-provided-do', 'admin:1764216890'),
('InvalidToken', 'aws-s3', 'LOW', '[{"solution": "Refresh AWS SSO token using: aws sso login --profile", "percentage": 93}, {"solution": "Verify token in AWS_SESSION_TOKEN environment variable", "percentage": 91}, {"solution": "Remove conflicting session tokens from environment", "percentage": 89}]'::jsonb, 'AWS SSO or session token', 'Authentication succeeds with valid token', 'SSO token expired, invalid session token, conflicting env vars', 0.90, 'haiku', NOW(), 'https://stackoverflow.com/questions/54837248/an-error-occurred-invalidtoken-when-calling-the-listbuckets-operation-the-pr', 'admin:1764216890'),
('NotImplemented', 'aws-s3', 'LOW', '[{"solution": "Check S3 API documentation for operation in your region", "percentage": 93}, {"solution": "Verify operation is supported in target AWS region", "percentage": 91}, {"solution": "Some S3 features may not be available in all regions", "percentage": 89}]'::jsonb, 'S3 in supported region', 'Operation executes successfully in supported region', 'Feature not supported in region, wrong operation', 0.90, 'haiku', NOW(), 'https://stackoverflow.com/questions/68187385/where-to-see-all-possible-error-codes-of-awsserviceexception', 'admin:1764216890'),
('AccountProblem', 'aws-s3', 'LOW', '[{"solution": "Check AWS billing account status and payment method", "percentage": 92}, {"solution": "Verify account restrictions in AWS Management Console", "percentage": 90}, {"solution": "Contact AWS Support to resolve account issues", "percentage": 85}]'::jsonb, 'AWS account with valid payment method', 'S3 operations work without account errors', 'Overdue billing, account under review, payment failed', 0.86, 'haiku', NOW(), 'https://stackoverflow.com/questions/50801770/aws-credentials-refreshed-but-still-expired', 'admin:1764216890'),
('BadRequest', 'aws-s3', 'MEDIUM', '[{"solution": "Validate HTTP request format and S3 API parameters", "percentage": 94}, {"solution": "Check for missing required headers like Content-Length", "percentage": 92}, {"solution": "Ensure all parameters match S3 API specification", "percentage": 90}]'::jsonb, 'Valid S3 API parameters', 'Request succeeds with correct format', 'Malformed request, missing headers, invalid parameters', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/41132683/aws-s3-400-bad-request', 'admin:1764216890'),
('Conflict', 'aws-s3', 'LOW', '[{"solution": "Ensure bucket state matches operation (e.g., bucket exists for PUT)", "percentage": 93}, {"solution": "Check for concurrent operations modifying bucket state", "percentage": 91}, {"solution": "Verify object versioning state for concurrent uploads", "percentage": 89}]'::jsonb, 'Stable bucket state', 'Operation completes without conflicts', 'Concurrent bucket modifications, version conflicts', 0.90, 'haiku', NOW(), 'https://stackoverflow.com/questions/62561598/how-can-i-avoid-aws-s3-throttling-issues', 'admin:1764216890'),
('HeadBucketForbidden', 'aws-s3', 'LOW', '[{"solution": "Check s3:ListBucket permission in bucket policy", "percentage": 94}, {"solution": "Verify IAM policy allows s3:HeadBucket action", "percentage": 92}, {"solution": "Ensure user has bucket visibility permission", "percentage": 90}]'::jsonb, 'S3 bucket with appropriate permissions', 'HeadBucket operation succeeds', 'Missing s3:ListBucket permission, bucket policy denies access', 0.92, 'haiku', NOW(), 'https://stackoverflow.com/questions/67183857/aws-s3-requesttimetooskewed-from-browser', 'admin:1764216890'),
('IncompleteBody', 'aws-s3', 'LOW', '[{"solution": "Ensure Content-Length header matches actual body size", "percentage": 95}, {"solution": "Send complete request body before closing connection", "percentage": 93}, {"solution": "Verify all data is transmitted before request completion", "percentage": 91}]'::jsonb, 'Complete HTTP request body', 'PUT/POST operation succeeds', 'Connection closed early, Content-Length mismatch', 0.93, 'haiku', NOW(), 'https://stackoverflow.com/questions/60893179/aws-s3-requesttimetooskewed-error-when-uploading-multiple-files', 'admin:1764216890'),
('InvalidPartOrder', 'aws-s3', 'LOW', '[{"solution": "List parts in ascending order by part number in CompleteMultipartUpload", "percentage": 96}, {"solution": "Ensure part numbers are sequential (1, 2, 3...)", "percentage": 94}, {"solution": "Do not reorder or skip part numbers", "percentage": 92}]'::jsonb, 'Multipart upload with multiple parts', 'Upload completes successfully', 'Parts submitted out of order or non-sequential', 0.94, 'haiku', NOW(), 'https://stackoverflow.com/questions/29328000/aws-php-sdk-s3-requesttimetooskewed-error', 'admin:1764216890'),
('InvalidPartSize', 'aws-s3', 'LOW', '[{"solution": "Ensure all parts except last are >= 5MB (5242880 bytes)", "percentage": 96}, {"solution": "Last part can be < 5MB", "percentage": 94}, {"solution": "Total multipart upload can be up to 5TB with 10000 parts", "percentage": 92}]'::jsonb, 'Multipart upload initiated', 'All parts accepted in CompleteMultipartUpload', 'Parts smaller than 5MB (except last)', 0.95, 'haiku', NOW(), 'https://stackoverflow.com/questions/15384142/s3-requesttimetooskewed-error-due-to-local-machines-clock-skew', 'admin:1764216890'),
('TooManyBuckets', 'aws-s3', 'LOW', '[{"solution": "AWS account has limit of 100 buckets by default", "percentage": 95}, {"solution": "Delete unused buckets before creating new ones", "percentage": 93}, {"solution": "Request bucket limit increase from AWS Support", "percentage": 90}]'::jsonb, 'AWS account with S3 access', 'Bucket created below account limit', 'Exceeded 100 bucket limit per account', 0.92, 'haiku', NOW(), 'https://stackoverflow.com/questions/7749156/requesttimetooskewed-error-using-php-s3-class', 'admin:1764216890'),
('NoSuchVersion', 'aws-s3', 'LOW', '[{"solution": "Verify version ID is correct from object version history", "percentage": 94}, {"solution": "Check that object versioning is enabled on bucket", "percentage": 92}, {"solution": "Use ListObjectVersions to find valid version IDs", "percentage": 90}]'::jsonb, 'Object versioning enabled on bucket', 'Correct version retrieved successfully', 'Version ID invalid or does not exist, versioning disabled', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/32869246/amazon-s3-upload-error-an-exception-occurred-while-uploading-parts-to-a-multipa', 'admin:1764216890'),
('MetadataFailure', 'aws-s3', 'LOW', '[{"solution": "Check object metadata is valid and properly formatted", "percentage": 92}, {"solution": "Verify custom metadata does not exceed 2KB", "percentage": 90}, {"solution": "Ensure metadata keys and values are UTF-8 encoded", "percentage": 88}]'::jsonb, 'Valid object metadata', 'Object stored with metadata successfully', 'Invalid metadata format, exceeds size limit', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/39457458/howto-abort-all-incomplete-multipart-uploads-for-a-bucket', 'admin:1764216890');
