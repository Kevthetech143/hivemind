-- Add top voted Django questions from Stack Overflow - Batch 1
-- Source: https://stackoverflow.com/questions/tagged/django?tab=votes
-- Extracted: 2025-11-25

INSERT INTO knowledge_entries (
    query, category, hit_frequency, solutions, prerequisites, success_indicators,
    common_pitfalls, success_rate, claude_version, last_verified, source_url
) VALUES
(
    'What is the difference between null=True and blank=True in Django models?',
    'stackoverflow-django',
    'VERY_HIGH',
    '[
        {"solution": "null=True controls database behavior (sets NULL vs NOT NULL on column). blank=True controls form validation (whether field is required in forms and admin).", "percentage": 95, "note": "These serve different purposes - null is database-level, blank is form-level"},
        {"solution": "For DateTimeField or ForeignKey: use both null=True and blank=True if you want optional fields that can be truly empty", "percentage": 92, "note": "Non-string fields need null=True to store NULL in database"},
        {"solution": "For CharField/TextField: use only blank=True alone. Never use null=True with string fields as it creates two representations of empty (NULL and empty string)", "percentage": 90, "note": "Django convention prefers empty strings for text fields"},
        {"solution": "If you get IntegrityError with blank=True but no null=True on date/datetime fields, add null=True to the field definition", "percentage": 88, "command": "models.DateTimeField(blank=True, null=True)"}
    ]'::jsonb,
    'Django project with models.py file, Understanding of database vs form validation',
    'Model saves without IntegrityError, Admin form shows field as optional, Data persists correctly in database',
    'String fields (CharField, TextField) should never use null=True alone - this creates two representations of empty data. Non-string fields (DateTime, Date, ForeignKey) often need both parameters for complete flexibility.',
    0.92,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/8609192/what-is-the-difference-between-null-true-and-blank-true-in-django'
),
(
    'How do I do a not equal in Django queryset filtering?',
    'stackoverflow-django',
    'HIGH',
    '[
        {"solution": "Use Q objects with negation operator: from django.db.models import Q; Model.objects.filter(~Q(field=value))", "percentage": 95, "note": "Official Django recommended approach for NOT EQUAL"},
        {"solution": "Use exclude() method for simpler cases: Model.objects.exclude(field=value)", "percentage": 90, "note": "More readable when dealing with single condition"},
        {"solution": "Combine Q objects for complex queries: Model.objects.filter(~Q(id=3) & Q(status=''active''))", "percentage": 88, "note": "Q objects support & (AND), | (OR), and ~ (NOT) operators"},
        {"solution": "Django does not have __ne lookup - use Q object negation instead", "percentage": 85, "note": "Unlike some databases, Django QuerySet API uses filter + exclude pattern"}
    ]'::jsonb,
    'Django project with ORM, Basic understanding of QuerySets and Q objects',
    'Query returns all records except the excluded one, Correct filtering without database errors',
    'Django does not support __ne lookup operator. Always use Q objects with ~ (NOT) or the exclude() method. Cannot mix __ne with other lookups.',
    0.93,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/687295/how-do-i-do-a-not-equal-in-django-queryset-filtering'
),
(
    'How to combine multiple QuerySets in Django?',
    'stackoverflow-django',
    'HIGH',
    '[
        {"solution": "For different models: use itertools.chain(queryset1, queryset2, queryset3) then convert to list: list(chain(...))", "percentage": 92, "note": "itertools.chain is implemented in C and very efficient"},
        {"solution": "For same model: use QuerySet.union() in Django 1.11+: Model.objects.filter(condition1).union(Model.objects.filter(condition2))", "percentage": 90, "note": "union() preserves QuerySet methods like filter(), count()"},
        {"solution": "Sort combined results: sorted(chain(qs1, qs2), key=attrgetter(''date_created''), reverse=True)", "percentage": 88, "note": "Use operator.attrgetter for sorting"},
        {"solution": "Understand that combining different models loses QuerySet methods - convert to list and manipulate Python-side", "percentage": 85, "note": "Database operations only work on single-model QuerySets"}
    ]'::jsonb,
    'Django project with multiple models/querysets, Python itertools knowledge helpful',
    'Combined results contain all expected objects, Filtering/sorting works on combined list, No duplicate entries',
    'Using | operator on different-model querysets only works on unsliced querysets and does not preserve ordering reliably. For different models, must convert to list using chain(). Same-model querysets should use union() to preserve ORM functionality.',
    0.91,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/431628/how-to-combine-multiple-querysets-in-django'
),
(
    'How to revert the last Django migration?',
    'stackoverflow-django',
    'VERY_HIGH',
    '[
        {"solution": "Run migrate command with target migration: ./manage.py migrate app_name 0010_previous_migration or ./manage.py migrate app_name 0010", "percentage": 95, "note": "Always revert migration before deleting migration file"},
        {"solution": "View available migrations: ./manage.py showmigrations app_name", "percentage": 92, "note": "Shows which migrations are applied and available"},
        {"solution": "Revert all migrations for an app: ./manage.py migrate app_name zero", "percentage": 88, "note": "Use ''zero'' target to remove all migrations for that app"},
        {"solution": "After reverting, safely delete the migration file from migrations folder", "percentage": 90, "command": "rm migrations/0011_unwanted_migration.py after successful revert"}
    ]'::jsonb,
    'Django project with migrations, Database write access, Backup of database recommended',
    'Migration successfully reverted, showmigrations shows previous state, Database schema matches expected state',
    'CRITICAL: Always revert the migration using manage.py migrate BEFORE deleting the migration file. Deleting file first prevents Django from properly removing database changes. This can leave database in inconsistent state.',
    0.94,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/32123477/how-to-revert-the-last-migration'
),
(
    'What is a slug in Django?',
    'stackoverflow-django',
    'HIGH',
    '[
        {"solution": "A slug is a URL-friendly string representation of data, typically generated from a title or name by converting to lowercase and replacing spaces with hyphens", "percentage": 95, "note": "Slugs create readable URLs instead of using numeric IDs"},
        {"solution": "Use Django SlugField in models: models.SlugField(max_length=200)", "percentage": 92, "note": "SlugField validates slug format automatically"},
        {"solution": "Generate slugs from titles using django.utils.text.slugify(): slugify(''The Article Title'') returns ''the-article-title''", "percentage": 90, "note": "slugify() handles special characters and unicode"},
        {"solution": "Use in URLs to create SEO-friendly links: /articles/my-article-title/ instead of /articles/23/", "percentage": 88, "note": "Human-readable URLs improve SEO and user experience"}
    ]'::jsonb,
    'Django project with models, Understanding of URL routing, Optional: python-slugify package',
    'SlugField accepts valid slug strings, URLs display human-readable titles, Slugs are unique and consistent',
    'Slugs should be unique if using as URL identifier. Generate slugs programmatically from titles using slugify() for consistency. Manually entered slugs are error-prone. SlugField only allows alphanumeric, hyphens, and underscores.',
    0.91,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/427102/what-is-a-slug-in-django'
),
(
    'How to upload a file in Django?',
    'stackoverflow-django',
    'VERY_HIGH',
    '[
        {"solution": "Configure settings: MEDIA_ROOT = os.path.join(BASE_DIR, ''media''); MEDIA_URL = ''/media/''", "percentage": 94, "note": "Settings control where files are stored"},
        {"solution": "Define model with FileField: class Document(models.Model): docfile = models.FileField(upload_to=''documents/%Y/%m/%d'')", "percentage": 93, "note": "FileField automatically manages filesystem storage"},
        {"solution": "Create form with FileField: class DocumentForm(forms.Form): docfile = forms.FileField(label=''Select a file'')", "percentage": 91, "note": "Form provides file input validation"},
        {"solution": "In template, set form enctype to ''multipart/form-data'': <form enctype=''multipart/form-data'' method=''post''> with {% csrf_token %}", "percentage": 90, "command": "<form enctype=\"multipart/form-data\" method=\"post\">"},
        {"solution": "In urls.py, serve media files in development: from django.conf import settings; urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)", "percentage": 88, "note": "Only use in development - use web server in production"}
    ]'::jsonb,
    'Django project setup, models.py and forms.py files, URL configuration access, Basic HTML form knowledge',
    'File uploads successfully to MEDIA_ROOT directory, Model stores file path, Browser download works correctly',
    'Form MUST have enctype=multipart/form-data or file upload will not work. Files stored in filesystem, not database. Use web server (Nginx, Apache) to serve MEDIA_URL in production, not Django. MEDIA_ROOT path must be writable by Django process.',
    0.92,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/5871730/how-to-upload-a-file-in-django'
),
(
    'What does on_delete do on Django ForeignKey models?',
    'stackoverflow-django',
    'VERY_HIGH',
    '[
        {"solution": "on_delete parameter specifies behavior when referenced object is deleted. Default CASCADE deletes all dependent records.", "percentage": 95, "note": "SQL standard behavior implemented by Django"},
        {"solution": "CASCADE: Automatically deletes dependent records when parent is deleted. Example: deleting Manufacturer deletes all Cars.", "percentage": 92, "note": "Most common choice for true dependencies"},
        {"solution": "PROTECT: Prevents deletion of referenced object if dependents exist. Raises ProtectedError.", "percentage": 90, "note": "Use when foreign key should never be orphaned"},
        {"solution": "SET_NULL: Sets foreign key to NULL when parent deleted. Requires null=True on field.", "percentage": 88, "note": "Preserves dependent records but orphans them"},
        {"solution": "SET_DEFAULT: Assigns default value instead of deleting or nullifying. Requires default= on field.", "percentage": 85, "command": "models.ForeignKey(Parent, on_delete=models.SET_DEFAULT, default=1)"}
    ]'::jsonb,
    'Django project with ForeignKey relationships, Understanding of referential integrity',
    'Deletion behaves as specified, No orphaned records or unexpected deletions, ProtectedError raised when appropriate',
    'on_delete is REQUIRED for all ForeignKey fields. CASCADE direction flows from parent to child (referenced to referencing). Be explicit about deletion behavior - never use DO_NOTHING unless you know why.',
    0.93,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/38388423/what-does-on-delete-do-on-django-models'
),
(
    'How to check Django version?',
    'stackoverflow-django',
    'MEDIUM',
    '[
        {"solution": "In Python interactive shell: import django; print(django.VERSION) returns tuple like (4, 0, 0, ''final'', 0)", "percentage": 95, "note": "Most reliable method"},
        {"solution": "One-liner in terminal: python -c \"import django; print(django.get_version())\" returns version string like ''4.0.0''", "percentage": 92, "note": "Quickest command-line check"},
        {"solution": "Via Django management command: ./manage.py --version", "percentage": 90, "note": "Only works within Django project directory"},
        {"solution": "Using pip: pip show django shows version and package info", "percentage": 88, "note": "Also shows dependencies and location"},
        {"solution": "Check Python version: python -V (note uppercase V) to verify Python version as well", "percentage": 85, "note": "Important to know both Python and Django versions"}
    ]'::jsonb,
    'Python installed, Django installed in environment',
    'Command returns valid version string or tuple, Version matches package manager',
    'Django version depends on Python installation used. Multiple Python versions can have different Django versions. Check both python -V and django version when debugging environment issues.',
    0.94,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/6468397/how-to-check-django-version'
),
(
    'Is there a list of PyTZ timezones?',
    'stackoverflow-django',
    'MEDIUM',
    '[
        {"solution": "Access all 563 timezones: import pytz; pytz.all_timezones returns complete list", "percentage": 95, "note": "Complete IANA tz database"},
        {"solution": "Get timezone as set: pytz.all_timezones_set returns same data optimized as set", "percentage": 90, "note": "Use for membership testing (O(1) lookup)"},
        {"solution": "Get only common timezones (403 entries): pytz.common_timezones filters out rarely-used zones", "percentage": 88, "note": "Useful for UI dropdowns to reduce options"},
        {"solution": "Apply timezone to datetime: tz = pytz.timezone(''America/New_York''); datetime.datetime.now(tz=tz)", "percentage": 92, "command": "import pytz; tz = pytz.timezone(''Pacific/Auckland''); dt = datetime.datetime.now(tz=tz)"}
    ]'::jsonb,
    'Python environment with pytz installed (pip install pytz), Django project with timezone settings',
    'Timezone list returns successfully, Valid timezone strings can be used with pytz.timezone(), Datetime objects accept timezone',
    'PyTZ timezone names are IANA standard - same as Unix systems. Not all timezones in all_timezones are commonly used. Use common_timezones for user-facing dropdown selects to avoid overwhelming users with 500+ options.',
    0.93,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/13866926/is-there-a-list-of-pytz-timezones'
),
(
    'How to temporarily disable foreign key constraint in MySQL?',
    'stackoverflow-django',
    'HIGH',
    '[
        {"solution": "Set FOREIGN_KEY_CHECKS to 0: SET FOREIGN_KEY_CHECKS=0;", "percentage": 95, "note": "Disables constraint checking for current session only"},
        {"solution": "Re-enable after operations: SET FOREIGN_KEY_CHECKS=1;", "percentage": 95, "note": "Must re-enable explicitly, does not auto-restore"},
        {"solution": "Wrap operations: SET FOREIGN_KEY_CHECKS=0; [YOUR SQL HERE]; SET FOREIGN_KEY_CHECKS=1;", "percentage": 93, "note": "Typical pattern for bulk operations"},
        {"solution": "Alternative in phpMyAdmin: uncheck ''Enable foreign key checks'' before executing SQL", "percentage": 88, "note": "GUI alternative to SQL commands"},
        {"solution": "WARNING: Re-enabling checks does not validate existing data. Ensure referential integrity is correct before re-enabling.", "percentage": 90, "note": "CRITICAL - can leave database in inconsistent state"}
    ]'::jsonb,
    'MySQL database with foreign key constraints, Direct database access, Understanding of referential integrity',
    'Foreign key checks disable successfully, Bulk operations complete, Data integrity maintained after re-enabling',
    'CRITICAL WARNING: MySQL does not revalidate foreign keys when re-enabling checks. Orphaned foreign key values will not be detected. Only disable if you are certain data is valid. Per-session behavior - other connections maintain constraints.',
    0.88,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/15501673/how-can-i-temporarily-disable-a-foreign-key-constraint-in-mysql'
),
(
    'Has Django served sites with excess of 100k daily visits?',
    'stackoverflow-django',
    'LOW',
    '[
        {"solution": "Yes - Django is production-ready and powers high-traffic sites including Instagram, Spotify, and Dropbox in their early stages", "percentage": 95, "note": "Django used by Fortune 500 companies"},
        {"solution": "Scale with caching (Redis, Memcached) to reduce database queries", "percentage": 92, "note": "Essential for high-traffic optimization"},
        {"solution": "Use database read replicas for query scaling", "percentage": 90, "note": "Write to primary, read from replicas"},
        {"solution": "Implement async task queues (Celery) for background jobs", "percentage": 88, "note": "Prevents long-running tasks from blocking requests"},
        {"solution": "Use content delivery network (CDN) for static assets and media", "percentage": 87, "note": "Reduces server load and improves response time"}
    ]'::jsonb,
    'Django installation, Understanding of scalability concepts, Production infrastructure planning',
    'Site serves expected traffic volume without performance degradation, Response times remain acceptable, Database handles load',
    'Django scalability depends on infrastructure, not framework limitations. Real-world high-traffic sites require caching, database optimization, load balancing, and async processing. Django ORM is abstraction layer - underlying database is bottleneck at scale.',
    0.91,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/886221/has-django-served-an-excess-of-100-k-daily-visits'
),
(
    'No module named pkg_resources - Django installation issue',
    'stackoverflow-django',
    'MEDIUM',
    '[
        {"solution": "Install setuptools: pip install --upgrade setuptools", "percentage": 94, "note": "pkg_resources is provided by setuptools"},
        {"solution": "Verify pip installation: python -m pip --version", "percentage": 92, "note": "Ensures pip is properly installed"},
        {"solution": "Reinstall package: pip uninstall Django && pip install Django", "percentage": 90, "note": "Fresh install often resolves import errors"},
        {"solution": "Check Python environment: which python and which pip point to same installation", "percentage": 88, "note": "Mismatched Python/pip causes conflicts"},
        {"solution": "Use virtual environment: python -m venv venv && source venv/bin/activate", "percentage": 92, "command": "python -m venv myenv && source myenv/bin/activate"}
    ]'::jsonb,
    'Python installation, pip package manager, Virtual environment (recommended)',
    'pkg_resources imports successfully, Django installs and runs without errors, Python and pip in same environment',
    'pkg_resources missing usually indicates setuptools not installed. Always use virtual environments to avoid global package conflicts. Check that same Python version is used for both pip install and execution.',
    0.89,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/7446187/no-module-named-pkg-resources'
);
