-- Add Stack Overflow Sass/SCSS solutions batch 1
-- Extracted from highest-voted Sass/SCSS questions with accepted answers

INSERT INTO knowledge_entries (
    query, category, hit_frequency, solutions, prerequisites, success_indicators,
    common_pitfalls, success_rate, claude_version, last_verified, source_url
) VALUES (
    'What is the difference between SCSS and Sass syntax',
    'stackoverflow-sass',
    'VERY_HIGH',
    '[
        {"solution": "SCSS uses curly braces {} and semicolons, while Sass uses indentation (Ruby-inspired). Both compile to identical CSS. SCSS is CSS-compatible - all valid CSS is valid SCSS.", "percentage": 95, "note": "SCSS is preferred for teams migrating from CSS"},
        {"solution": "Sass requires no braces/semicolons: ''$color: red'' vs ''$color: red;''. Use indentation instead of braces for nested blocks. Original syntax, less common now.", "percentage": 90, "note": "Older syntax, primarily used in legacy projects"},
        {"solution": "Convert between formats using ''sass-convert input.sass output.scss'' command line tool for seamless migration.", "percentage": 85, "command": "sass-convert input.sass output.scss"}
    ]'::jsonb,
    'Understanding CSS nesting, Basic familiarity with preprocessors',
    'Team consensus on preferred syntax, Consistent file extensions (.scss or .sass), Successful compilation to valid CSS',
    'Sass and SCSS compile identically - choose based on team preference and existing codebase. Both syntaxes remain fully supported. Cannot mix syntaxes in same project without conversion.',
    0.95,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/5654447/whats-the-difference-between-scss-and-sass'
),
(
    'How to use Sass variables inside CSS calc() function',
    'stackoverflow-sass',
    'HIGH',
    '[
        {"solution": "Use interpolation syntax #{$variable} inside calc(): ''height: calc(100% - #{$body_padding})'' compiles to ''height: calc(100% - 50px)''", "percentage": 95, "note": "Required spacing around operators: calc(#{$a} + 7px) works, calc(#{$a}+7px) fails"},
        {"solution": "Modern Sass 1.40.0+ supports direct variable usage without interpolation: ''height: calc(100% - $body_padding)'' - interpolation now discouraged", "percentage": 90, "note": "Upgrade Sass version for cleaner syntax"},
        {"solution": "Alternative: Use ''box-sizing: border-box'' to eliminate need for calc() entirely in many layout scenarios", "percentage": 75, "note": "Cleaner solution when applicable to design requirements"}
    ]'::jsonb,
    'Sass 3.2+ (or 1.40+ for direct variable syntax), Understanding of CSS calc() function',
    'Compiled CSS contains correct numeric values, calc() function evaluates properly in browser, No interpolation errors during compilation',
    'Spacing after calc( is critical - ''calc (#{$a} + 7px)'' fails. Ensure space around operators inside calc(). Do not use interpolation in Sass 1.40+ - use direct variables instead.',
    0.92,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/17982111/sass-variable-in-css-calc-function'
),
(
    'Fix ReferenceError primordials is not defined in Node.js Gulp',
    'stackoverflow-sass',
    'HIGH',
    '[
        {"solution": "Add npm overrides section to package.json for npm 8.3.0+: add ''overrides'': {''graceful-fs'': ''^4.2.11''} to force compatible version", "percentage": 95, "note": "Most reliable modern solution"},
        {"solution": "For older npm versions, create npm-shrinkwrap.json with graceful-fs v4.2.2 dependency and run npm install", "percentage": 90, "command": "npm install", "note": "Older npm compatibility approach"},
        {"solution": "Delete node_modules and package-lock.json, then reinstall dependencies to ensure clean dependency resolution", "percentage": 85, "command": "rm -rf node_modules package-lock.json && npm install"}
    ]'::jsonb,
    'Node.js 12+, npm 6.0+, Project using Gulp 3 with Sass, Access to package.json file',
    'Gulp tasks execute without primordials error, Project builds successfully, No graceful-fs dependency warnings in npm output',
    'Do not run npm install repeatedly - can overwrite npm-shrinkwrap.json. Always delete node_modules before reinstalling. Avoid unstable Node.js versions (odd-numbered releases). Root cause: Gulp 3 depends on graceful-fs v3 which monkey-patched Node.js fs module, incompatible with Node 12+.',
    0.93,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/55921442/how-to-fix-referenceerror-primordials-is-not-defined-in-node-js'
),
(
    'Error node-sass version incompatible with sass-loader',
    'stackoverflow-sass',
    'HIGH',
    '[
        {"solution": "Replace node-sass with Dart Sass: ''npm uninstall node-sass && npm install sass''. Dart Sass is the recommended implementation.", "percentage": 95, "note": "LibSass is deprecated, official recommendation"},
        {"solution": "For yarn users: ''yarn remove node-sass && yarn add sass'' - same solution with yarn package manager", "percentage": 95, "command": "yarn remove node-sass && yarn add sass"},
        {"solution": "If issues persist, delete lock file and node_modules: ''rm -rf node_modules package-lock.json && npm install''", "percentage": 85, "command": "rm -rf node_modules package-lock.json && npm install"}
    ]'::jsonb,
    'Node.js and npm/yarn installed, React or similar project with SCSS files, Active package.json file',
    'SCSS files compile without version errors, React application runs successfully, No binding errors related to Node.js compatibility',
    'Do not install globally (npm install -g sass). Avoid mixing npm and yarn in same project. Do not keep both node-sass and sass simultaneously - causes compilation errors. LibSass/node-sass is deprecated, not maintained.',
    0.94,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/64625050/error-node-sass-version-5-0-0-is-incompatible-with-4-0-0'
),
(
    'How to import regular CSS files in SCSS',
    'stackoverflow-sass',
    'MEDIUM',
    '[
        {"solution": "Use @import without .css extension to inline CSS: ''@import \"path/to/file\"'' imports path/to/file.css and merges it into compiled output. Available in libsass/node-sass since v3.2.", "percentage": 93, "note": "Preferred for merging/compression"},
        {"solution": "Include .css extension to generate standard CSS @import rule: ''@import \"path/to/file.css\"'' creates separate HTTP request. Works with all Sass implementations.", "percentage": 88, "note": "Preserves normal CSS behavior"},
        {"solution": "For node_modules: prepend ~ to path ''@import \"~normalize.css/normalize\"'' - Webpack resolves tilde paths to node_modules", "percentage": 90, "command": "@import \"~normalize.css/normalize\""}
    ]'::jsonb,
    'Sass/SCSS compiler (libsass v3.2+, node-sass, or Dart Sass), CSS file in accessible path, Understanding of @import directive',
    'CSS content appears inline in compiled output (not as separate HTTP request), Styles combine and apply correctly, File compiles without errors',
    'Ruby Sass cannot import .css files directly - must rename to .scss. Files with compound extensions (file.min.css) may not resolve. Import order matters - imported CSS appears at start of output regardless of source placement. Do not use @import for components - causes duplication.',
    0.90,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/7111610/import-regular-css-file-in-scss-file'
),
(
    'SCSS nesting for :hover pseudo-class does not work',
    'stackoverflow-sass',
    'HIGH',
    '[
        {"solution": "Use parent selector reference & to attach pseudo-class to parent: ''&:hover { color: yellow; }'' compiles to ''.class:hover'' selector", "percentage": 98, "note": "Essential SCSS pattern for all pseudo-classes"},
        {"solution": "Do not nest pseudo-class without & : omitting it creates descendant selector (invalid syntax). Always use & for concatenation.", "percentage": 95, "note": "Common mistake for SCSS beginners"},
        {"solution": "Verify compiled CSS output contains ''.class:hover'' selector format to confirm proper nesting", "percentage": 90, "note": "Use browser DevTools to inspect compiled styles"}
    ]'::jsonb,
    'Basic SCSS knowledge, CSS pseudo-class understanding, Sass/SCSS compiler installed',
    'Compiled CSS shows .class:hover selector, Hover effect applies in browser, No console errors or selector warnings',
    'Omitting & symbol causes pseudo-selector to become descendant selector, producing invalid CSS and no hover effect. The & must precede pseudo-class/pseudo-element. This applies to all pseudo-classes (:hover, :focus, :active, ::before, ::after, etc).',
    0.98,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/15983639/sass-nesting-for-hover-does-not-work'
),
(
    'SCSS nesting with multiple classes on same element',
    'stackoverflow-sass',
    'MEDIUM',
    '[
        {"solution": "Use parent selector & with additional class: ''&.desc { background: blue; }'' compiles to ''.container.desc'' selector applying when both classes present", "percentage": 97, "note": "Core SCSS nesting technique"},
        {"solution": "The & symbol resolves completely to parent selector and can be positioned virtually anywhere in nested block with whitespace", "percentage": 95, "note": "Works for pseudo-classes, pseudo-elements, and class combinations"},
        {"solution": "Apply both classes in HTML: ''<div class=\"container desc\">'' for styles to take effect - selector requires both classes present", "percentage": 95, "note": "CSS selector specificity requires matching classes"}
    ]'::jsonb,
    'SCSS nesting basics, CSS class selector knowledge, Understanding of & parent reference operator, HTML markup with multiple classes',
    'Compiled CSS shows .container.desc combined selector, Styles apply when both classes present on element, No selector errors in compilation',
    'Do not concatenate & directly without whitespace (like ''#id&'') - causes errors. Only whitespace-separated positioning works. The & must be preceded/followed by space in most contexts. Remember HTML must have both classes for styles to apply.',
    0.96,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/11084757/sass-scss-nesting-and-multiple-classes'
),
(
    'How to extend/include another class in SCSS',
    'stackoverflow-sass',
    'MEDIUM',
    '[
        {"solution": "Use @extend directive to inherit all styles: ''@extend .myclass'' incorporates all rules including nested hover states and pseudo-classes", "percentage": 92, "note": "Essential for style inheritance"},
        {"solution": "For cleaner output, use SCSS placeholders %base-styles instead of regular classes when base style not used independently, avoiding unused selectors", "percentage": 88, "note": "Prevents CSS bloat in compiled output"},
        {"solution": "Alternative: Use mixins with @mixin @include for more flexible style composition when inheritance not suitable", "percentage": 80, "note": "Consider when styles need parameters or conditional inclusion"}
    ]'::jsonb,
    'SCSS compiler, Classes defined before extension, Understanding of CSS inheritance vs composition, Target class must exist',
    'Compiled CSS shows all parent styles in child class, Hover and pseudo-class states inherit correctly, No undefined class references',
    'The @extend directive will NOT work if either class is within a media query directive unless both are in same directive - causes scoping issues. Extending classes creates complex selectors that may bloat CSS output. Do not use @extend across media query boundaries. Use placeholders (%) instead of classes for internal-only styles.',
    0.88,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/9560170/including-another-class-in-scss'
),
(
    'How to use Sass variables across multiple files',
    'stackoverflow-sass',
    'MEDIUM',
    '[
        {"solution": "Use @use directive (modern approach, @import is deprecated): Create _variables.scss, then ''@use ''variables''; body { color: variables.$text-colour; }'' in other files", "percentage": 95, "note": "@import deprecated in Dart Sass, will be removed in v3.0"},
        {"solution": "For cleaner syntax without namespace prefix, use: ''@use ''variables'' as *; body { color: $text-colour; }'' - eliminates need for ''variables.'' prefix", "percentage": 92, "note": "Recommended for projects with many variables"},
        {"solution": "CRITICAL: Only include variables, functions, mixins in _variables.scss - never include actual CSS rules to avoid duplication across imports", "percentage": 98, "note": "CSS duplication is main cause of bloated output"}
    ]'::jsonb,
    'Dart Sass installed (LibSass is deprecated), _variables.scss file created, Each file that needs variables must import them, Understanding of Sass namespacing',
    'Variables resolve without undefined errors, No CSS duplication in compiled output, All component files recognize shared variables, Successful compilation',
    'Do not include actual CSS in variables file - causes duplication across every file. @import is deprecated and will be removed - use @use instead. Must prefix variables with namespace unless using ''as *''. Each file must import variables individually (unlike @import which worked globally).',
    0.93,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/17598996/sass-use-variables-across-multiple-files'
),
(
    'How to configure SASS options in Angular CLI',
    'stackoverflow-sass',
    'MEDIUM',
    '[
        {"solution": "For new projects: ''ng new My_Project --style=scss'' creates project with SCSS enabled by default", "percentage": 96, "command": "ng new My_Project --style=scss"},
        {"solution": "For existing projects (Angular 9+): Edit angular.json, add ''schematics'': {''@schematics/angular:component'': {''style'': ''scss''}}'' to make new components use .scss", "percentage": 94, "note": "Works for modern Angular versions"},
        {"solution": "For Angular 5-8: Use CLI command ''ng config schematics.@schematics/angular:component.styleext scss'' to configure style extension", "percentage": 90, "command": "ng config schematics.@schematics/angular:component.styleext scss"}
    ]'::jsonb,
    'Angular CLI installed, Node.js and npm, For existing projects: angular.json file accessible, Understanding of Angular configuration',
    'New components generate with .scss files, Styles compile without errors during ng serve and ng build, Component stylesheets properly scope',
    'Component styleUrls require relative paths: [''./app.component.scss''] not [''app.component.scss'']. When converting existing projects, manually rename all .css files to .scss and update @Component references. Config file is hidden: .angular-cli.json not angular-cli.json.',
    0.91,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/36220256/angular-cli-sass-options'
),
(
    'How to use sass --watch with automatic minification',
    'stackoverflow-sass',
    'LOW',
    '[
        {"solution": "Use --style compressed flag: ''sass --watch a.scss:a.css --style compressed'' outputs minified CSS during compilation without separate tool", "percentage": 95, "command": "sass --watch a.scss:a.css --style compressed", "note": "Built-in Sass solution"},
        {"solution": "Directory-based approach: ''sass scss:css --style=compressed --watch'' monitors entire directory (requires scss/css folders in current directory)", "percentage": 93, "command": "sass scss:css --style=compressed --watch"},
        {"solution": "For expanded output during development: ''sass --watch a.scss:a.css --style expanded'' for debugging, switch to compressed for production", "percentage": 88, "note": "Development vs production configurations"}
    ]'::jsonb,
    'Sass installed on system, Source .scss file(s) ready, Understanding of Sass output styles',
    'Output CSS file generated with minified formatting, File updates automatically when .scss changes, No additional minification tools required',
    'The --style flag supports: nested, expanded, compact, and compressed. Compressed removes all unnecessary whitespace. Cannot use --watch without specifying output file. Remember to place flag after input:output notation.',
    0.94,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/8980398/sass-watch-with-automatic-minify'
);
