INSERT INTO knowledge_entries (query, category, hit_frequency, solutions, prerequisites, success_indicators, common_pitfalls, success_rate, claude_version, last_verified, source_url, contributor_email) VALUES
('Authorization header CORS preflight request fails with 500 error when Access-Control-Allow-Credentials not set', 'authentication', 'HIGH', '[{"solution": "Set Access-Control-Allow-Credentials to true in CORS middleware. When credentials are allowed, Access-Control-Allow-Origin cannot be wildcard (*). Use Origin header checking to whitelist specific hosts instead", "percentage": 95}, {"solution": "Implement CORS middleware that checks Origin header against whitelist and sets Access-Control-Allow-Origin to the requesting origin, not wildcard", "percentage": 88}]'::jsonb, 'Understanding CORS spec, Django/backend framework knowledge, Access-Control headers basics', 'OPTIONS preflight request succeeds with 200 response, actual GET/POST request proceeds without 500 error', 'Setting Access-Control-Allow-Origin to * with credentials, forgetting to handle OPTIONS method, not checking Origin header', 0.92, 'haiku', NOW(), 'https://stackoverflow.com/questions/25064158/how-to-make-get-cors-request-with-authorization-header', 'admin:1764191994'),
('Spring Boot OAuth2 CORS authentication fails with authorization token required', 'authentication', 'HIGH', '[{"solution": "Use Backend-For-Frontend (BFF) pattern with Spring Cloud Gateway and TokenRelay filter. Route all requests through gateway (same origin) to eliminate CORS issues from browser perspective", "percentage": 93}, {"solution": "Configure Spring Security to allow OPTIONS requests globally with requestMatchers(HttpMethod.OPTIONS, \"/**\").permitAll() for preflight requests", "percentage": 86}]'::jsonb, 'Spring Boot 2.5+, Spring Security, OAuth2 understanding, BFF pattern knowledge', 'Vue/React app successfully authenticates without CORS errors, authorization token accepted in subsequent requests', 'Using SPA as OAuth2 client (discouraged), not handling preflight OPTIONS requests, not setting Access-Control-Allow-Credentials correctly', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/77325532/how-to-properly-configure-cors-on-a-spring-boot-auth-server', 'admin:1764191994'),
('Authorization header included in request despite CORS preflight restrictions in browser', 'authentication', 'MEDIUM', '[{"solution": "Ensure server responds to OPTIONS preflight with Access-Control-Allow-Headers: authorization header explicitly. Spring Boot @CrossOrigin annotation must include allowedHeaders property", "percentage": 94}, {"solution": "Verify Access-Control-Allow-Credentials is true and Access-Control-Allow-Origin is not wildcard when credentials/Authorization header is used", "percentage": 91}]'::jsonb, 'Spring Boot framework, @CrossOrigin annotation, fetch API credentials:include setting', 'Authorization header successfully passed in actual request after OPTIONS preflight passes, no browser console CORS errors', 'Using wildcard Access-Control-Allow-Origin with credentials, not declaring authorization in allowedHeaders, incorrect preflight response', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/76697735/authorization-header-included-despite-cors', 'admin:1764191994'),
('Spring Boot 3.1 with Spring Security 6.1.1 blocks authenticated requests with CORS policy after authentication', 'authentication', 'HIGH', '[{"solution": "Add requestMatchers(HttpMethod.OPTIONS, \"/**\").permitAll() to SecurityFilterChain to allow preflight OPTIONS requests before authentication filter", "percentage": 96}, {"solution": "Implement WebMvcConfigurer with addCorsMappings to configure CORS globally instead of relying on @CrossOrigin annotation. Ensure CORS is configured before Spring Security filter chain", "percentage": 92}]'::jsonb, 'Spring Boot 3.1+, Spring Security 6.1.1+, JWT authentication understanding', 'Authenticated endpoints accessible without CORS errors, preflight OPTIONS requests return 200 status, JWT tokens accepted in Authorization header', 'Disabling CORS when Spring Security filter processes requests first, not allowing OPTIONS requests to bypass authentication, CORS config after security chain', 0.94, 'haiku', NOW(), 'https://stackoverflow.com/questions/76682586/allow-cors-with-spring-security-6-1-1-with-authenticated-requests', 'admin:1764191994');
