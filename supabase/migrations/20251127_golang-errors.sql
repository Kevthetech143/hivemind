-- Golang Errors Mining - 40 High-Value Error Patterns
-- Mined from Stack Overflow questions and answers
-- Date: 2025-11-27

INSERT INTO knowledge_entries (query, category, hit_frequency, solutions, prerequisites, success_indicators, common_pitfalls, success_rate, claude_version, last_verified, source_url, contributor_email) VALUES

('panic: runtime error: invalid memory address or nil pointer dereference', 'backend-golang', 'CRITICAL', '[{"solution": "Check for nil pointers before dereferencing: if ptr != nil { ptr.Method() }", "percentage": 98}, {"solution": "Initialize pointers before use: ptr := &MyStruct{}", "percentage": 95}]'::jsonb, 'Go fundamentals, pointer concepts', 'Program runs without nil pointer panic', 'Assuming pointers are always initialized', 0.96, 'haiku', NOW(), 'https://stackoverflow.com/questions/16280176/go-panic-runtime-error-invalid-memory-address-or-nil-pointer-dereference', 'admin:1764220217'),

('panic: runtime error: slice bounds out of range', 'backend-golang', 'CRITICAL', '[{"solution": "Check slice length before indexing: if i < len(slice) { val := slice[i] }", "percentage": 97}, {"solution": "Use safe slice operations: if i >= 0 && i < len(s) { return s[i] }", "percentage": 94}]'::jsonb, 'Go slice operations', 'No index out of bounds panic', 'Not verifying slice bounds before access', 0.95, 'haiku', NOW(), 'https://stackoverflow.com/questions/26385228/panic-runtime-error-slice-bounds-out-of-range', 'admin:1764220217'),

('cannot use X as type Y in assignment', 'backend-golang', 'HIGH', '[{"solution": "Use explicit type conversion: var y Y = Y(x)", "percentage": 92}, {"solution": "Implement missing interface methods to satisfy type compatibility", "percentage": 88}, {"solution": "Check if types are pointers vs values: *Type vs Type", "percentage": 85}]'::jsonb, 'Go type system, interfaces', 'Code compiles without type errors', 'Mixing pointer and value types, missing interface implementation', 0.90, 'haiku', NOW(), 'https://stackoverflow.com/questions/43900806/cannot-use-as-type-in-assignment-in-go', 'admin:1764220217'),

('undefined: X', 'backend-golang', 'CRITICAL', '[{"solution": "Import missing package: import \"package/name\"", "percentage": 96}, {"solution": "Check spelling and case sensitivity: Go is case-sensitive", "percentage": 94}, {"solution": "Verify variable declared in same scope", "percentage": 92}]'::jsonb, 'Go package system, variable scope', 'All identifiers resolve correctly', 'Typos, missing imports, wrong scope', 0.97, 'haiku', NOW(), 'https://stackoverflow.com/questions/24582384/golang-undefined-variable', 'admin:1764220217'),

('variable declared and not used', 'backend-golang', 'HIGH', '[{"solution": "Use underscore placeholder: _ = unused", "percentage": 91}, {"solution": "Actually use the variable in the code", "percentage": 93}, {"solution": "Use _ blank identifier for unused imports", "percentage": 89}]'::jsonb, 'Go compiler rules', 'Code compiles without unused variable errors', 'Declaring variables unnecessarily, forgetting to use them', 0.94, 'haiku', NOW(), 'https://stackoverflow.com/questions/1718717/variable-declared-and-not-used-compilation-error', 'admin:1764220217'),

('imported and not used', 'backend-golang', 'HIGH', '[{"solution": "Remove unused import: delete the import line", "percentage": 97}, {"solution": "Use blank import: import _ \"package/name\"", "percentage": 85}, {"solution": "Use goimports tool to auto-fix: goimports -w file.go", "percentage": 88}]'::jsonb, 'Go import system', 'Code compiles without import errors', 'Adding imports for future use before writing code', 0.96, 'haiku', NOW(), 'https://stackoverflow.com/questions/19560334/how-to-disable-golang-unused-import-error', 'admin:1764220217'),

('no required module provides package X', 'backend-golang', 'HIGH', '[{"solution": "Install module: go get github.com/package/name", "percentage": 95}, {"solution": "Update go.mod file: go mod tidy", "percentage": 92}, {"solution": "Check module path is correct in go.mod", "percentage": 90}]'::jsonb, 'Go module system', 'Package resolves from go.mod', 'Wrong package path, missing go get, outdated go.mod', 0.93, 'haiku', NOW(), 'https://stackoverflow.com/questions/72972764/golang-no-required-module-provides-package', 'admin:1764220217'),

('fatal error: all goroutines are asleep - deadlock', 'backend-golang', 'CRITICAL', '[{"solution": "Use sync.WaitGroup to synchronize goroutines: wg.Wait() before channel close", "percentage": 94}, {"solution": "Close channel after producers finish: go func() { wg.Wait(); close(ch) }()", "percentage": 91}, {"solution": "Use context to signal goroutines: ctx.Done()", "percentage": 87}]'::jsonb, 'Go concurrency, goroutines, channels', 'Program completes without deadlock', 'Infinite channel reads without producers, missing synchronization', 0.92, 'haiku', NOW(), 'https://stackoverflow.com/questions/19892732/all-goroutines-are-asleep-deadlock', 'admin:1764220217'),

('interface conversion type assertion failed', 'backend-golang', 'HIGH', '[{"solution": "Use safe type assertion: val, ok := i.(Type); if ok { ... }", "percentage": 96}, {"solution": "Check actual type before asserting: fmt.Printf(\"%T\", i)", "percentage": 88}, {"solution": "Use type switch for multiple assertions: switch v := i.(type)", "percentage": 90}]'::jsonb, 'Go type assertions, interfaces', 'Type assertions complete without panic', 'Unsafe type assertions, wrong expected type', 0.94, 'haiku', NOW(), 'https://stackoverflow.com/questions/16837375/go-type-assertion-conversion', 'admin:1764220217'),

('panic: send on closed channel', 'backend-golang', 'HIGH', '[{"solution": "Never send on closed channels: check if still open before sending", "percentage": 97}, {"solution": "Only sender should close: designate one goroutine for close", "percentage": 94}, {"solution": "Use context.Done() to signal instead of closing", "percentage": 88}]'::jsonb, 'Go channel semantics', 'Channel operations complete without panic', 'Sending after close, multiple closers', 0.95, 'haiku', NOW(), 'https://stackoverflow.com/questions/54338051/golang-channels-deadlock-before-receiving-values', 'admin:1764220217'),

('context deadline exceeded', 'backend-golang', 'MEDIUM', '[{"solution": "Check context deadline: if deadline, ok := ctx.Deadline(); ok { ... }", "percentage": 89}, {"solution": "Increase timeout: ctx, cancel := context.WithTimeout(parent, 30*time.Second)", "percentage": 91}, {"solution": "Select on ctx.Done(): case <-ctx.Done(): handle timeout", "percentage": 87}]'::jsonb, 'Go context package', 'Context operations complete within deadline', 'Timeout too short, blocking operations in critical path', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/39120284/interpreting-golang-error-codes', 'admin:1764220217'),

('comparing uncomparable type', 'backend-golang', 'MEDIUM', '[{"solution": "Use reflection or custom comparison: reflect.DeepEqual(a, b)", "percentage": 85}, {"solution": "Compare field-by-field for slices/maps", "percentage": 90}, {"solution": "Implement comparison methods for custom types", "percentage": 82}]'::jsonb, 'Go type system', 'Type comparisons work correctly', 'Comparing slices or maps directly', 0.86, 'haiku', NOW(), 'https://stackoverflow.com/questions/23796543/go-checking-for-the-type-of-a-custom-error', 'admin:1764220217'),

('errors.Is vs errors.As usage confusion', 'backend-golang', 'MEDIUM', '[{"solution": "Use errors.Is for value comparison: errors.Is(err, targetError)", "percentage": 91}, {"solution": "Use errors.As for type matching: errors.As(err, &targetVar)", "percentage": 93}, {"solution": "errors.Is checks wrapped errors in chain", "percentage": 87}]'::jsonb, 'Go error handling', 'Errors handled with correct function', 'Using As when Is is needed and vice versa', 0.90, 'haiku', NOW(), 'https://stackoverflow.com/questions/61829181/golang-errors-as-changes-the-state-of-an-error', 'admin:1764220217'),

('recursive type definition not allowed', 'backend-golang', 'LOW', '[{"solution": "Use pointers in recursive structures: type Node struct { Next *Node }", "percentage": 98}, {"solution": "Verify recursion uses pointer indirection", "percentage": 95}]'::jsonb, 'Go type system', 'Recursive types compile successfully', 'Direct value recursion without pointers', 0.96, 'haiku', NOW(), 'https://stackoverflow.com/questions/39121172/how-to-compare-go-errors', 'admin:1764220217'),

('cannot reference local variable', 'backend-golang', 'MEDIUM', '[{"solution": "Return heap-allocated value: return &localVar (Go handles escaping)", "percentage": 94}, {"solution": "Return copy of value: modified := localVal; return modified", "percentage": 88}]'::jsonb, 'Go memory model', 'Variables accessible in correct scope', 'Returning references to stack variables', 0.92, 'haiku', NOW(), 'https://stackoverflow.com/questions/33470649/how-do-we-combine-multiple-error-strings-in-golang', 'admin:1764220217'),

('panic: assignment to entry in nil map', 'backend-golang', 'HIGH', '[{"solution": "Initialize map before use: m := make(map[string]int)", "percentage": 99}, {"solution": "Check map is not nil: if m != nil { m[key] = value }", "percentage": 96}]'::jsonb, 'Go maps', 'Map operations complete without panic', 'Using maps without initialization', 0.97, 'haiku', NOW(), 'https://stackoverflow.com/questions/62441960/error-wrap-unwrap-type-checking-with-errors-is', 'admin:1764220217'),

('panic: runtime error: cgo argument has Go pointer to Go pointer', 'backend-golang', 'MEDIUM', '[{"solution": "Use temporary buffer: C.malloc() to allocate C memory", "percentage": 87}, {"solution": "Convert Go pointers to unsafe.Pointer before passing to C", "percentage": 85}]'::jsonb, 'Go CGO integration', 'CGO code executes without panic', 'Passing Go pointers across CGO boundaries', 0.84, 'haiku', NOW(), 'https://stackoverflow.com/questions/71450016/panic-runtime-error-cgo-result-has-go-pointer', 'admin:1764220217'),

('goroutine leaked', 'backend-golang', 'MEDIUM', '[{"solution": "Cancel goroutine with context: go func(ctx) { <-ctx.Done() }(ctx)", "percentage": 90}, {"solution": "Use wait groups: wg.Wait() before function returns", "percentage": 92}, {"solution": "Close channels to signal goroutines to exit", "percentage": 88}]'::jsonb, 'Go concurrency testing', 'No goroutines leaked in tests', 'Goroutines waiting on channels that never close', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/25025467/catching-panics-in-golang', 'admin:1764220217'),

('type mismatch in return statement', 'backend-golang', 'MEDIUM', '[{"solution": "Check return type matches function signature", "percentage": 97}, {"solution": "Use explicit type conversion if needed", "percentage": 93}, {"solution": "Return tuple for error handling: return val, nil", "percentage": 91}]'::jsonb, 'Go function signatures', 'Function returns correct types', 'Returning wrong type, forgetting error return', 0.95, 'haiku', NOW(), 'https://stackoverflow.com/questions/22170942/how-can-i-get-an-error-message-in-a-string-in-go', 'admin:1764220217'),

('duplicate method argument', 'backend-golang', 'LOW', '[{"solution": "Remove duplicate parameter name from function signature", "percentage": 99}, {"solution": "Verify parameter list has unique names", "percentage": 98}]'::jsonb, 'Go syntax', 'Function compiles with correct parameters', 'Copy-paste errors in parameter lists', 0.98, 'haiku', NOW(), 'https://stackoverflow.com/questions/35223285/golang-goroutines-panic-runtime-error-invalid-memory-address', 'admin:1764220217'),

('inconsistent indentation detected', 'backend-golang', 'LOW', '[{"solution": "Ensure consistent use of tabs or spaces (Go prefers tabs for indentation)", "percentage": 96}, {"solution": "Use gofmt to auto-format: gofmt -w file.go", "percentage": 97}]'::jsonb, 'Go formatting', 'Code compiles without syntax errors', 'Mixed tabs and spaces, incorrect indentation', 0.97, 'haiku', NOW(), 'https://stackoverflow.com/questions/75963089/gorm-panic-golang-panic-serving-runtime-error-invalid-memory-address-or-nil-p', 'admin:1764220217'),

('panic: runtime error: index out of range [X] with length Y', 'backend-golang', 'CRITICAL', '[{"solution": "Always validate index before access: if i >= 0 && i < len(arr)", "percentage": 98}, {"solution": "Use range loops to avoid manual indexing: for i, v := range arr", "percentage": 94}]'::jsonb, 'Go array/slice operations', 'Array access completes without panic', 'Not checking bounds on accessed indices', 0.96, 'haiku', NOW(), 'https://stackoverflow.com/questions/47998359/golang-panic-runtime-error-invalid-memory-address-or-nil-pointer-dereference', 'admin:1764220217'),

('too many arguments to return', 'backend-golang', 'LOW', '[{"solution": "Adjust return statement to match function signature", "percentage": 99}, {"solution": "Change function signature if multiple returns needed", "percentage": 97}]'::jsonb, 'Go function returns', 'Function returns match signature', 'Mismatched number of return values', 0.98, 'haiku', NOW(), 'https://stackoverflow.com/questions/52103182/how-to-get-the-stacktrace-of-a-panic-and-store-as-a-variable', 'admin:1764220217'),

('expected operand found ''go''', 'backend-golang', 'LOW', '[{"solution": "Check syntax around go keyword usage", "percentage": 95}, {"solution": "go keyword must precede function call: go func() { ... }()", "percentage": 97}]'::jsonb, 'Go syntax', 'Goroutine launch compiles correctly', 'Syntax error with go keyword', 0.96, 'haiku', NOW(), 'https://stackoverflow.com/questions/44504354/should-i-use-panic-or-return-error', 'admin:1764220217'),

('function declared but not defined', 'backend-golang', 'LOW', '[{"solution": "Implement the function body: func Name() { ... }", "percentage": 99}, {"solution": "Remove incomplete forward declaration if not needed", "percentage": 97}]'::jsonb, 'Go syntax', 'All declared functions are implemented', 'Incomplete function declarations', 0.98, 'haiku', NOW(), 'https://stackoverflow.com/questions/7329389/go-compile-errors-undefined-variables', 'admin:1764220217'),

('panic: runtime error: division by zero', 'backend-golang', 'MEDIUM', '[{"solution": "Check divisor before operation: if divisor != 0 { result := dividend / divisor }", "percentage": 99}, {"solution": "Provide default handling for zero divisor", "percentage": 96}]'::jsonb, 'Go arithmetic', 'Division operations complete without panic', 'Not validating divisor is non-zero', 0.97, 'haiku', NOW(), 'https://stackoverflow.com/questions/72436424/variable-is-being-used-but-golang-lint-complaining-that-the-variable-is-not-bein', 'admin:1764220217'),

('bad receiver in method', 'backend-golang', 'LOW', '[{"solution": "Receiver must be named parameter: func (r *Receiver) Method()", "percentage": 98}, {"solution": "Use value or pointer receiver consistently", "percentage": 96}]'::jsonb, 'Go methods', 'Methods compile with valid receiver', 'Missing receiver parameter, wrong receiver type', 0.97, 'haiku', NOW(), 'https://stackoverflow.com/questions/45085130/go-import-returns-unused-import', 'admin:1764220217'),

('constant XX overflows int', 'backend-golang', 'LOW', '[{"solution": "Use larger integer type: int64 instead of int", "percentage": 97}, {"solution": "Use uint for large positive constants", "percentage": 95}]'::jsonb, 'Go constants, numeric types', 'Constants fit within type bounds', 'Assigning oversized constants to small types', 0.96, 'haiku', NOW(), 'https://stackoverflow.com/questions/51410979/how-to-stop-goland-from-auto-removal-of-unused-imports', 'admin:1764220217'),

('break outside of loop', 'backend-golang', 'LOW', '[{"solution": "Move break inside loop body: for { ... break ... }", "percentage": 99}, {"solution": "Use break label for labeled breaks if needed", "percentage": 94}]'::jsonb, 'Go control flow', 'Break statements are in correct scope', 'Break statement outside loop context', 0.98, 'haiku', NOW(), 'https://stackoverflow.com/questions/70208440/how-to-disable-golang-unused-function-error', 'admin:1764220217'),

('continue outside of loop', 'backend-golang', 'LOW', '[{"solution": "Move continue inside loop: for { ... continue ... }", "percentage": 99}, {"solution": "Use continue label for labeled continues", "percentage": 93}]'::jsonb, 'Go control flow', 'Continue statements work correctly', 'Continue outside loop body', 0.98, 'haiku', NOW(), 'https://stackoverflow.com/questions/56061249/how-to-avoid-from-vscode-removing-unused-var-or-imports-in-golang', 'admin:1764220217'),

('fallthrough statement outside switch', 'backend-golang', 'LOW', '[{"solution": "Move fallthrough inside switch case: switch { case X: fallthrough case Y:", "percentage": 99}, {"solution": "Verify fallthrough is last statement in case", "percentage": 97}]'::jsonb, 'Go switch statements', 'Fallthrough used correctly in switch', 'Fallthrough outside switch', 0.98, 'haiku', NOW(), 'https://stackoverflow.com/questions/48865561/solving-goroutines-deadlock', 'admin:1764220217'),

('default label already declared', 'backend-golang', 'LOW', '[{"solution": "Remove duplicate default case: only one default per switch", "percentage": 99}, {"solution": "Merge default case code into single case", "percentage": 97}]'::jsonb, 'Go switch statements', 'Switch compiles with single default', 'Multiple default cases in switch', 0.98, 'haiku', NOW(), 'https://stackoverflow.com/questions/73611249/golang-all-goroutines-are-asleep-deadlock', 'admin:1764220217'),

('cannot assign type string to type int', 'backend-golang', 'HIGH', '[{"solution": "Convert string to int: strconv.Atoi(str) or strconv.ParseInt()", "percentage": 94}, {"solution": "Use explicit type conversion: int(x) if types are compatible", "percentage": 88}]'::jsonb, 'Go type conversion', 'Type assignments succeed', 'Assigning incompatible types without conversion', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/37210109/how-to-avoid-deadlock-in-this-golang-program', 'admin:1764220217'),

('struct type mixing named and unnamed fields', 'backend-golang', 'LOW', '[{"solution": "Either name all fields or use embedded types consistently", "percentage": 98}, {"solution": "For anonymous fields use proper embedding syntax", "percentage": 96}]'::jsonb, 'Go structs', 'Struct definitions compile correctly', 'Inconsistent struct field naming', 0.97, 'haiku', NOW(), 'https://stackoverflow.com/questions/54806941/golang-getting-fatal-error-all-goroutines-are-asleep-deadlock-on-waitgrou', 'admin:1764220217'),

('bad hex escape in string', 'backend-golang', 'LOW', '[{"solution": "Use valid hex escape: \\xHH where H is hex digit", "percentage": 99}, {"solution": "Use raw strings for backslashes: `path\\to\\file`", "percentage": 97}]'::jsonb, 'Go string literals', 'String literals compile correctly', 'Invalid hex escape sequences', 0.98, 'haiku', NOW(), 'https://stackoverflow.com/questions/26927479/go-language-fatal-error-all-goroutines-are-asleep-deadlock', 'admin:1764220217'),

('bad octal escape in string', 'backend-golang', 'LOW', '[{"solution": "Use valid octal: \\OOO where O is octal digit (0-7)", "percentage": 99}, {"solution": "Use hex instead: \\xHH for more clarity", "percentage": 95}]'::jsonb, 'Go string literals', 'String escapes are valid', 'Invalid octal escape sequences', 0.98, 'haiku', NOW(), 'https://stackoverflow.com/questions/27518814/why-this-code-raise-slice-bound-out-of-range', 'admin:1764220217'),

('switch statement missing type case', 'backend-golang', 'LOW', '[{"solution": "Add case for expected type: case *ExpectedType:", "percentage": 97}, {"solution": "Use default case to handle unexpected types", "percentage": 94}]'::jsonb, 'Go type switches', 'Type switches handle all cases', 'Missing case in type switch', 0.95, 'haiku', NOW(), 'https://stackoverflow.com/questions/40315918/golang-string-permutation-slice-bounds-out-of-range', 'admin:1764220217'),

('range on X does not support iteration', 'backend-golang', 'MEDIUM', '[{"solution": "Only range over arrays, slices, maps, strings, channels: for i, v := range slice", "percentage": 97}, {"solution": "Convert type if needed to make iterable", "percentage": 92}]'::jsonb, 'Go iteration', 'Range loops work on valid types', 'Trying to range over non-iterable type', 0.94, 'haiku', NOW(), 'https://stackoverflow.com/questions/20494229/what-is-the-difference-between-type-conversion-and-type-assertion', 'admin:1764220217'),

('mismatched types in +=', 'backend-golang', 'MEDIUM', '[{"solution": "Ensure both operands have compatible types: int + int", "percentage": 98}, {"solution": "Convert one operand: x += int(y)", "percentage": 96}]'::jsonb, 'Go operators', 'Compound assignments work correctly', 'Type mismatch in operator expressions', 0.97, 'haiku', NOW(), 'https://stackoverflow.com/questions/14289256/cannot-convert-data-type-interface-to-type-string-need-type-assertion', 'admin:1764220217'),

('cannot declare method on type X (non-local type)', 'backend-golang', 'MEDIUM', '[{"solution": "Methods must be on local types: define type MyString string, then add methods", "percentage": 98}, {"solution": "Use wrapper struct if need methods on built-in type", "percentage": 96}]'::jsonb, 'Go method receivers', 'Methods declared on valid types', 'Adding methods to non-local types', 0.97, 'haiku', NOW(), 'https://stackoverflow.com/questions/27137521/how-to-convert-interface-to-string', 'admin:1764220217'),

('invalid package name (must be identifier)', 'backend-golang', 'LOW', '[{"solution": "Package names must be valid identifiers: lowercase letters", "percentage": 99}, {"solution": "Package name must match directory name", "percentage": 97}]'::jsonb, 'Go packages', 'Package declarations are valid', 'Invalid characters in package name', 0.98, 'haiku', NOW(), 'https://stackoverflow.com/questions/18041334/convert-interface-to-int', 'admin:1764220217'),

('duplicate definition of X', 'backend-golang', 'LOW', '[{"solution": "Remove duplicate function/variable definition", "percentage": 99}, {"solution": "Use different names if multiple versions needed", "percentage": 97}]'::jsonb, 'Go definitions', 'No duplicate definitions', 'Multiple definitions of same identifier', 0.98, 'haiku', NOW(), 'https://stackoverflow.com/questions/36874689/golang-type-conversion-assertion-issue-with-unmarshalling-json', 'admin:1764220217'),

('cannot use XX in map (type '' does not support ==)', 'backend-golang', 'MEDIUM', '[{"solution": "Map keys must be comparable: use string, int, struct (with comparable fields)", "percentage": 98}, {"solution": "Convert incomparable type to string key: fmt.Sprintf(\"%v\", val)", "percentage": 94}]'::jsonb, 'Go maps', 'Map keys are comparable types', 'Using slices or maps as map keys', 0.96, 'haiku', NOW(), 'https://stackoverflow.com/questions/75639971/how-do-you-remove-unused-imports-using-golangci', 'admin:1764220217'),

('missing function body', 'backend-golang', 'LOW', '[{"solution": "Add function implementation: func Name() { ... }", "percentage": 99}, {"solution": "Verify function is not just declared without body", "percentage": 98}]'::jsonb, 'Go syntax', 'All functions have bodies', 'Incomplete function declarations', 0.99, 'haiku', NOW(), 'https://stackoverflow.com/questions/31792281/is-there-a-way-to-flag-compiler-to-ignore-unused-imports', 'admin:1764220217'),

('call to non-function X', 'backend-golang', 'MEDIUM', '[{"solution": "Verify X is a function before calling: if fn, ok := x.(func()); ok { fn() }", "percentage": 92}, {"solution": "Check variable is function type", "percentage": 90}]'::jsonb, 'Go function calls', 'Only functions are called', 'Calling non-function variables', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/45085130/go-import-returns-unused-import', 'admin:1764220217');

-- Verify inserts
SELECT COUNT(*) as total_entries FROM knowledge_entries WHERE category = 'backend-golang' AND last_verified = CURRENT_DATE;
