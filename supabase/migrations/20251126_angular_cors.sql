-- Mining Angular CORS errors for knowledge base
-- Mined on 2025-11-26

INSERT INTO knowledge_entries (query, category, hit_frequency, solutions, prerequisites, success_indicators, common_pitfalls, success_rate, claude_version, last_verified, source_url, contributor_email) VALUES
('Access to XMLHttpRequest at ''http://localhost:3000/v0/filegenerator/download'' from origin ''http://localhost:4200'' has been blocked by CORS policy: Response to preflight request doesn''t pass access control check: It does not have HTTP ok status', 'angular', 'HIGH', '[{"solution": "Configure server-side CORS headers: app.use(function(req, res, next) { res.header(\"Access-Control-Allow-Origin\", \"*\"); res.header(\"Access-Control-Allow-Headers\", \"Origin, X-Requested-With, Content-Type, Accept\"); res.header(\"Access-Control-Allow-Methods\", \"PUT, POST, GET, DELETE, OPTIONS\"); return next(); });", "percentage": 95}, {"solution": "Use Angular proxy configuration with proxy.conf.json for development environment and set up reverse proxy in express", "percentage": 85}]'::jsonb, 'Express/Node.js backend, Angular frontend on different ports', 'File downloads work without CORS error, preflight requests return 200', 'Setting CORS headers on client-side instead of server-side, not handling OPTIONS requests', 0.92, 'haiku', NOW(), 'https://stackoverflow.com/questions/56149987/getting-around-blocked-by-cors-policy-error-in-angular-app-running-local-insta', 'admin:1764191618');

INSERT INTO knowledge_entries (query, category, hit_frequency, solutions, prerequisites, success_indicators, common_pitfalls, success_rate, claude_version, last_verified, source_url, contributor_email) VALUES
('Response to preflight request doesn''t pass access control check: No ''Access-Control-Allow-Origin'' header is present on the requested resource. Origin ''http://localhost:4200'' is therefore not allowed access', 'angular', 'HIGH', '[{"solution": "Add Access-Control-Allow-Origin header on server. For PHP: header(''Access-Control-Allow-Origin: *''); header(''Access-Control-Allow-Methods: GET, POST, PATCH, PUT, DELETE, OPTIONS''); header(''Access-Control-Allow-Headers: Origin, Content-Type, X-Auth-Token'');", "percentage": 93}, {"solution": "Create Angular proxy configuration file proxy.conf.json and run with ng serve --proxy-config proxy.conf.json", "percentage": 87}]'::jsonb, 'Server-side code access, Angular CLI project', 'HTTP requests complete successfully without CORS errors', 'Adding CORS headers on Angular client-side (headers are request-only, not response), forgetting to handle preflight OPTIONS requests', 0.90, 'haiku', NOW(), 'https://stackoverflow.com/questions/47345282/how-to-add-cors-request-in-header-in-angular-5', 'admin:1764191618');

INSERT INTO knowledge_entries (query, category, hit_frequency, solutions, prerequisites, success_indicators, common_pitfalls, success_rate, claude_version, last_verified, source_url, contributor_email) VALUES
('Response to preflight request doesn''t pass access control check: No ''Access-Control-Allow-Origin'' header is present on the requested resource. Origin ''http://localhost:3000'' is therefore not allowed access', 'angular', 'HIGH', '[{"solution": "Set up Angular development proxy with proxy.conf.json containing target server URL and pathRewrite rules, then run ng serve --proxy-config proxy.conf.json", "percentage": 94}, {"solution": "Configure express CORS middleware: const cors = require(\"cors\"); app.use(cors());", "percentage": 88}]'::jsonb, 'Angular CLI with ng serve, proxy.conf.json file', 'API calls resolve without CORS errors, requests route through proxy correctly', 'Adding headers manually on client-side, not restarting ng serve after proxy config changes, incorrect proxy target URL', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/53473754/angular-7-app-getting-cors-error-from-angular-client', 'admin:1764191618');

INSERT INTO knowledge_entries (query, category, hit_frequency, solutions, prerequisites, success_indicators, common_pitfalls, success_rate, claude_version, last_verified, source_url, contributor_email) VALUES
('Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at ''http://localhost:3000/api/oauth2/login''. Reason: CORS header ''Access-Control-Allow-Origin'' missing', 'angular', 'HIGH', '[{"solution": "Create proxy.json with target configuration: {\"\/api\/oauth2\/login\": {\"target\": \"http:\/\/localhost:3000\/api\/oauth2\/login\", \"secure\": false}} and run ng serve --proxy-config proxy.json", "percentage": 96}, {"solution": "Use Angular CLI proxy feature by creating proxy.conf.json in project root next to package.json", "percentage": 89}]'::jsonb, 'Angular CLI project, development environment', 'OAuth login flow completes without CORS errors, authentication redirects work', 'Using hardcoded absolute URLs in services, not updating service URLs to use proxy paths, forgetting to restart ng serve', 0.93, 'haiku', NOW(), 'https://stackoverflow.com/questions/77223573/how-to-solve-cors-error-in-angular-and-spring-boot', 'admin:1764191618');

INSERT INTO knowledge_entries (query, category, hit_frequency, solutions, prerequisites, success_indicators, common_pitfalls, success_rate, claude_version, last_verified, source_url, contributor_email) VALUES
('Access to XMLHttpRequest at ''https://api-mainnet.magiceden.dev/v2/collections/aos/listings'' from origin ''http://localhost:4200'' has been blocked by CORS policy: No ''Access-Control-Allow-Origin'' header is present on the requested resource', 'angular', 'HIGH', '[{"solution": "Create backend proxy API that calls third-party API, then Angular calls your proxy. Backend handles CORS configuration since you cannot modify external API headers.", "percentage": 97}, {"solution": "Use fetch API with no-cors mode for non-credentialed requests: fetch(url, {mode: ''no-cors''})", "percentage": 72}]'::jsonb, 'Backend server capability, access to external API, no CORS support from external API', 'API calls work through proxy, data loads successfully in Angular component', 'Trying to set CORS headers on client-side, attempting to modify third-party API responses, using fetch no-cors mode with data that requires reading response', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/72775345/angular-httpclient-cors-error-with-api-calls', 'admin:1764191618');

INSERT INTO knowledge_entries (query, category, hit_frequency, solutions, prerequisites, success_indicators, common_pitfalls, success_rate, claude_version, last_verified, source_url, contributor_email) VALUES
('Access to XMLHttpRequest at ''my_url'' from origin ''http://localhost:4200'' has been blocked by CORS policy: Response to preflight request doesn''t pass access control check: It does not have HTTP ok status', 'angular', 'HIGH', '[{"solution": "In Spring Boot backend, use @CrossOrigin annotation on controller methods or add WebMvcConfigurer bean with addCorsMappings to allow specific origins", "percentage": 94}, {"solution": "Configure backend CORS headers to handle preflight OPTIONS requests with proper HTTP status codes", "percentage": 90}]'::jsonb, 'Spring Boot backend, Java backend access', 'PATCH, PUT, DELETE requests complete successfully, preflight OPTIONS requests return 200 status', 'Incomplete CORS header configuration, missing OPTIONS request handling, incorrect header syntax in middleware', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/53258297/access-to-xmlhttprequest-has-been-blocked-by-cors-policy', 'admin:1764191618');

INSERT INTO knowledge_entries (query, category, hit_frequency, solutions, prerequisites, success_indicators, common_pitfalls, success_rate, claude_version, last_verified, source_url, contributor_email) VALUES
('Access to XMLHttpRequest at ''localhost:3000/api/todo'' from origin ''http://localhost:4200'' has been blocked by CORS policy: Response to preflight request doesn''t pass access control check', 'angular', 'HIGH', '[{"solution": "Ensure API URL includes proper protocol: change ''localhost:3000/api/todo'' to ''http://localhost:3000/api/todo'' in service calls", "percentage": 95}, {"solution": "Configure express CORS middleware with proper origin, methods, and credentials settings", "percentage": 89}]'::jsonb, 'Angular HTTP service, Express backend', 'API requests resolve without CORS protocol errors, data loads correctly', 'Missing protocol scheme (http or https) in API URLs, relative URLs mixed with absolute URLs, incorrect URL format in service', 0.92, 'haiku', NOW(), 'https://stackoverflow.com/questions/55271529/access-to-xmlhttprequest-has-been-blocked-by-cors-policy-in-angular/55276128', 'admin:1764191618');

INSERT INTO knowledge_entries (query, category, hit_frequency, solutions, prerequisites, success_indicators, common_pitfalls, success_rate, claude_version, last_verified, source_url, contributor_email) VALUES
('No ''Access-Control-Allow-Origin'' header is present on the requested resource. Origin ''http://localhost:4200'' is therefore not allowed access. Failed: Http failure response for (unknown url): 0 Unknown Error', 'angular', 'HIGH', '[{"solution": "Add @CrossOrigin annotation to Spring Boot REST controller or configure global CORS with WebMvcConfigurer: registry.addMapping(\"/**\").allowedOrigins(\"http:\/\/localhost:4200\")", "percentage": 96}, {"solution": "In backend, configure CORS to allow specific origin, methods (GET, POST, PUT, DELETE), headers (Content-Type, Authorization)", "percentage": 91}]'::jsonb, 'Spring Boot REST API, Angular 5+, both frontend and backend code access', 'Cross-origin requests succeed, create/update/delete operations work without CORS errors', 'Using @CrossOrigin without specifying origins, not allowing required HTTP methods, missing Authorization header in allowed headers', 0.93, 'haiku', NOW(), 'https://stackoverflow.com/questions/74675734/access-to-xmlhttprequest-at-from-origin-has-been-blocked-by-cors-policy-no-acc', 'admin:1764191618');

INSERT INTO knowledge_entries (query, category, hit_frequency, solutions, prerequisites, success_indicators, common_pitfalls, success_rate, claude_version, last_verified, source_url, contributor_email) VALUES
('Angular 7 proxy configuration in package.json with ng serve --proxy-config proxy.conf.json still returns CORS error despite proxy setup', 'angular', 'HIGH', '[{"solution": "Verify proxy.conf.json syntax is correct: {\"\/erp\/*\": {\"target\": \"http:\/\/localhost:8080\/\", \"secure\": false}} and restart ng serve process completely", "percentage": 92}, {"solution": "Use @CrossOrigin annotation in Spring Boot controller or configure global CORS bean instead of relying on proxy", "percentage": 88}]'::jsonb, 'Angular CLI, proxy.conf.json setup, Spring Boot backend', 'Proxy routes requests correctly, CORS errors disappear after proper configuration or backend CORS setup', 'Proxy config changes without restarting ng serve, incorrect target URL format, missing trailing slash in target URL', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/65846687/cors-policy-angular', 'admin:1764191618');

INSERT INTO knowledge_entries (query, category, hit_frequency, solutions, prerequisites, success_indicators, common_pitfalls, success_rate, claude_version, last_verified, source_url, contributor_email) VALUES
('Response to preflight request doesn''t pass access control check for PATCH request from Angular to backend API with incomplete CORS headers', 'angular', 'HIGH', '[{"solution": "Ensure backend CORS configuration includes all necessary HTTP methods: app.set header \"Access-Control-Allow-Methods\", \"GET, POST, PUT, DELETE, PATCH, OPTIONS\"", "percentage": 93}, {"solution": "Handle OPTIONS preflight requests explicitly in backend before other middleware, return 200 status with proper headers", "percentage": 90}]'::jsonb, 'Backend with middleware support, all required HTTP methods needed', 'PATCH requests complete without preflight failures, all HTTP verbs work correctly', 'Missing PATCH method in allowed methods, setting wrong Content-Type, incomplete Access-Control-Allow-Headers configuration', 0.90, 'haiku', NOW(), 'https://stackoverflow.com/questions/60746415/access-to-xmlhttprequest-cors-policy-no-access-control-allow-origin-header-is', 'admin:1764191618');
