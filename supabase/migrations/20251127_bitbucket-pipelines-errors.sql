INSERT INTO knowledge_entries (query, category, hit_frequency, solutions, prerequisites, success_indicators, common_pitfalls, success_rate, claude_version, last_verified, source_url, contributor_email) VALUES
('Bitbucket Pipeline step failed - test suite failed and blocked next steps', 'cicd', 'HIGH', '[{"solution": "Add ''|| true'' to the end of the command to ignore errors and return exit code 0", "percentage": 85}, {"solution": "Use ''set +e'' before the command and ''set -e'' after to continue on failure", "percentage": 82}, {"solution": "Move zip creation to after-script section so it runs regardless of step failure", "percentage": 78}]'::jsonb, 'Bash scripting knowledge, bitbucket-pipelines.yml', 'Step execution continues after test failure, artifacts generated', 'Not understanding Unix exit codes, forgetting to re-enable set -e', 0.82, 'haiku', NOW(), 'https://stackoverflow.com/questions/63204212', 'admin:1764225955'),
('bitbucket-pipelines.yml indentation error prevents pipeline execution', 'cicd', 'HIGH', '[{"solution": "Check YAML indentation carefully - Bitbucket pipelines are sensitive to spacing", "percentage": 90}, {"solution": "Use a YAML validator or IDE with YAML syntax highlighting", "percentage": 88}, {"solution": "Compare indentation between steps, branches, and deployment keywords", "percentage": 85}]'::jsonb, 'YAML formatting understanding', 'Pipeline loads successfully, steps execute as intended', 'Mixing tabs and spaces, inconsistent indentation across file', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/72951423', 'admin:1764225955'),
('Container exceeded memory limit in Bitbucket Pipeline', 'cicd', 'HIGH', '[{"solution": "Add ''size: 2x'' to the step to double memory allocation from 2GB to 4GB", "percentage": 92}, {"solution": "Add options at root level: docker: true, size: 2x for global memory increase", "percentage": 89}, {"solution": "Remove unnecessary docker service if not building images to free up 4GB", "percentage": 85}]'::jsonb, 'Docker knowledge, bitbucket-pipelines.yml configuration', 'Build completes without Out of Memory errors, exit code 0', 'Not understanding memory allocation, setting memory on docker service instead of step', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/60548011', 'admin:1764225955'),
('Command not found: sudo in Bitbucket Pipeline Docker image', 'cicd', 'HIGH', '[{"solution": "Remove sudo - you are already running as root in Docker containers", "percentage": 95}, {"solution": "Use ''apt-get'' directly without sudo since root permissions are implicit", "percentage": 94}]'::jsonb, 'Linux Docker containers, root user knowledge', 'apt-get command executes without permission errors', 'Assuming sudo is always available, forgetting root context in containers', 0.94, 'haiku', NOW(), 'https://stackoverflow.com/questions/55370796', 'admin:1764225955'),
('Docker command not found in Bitbucket Pipeline Python image', 'cicd', 'MEDIUM', '[{"solution": "Use ''image: docker:dind'' or install docker in the image: ''apt-get install docker.io''", "percentage": 88}, {"solution": "Use ''atlassian/default-image:2'' which has docker pre-installed", "percentage": 85}, {"solution": "Ensure docker service is declared: services: - docker in step", "percentage": 80}]'::jsonb, 'Docker installation in containers, image selection', 'Docker commands execute successfully, docker version returns version info', 'Using standard language images without docker, missing docker service declaration', 0.84, 'haiku', NOW(), 'https://stackoverflow.com/questions/78666438', 'admin:1764225955'),
('Pipeline build exceeded maximum time limit and timed out', 'cicd', 'MEDIUM', '[{"solution": "Optimize build process - profile to identify slow steps", "percentage": 80}, {"solution": "Split work across parallel steps to reduce individual step time", "percentage": 78}, {"solution": "Cache dependencies aggressively using caches keyword", "percentage": 75}, {"solution": "Use self-hosted runners with ''size: 4x'' or ''8x'' for longer builds", "percentage": 70}]'::jsonb, 'Performance optimization, parallel pipeline design', 'Build completes within 10 minute default timeout', 'Running all work sequentially, ignoring caching opportunities', 0.74, 'haiku', NOW(), 'https://stackoverflow.com/questions/79662617', 'admin:1764225955'),
('Cannot resolve module: npm package missing in Bitbucket Pipeline', 'cicd', 'HIGH', '[{"solution": "Update Docker image to newer Node version - older versions lack dependencies like promise-polyfill", "percentage": 91}, {"solution": "Use image: node:14 or higher instead of node:4", "percentage": 90}, {"solution": "Run ''npm ci'' instead of npm install for consistency", "percentage": 85}]'::jsonb, 'Node.js package management, Docker image versions', 'npm install completes successfully, module imports work', 'Using outdated Node images, not running npm install before build', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/43390406', 'admin:1764225955'),
('Pipeline fails with exit code 0 even after throw Error in Node script', 'cicd', 'MEDIUM', '[{"solution": "Use process.exit(1) in catch block instead of throwing - throw in promise loses exit code", "percentage": 93}, {"solution": "Ensure error is not caught silently - verify promise chain", "percentage": 88}, {"solution": "Return non-zero exit code explicitly from script", "percentage": 85}]'::jsonb, 'Node.js promise handling, exit codes, error propagation', 'Pipeline fails correctly with exit code 1 when error occurs', 'Throwing errors in promises without propagating exit codes, catching errors silently', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/46039308', 'admin:1764225955'),
('Bitbucket Pipelines enable button stuck - clicking does nothing', 'cicd', 'MEDIUM', '[{"solution": "Remove Pipelines from Settings > Installed Apps to force reinstall and reset UI state", "percentage": 84}, {"solution": "Clear browser cache and refresh the Bitbucket Pipelines page", "percentage": 76}, {"solution": "Contact Atlassian support if uninstall/reinstall doesn''t work", "percentage": 60}]'::jsonb, 'Bitbucket Cloud administration, browser cache management', 'Pipelines enable button works, pipeline config page loads', 'Browser cache corruption, Bitbucket app state issues', 0.80, 'haiku', NOW(), 'https://stackoverflow.com/questions/40065303', 'admin:1764225955'),
('Docker service memory exhaustion in Gradle + Docker Pipeline', 'cicd', 'HIGH', '[{"solution": "Switch to ''image: amazoncorretto:11-alpine-full'' to avoid apk errors and reduce memory footprint", "percentage": 87}, {"solution": "Allocate adequate docker service memory: memory: 2048 in definitions", "percentage": 85}, {"solution": "Install only required packages - avoid full OpenJDK image, use Alpine variant", "percentage": 83}]'::jsonb, 'Docker image selection, Alpine Linux, Java tooling', 'Gradle builds complete, docker service does not crash', 'Using heavy OpenJDK images, insufficient docker service memory allocation', 0.85, 'haiku', NOW(), 'https://stackoverflow.com/questions/64845371', 'admin:1764225955'),
('Docker login succeeds but push fails with authentication required error', 'cicd', 'HIGH', '[{"solution": "Use proper credential format: docker login -u $USERNAME --password-stdin with piped password", "percentage": 89}, {"solution": "Verify Docker Hub credentials are correct and account has push permissions", "percentage": 87}, {"solution": "Check Docker image name matches repository - ensure username prefix", "percentage": 84}]'::jsonb, 'Docker authentication, credential handling, Docker image naming', 'Docker push succeeds without authentication errors', 'Hardcoding credentials in script, incorrect image naming convention', 0.86, 'haiku', NOW(), 'https://stackoverflow.com/questions/44146389', 'admin:1764225955'),
('Cannot use custom Docker image built in previous step', 'cicd', 'MEDIUM', '[{"solution": "Combine steps using ''docker run'' with the built image instead of using as step image", "percentage": 88}, {"solution": "Push image to DockerHub as intermediate step, then reference in next step", "percentage": 84}, {"solution": "Use ''docker image save'' and ''docker image load'' with artifacts to transfer image", "percentage": 76}]'::jsonb, 'Docker architecture, multi-step pipelines, image persistence', 'Image available in subsequent step, Docker run executes inside custom image', 'Expecting Docker cache to persist across steps, using wrong image reference', 0.82, 'haiku', NOW(), 'https://stackoverflow.com/questions/67827364', 'admin:1764225955'),
('React environment variables undefined in Bitbucket Pipeline build', 'cicd', 'HIGH', '[{"solution": "Define REACT_APP_* variables in deployment environment, not build step variables", "percentage": 89}, {"solution": "Add ''deployment: EnvironmentName'' to the build step to access environment variables", "percentage": 87}, {"solution": "Build time is when variables are embedded - use .env.prod at build time only", "percentage": 85}]'::jsonb, 'React build process, environment variable scoping', 'process.env.REACT_APP_* defined at build time, available in browser', 'Expecting runtime environment variables, not understanding build-time embedding', 0.86, 'haiku', NOW(), 'https://stackoverflow.com/questions/71309601', 'admin:1764225955'),
('Artifacts not found in next step - empty artifacts directory', 'cicd', 'HIGH', '[{"solution": "Use relative paths without dot-slash prefix: ''build/** '' not ''./build/**''", "percentage": 91}, {"solution": "Verify artifact files exist in build directory before step completion", "percentage": 88}, {"solution": "Use glob patterns in quotes if starting with *: ''\"*.jar\"''", "percentage": 86}]'::jsonb, 'Glob patterns, artifact path specification', 'Artifacts available in next step, files transferred correctly', 'Using ./ or / in paths, artifact names with spaces or special chars', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/56196454', 'admin:1764225955'),
('Environment variables not shared between pipeline steps', 'cicd', 'MEDIUM', '[{"solution": "Write variables to file in first step: ''printenv > ENVIRONMENT.txt'', read in next step: ''source ENVIRONMENT.txt''", "percentage": 89}, {"solution": "Use artifacts to pass environment file between steps", "percentage": 87}, {"solution": "Define workspace variables in Bitbucket Cloud Settings for persistence", "percentage": 82}]'::jsonb, 'Shell scripting, artifact sharing, Bitbucket variable scoping', 'Environment variables available in subsequent steps', 'Assuming export persists between steps, not using artifacts to share state', 0.85, 'haiku', NOW(), 'https://stackoverflow.com/questions/52481242', 'admin:1764225955'),
('AWS CodeDeploy waiter times out - Waiter encountered terminal failure state', 'cicd', 'MEDIUM', '[{"solution": "Ensure appspec.yml exists at root of deployment artifact - CodeDeploy requires this file", "percentage": 92}, {"solution": "Verify EC2 instance CodeDeploy agent is running and has permissions", "percentage": 85}, {"solution": "Check CloudWatch logs for deployment errors on EC2 instance", "percentage": 80}]'::jsonb, 'AWS CodeDeploy, appspec configuration, EC2 setup', 'Deployment completes successfully with exit code 0', 'Missing appspec.yml, agent not running on EC2, insufficient permissions', 0.85, 'haiku', NOW(), 'https://stackoverflow.com/questions/79004523', 'admin:1764225955'),
('Docker image with conflicting FROM statements in Dockerfile', 'cicd', 'MEDIUM', '[{"solution": "Use only one base image - pick Debian or Alpine and install other languages on top", "percentage": 90}, {"solution": "For multiple languages: FROM python:3.10 then ''apt-get install nodejs''", "percentage": 88}]'::jsonb, 'Dockerfile syntax, Docker best practices, image layering', 'Dockerfile builds successfully with single FROM statement', 'Using multiple FROM for different languages, not understanding Docker layers', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/71321463', 'admin:1764225955'),
('apk: not found error - Alpine package manager not available', 'cicd', 'MEDIUM', '[{"solution": "Use ''image: openjdk:11-alpine'' for Alpine base instead of Debian-based openjdk:11", "percentage": 87}, {"solution": "Switch to Debian image and use apt-get instead: ''image: openjdk:11''", "percentage": 85}, {"solution": "Use docker-compose image that supports apk: ''docker:dind-alpine''", "percentage": 80}]'::jsonb, 'Linux distributions, package managers, image selection', 'apk commands execute, docker-compose installs successfully', 'Using Debian image expecting apk, not choosing correct base image', 0.84, 'haiku', NOW(), 'https://stackoverflow.com/questions/64845371', 'admin:1764225955'),
('Artifact path contains spaces - glob patterns fail silently', 'cicd', 'MEDIUM', '[{"solution": "Use quotes around paths with spaces: ''\"foo bar/build/**\"''", "percentage": 86}, {"solution": "Rename directories to remove spaces in artifact paths", "percentage": 82}, {"solution": "Avoid dot-slash prefix and absolute paths - use relative paths only", "percentage": 80}]'::jsonb, 'Glob pattern syntax, YAML quoting', 'Artifacts with spaces transfer successfully to next step', 'Unquoted paths with spaces, using ./ or .. in artifact definitions', 0.82, 'haiku', NOW(), 'https://stackoverflow.com/questions/75598793', 'admin:1764225955'),
('Bitbucket Pipeline steps timeout waiting for external service response', 'cicd', 'MEDIUM', '[{"solution": "Use ''wait'' or ''sleep'' commands with reasonable timeout: sleep 30 before retry", "percentage": 78}, {"solution": "Implement exponential backoff for service polling to handle intermittent failures", "percentage": 75}, {"solution": "Increase step timeout via max-time configuration if service is slow but reliable", "percentage": 70}]'::jsonb, 'Bash scripting, timeout handling, service orchestration', 'Pipeline continues after service becomes available, no timeout', 'Hard-coded sleep durations, no retry logic, missing timeout configuration', 0.74, 'haiku', NOW(), 'https://stackoverflow.com/questions/78329573', 'admin:1764225955');
