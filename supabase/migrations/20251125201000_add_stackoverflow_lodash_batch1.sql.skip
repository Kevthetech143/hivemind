-- Add Stack Overflow Lodash questions and solutions batch 1

INSERT INTO knowledge_entries (
    query, category, hit_frequency, solutions, prerequisites, success_indicators,
    common_pitfalls, success_rate, claude_version, last_verified, source_url
) VALUES (
    'Differences between Lodash and Underscore.js',
    'stackoverflow-lodash',
    'HIGH',
    '[
        {"solution": "Lodash was created to provide consistent iteration support across arrays, strings, objects, and arguments objects in all browsers, addressing Underscore.js inconsistencies", "percentage": 95, "note": "Core architectural difference - Lodash is a superset of Underscore with additional features"},
        {"solution": "Lodash provides better performance optimization, AMD support, deep clone/merge functionality, and comprehensive documentation compared to Underscore.js", "percentage": 90, "note": "Lodash has evolved into a feature-rich alternative"},
        {"solution": "Use Lodash compatibility build (lodash underscore) if you need Underscore.js compatibility while getting Lodash features", "percentage": 85, "note": "Official compatibility layer available"}
    ]'::jsonb,
    'Understanding of both libraries, familiarity with iteration patterns across different data types',
    'Code using Lodash methods executes correctly across different browsers, consistent behavior on arrays/objects/strings',
    'Underscore.js has inconsistent array handling across browsers (holes in arrays, shadowed properties). Lodash may have different API in some edge cases. Always test cross-browser behavior.',
    0.92,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/13789618/differences-between-lodash-and-underscore-js'
),
(
    'Lodash - difference between .extend() / .assign() and .merge()',
    'stackoverflow-lodash',
    'HIGH',
    '[
        {"solution": ".assign() and .extend() perform shallow copying - they copy property values as-is without recursion", "percentage": 95, "note": "Using _.assign({}, {a:{x:\"x\"}}, {a:{y:\"y\"}}) results in {a: {y: \"y\"}} - nested object is overwritten"},
        {"solution": ".merge() performs deep/recursive copying - nested objects are combined rather than replaced", "percentage": 93, "note": "Using _.merge({}, {a:{x:\"x\"}}, {a:{y:\"y\"}}) results in {a: {x: \"x\", y: \"y\"}} - properties combined"},
        {"solution": "Both .assign() and .merge() modify the target object in-place. Use _.merge({}, source1, source2) to preserve originals", "percentage": 90, "note": "Create empty object as first argument if you don''t want mutations"},
        {"solution": ".merge() preserves existing values when source has undefined, while .assign() overwrites with undefined", "percentage": 85, "note": "Key behavioral difference for partial updates"}
    ]'::jsonb,
    'Lodash library loaded, understanding of shallow vs deep copying, knowledge of object mutation',
    'Merged objects contain expected nested structure, original objects remain unchanged when using empty object as first argument',
    'Both methods mutate the first argument. Using .assign() when you need deep merge will lose nested data. Arrays are replaced entirely in both methods. .merge() with undefined values behaves differently than .assign().',
    0.93,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/19965844/lodash-difference-between-extend-assign-and-merge'
),
(
    'How to do a deep comparison between 2 objects with lodash?',
    'stackoverflow-lodash',
    'HIGH',
    '[
        {"solution": "Use _.isEqual() for deep recursive comparison between two objects", "percentage": 96, "note": "_.isEqual(obj1, obj2) returns boolean - true if objects are equivalent, false otherwise"},
        {"solution": "Combine _.reduce() with _.isEqual() to identify which specific properties differ between objects", "percentage": 85, "note": "_.reduce(obj1, function(result, value, key) { return _.isEqual(value, obj2[key]) ? result : result.concat(key); }, []);"},
        {"solution": "_.isEqual() handles nested structures automatically without requiring manual recursion", "percentage": 90, "note": "Works with deeply nested objects, arrays, and mixed data types"}
    ]'::jsonb,
    'Lodash library loaded, understanding of recursive comparison, familiarity with callback functions',
    '_.isEqual() returns boolean value correctly identifying matching/non-matching objects, _.reduce() result array contains only keys with differences',
    '_.isEqual() only tells you IF objects differ, not WHICH properties differ. The _.reduce() approach only identifies top-level differences. It won''''t catch properties in obj2 that don''t exist in obj1. Reference equality is not used - only value comparison.',
    0.91,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/31683075/how-to-do-a-deep-comparison-between-2-objects-with-lodash'
),
(
    'Lodash remove duplicates from array',
    'stackoverflow-lodash',
    'HIGH',
    '[
        {"solution": "Use _.uniqBy() in Lodash 4.0.0+ to remove duplicate objects based on property: _.uniqBy(data, \"id\")", "percentage": 96, "note": "Keeps first occurrence of each unique value"},
        {"solution": "Use function syntax for complex uniqueness logic: _.uniqBy(data, function(e) { return e.id; })", "percentage": 93, "note": "Allows computed properties or conditional uniqueness"},
        {"solution": "For complete object deduplication, use _.uniqWith(array, _.isEqual) instead", "percentage": 88, "note": "Compares entire objects for equality, not just single property"},
        {"solution": "Legacy Lodash pre-4.0.0 uses _.unique(data, \"id\") - this method was renamed in v4", "percentage": 70, "note": "Only applicable for old versions"}
    ]'::jsonb,
    'Lodash version 4.0.0 or higher installed, array of objects with properties to compare',
    'Returned array contains no duplicate entries based on specified property, function executes without error',
    'Critical breaking change: _.unique() no longer exists in v4+ (was renamed to _.uniqBy()). Attempting _.unique() will fail. Function does not guarantee output order matches input. Comparing entire objects requires _.uniqWith() not _.uniqBy().',
    0.94,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/31740155/lodash-remove-duplicates-from-array'
),
(
    'How can I find and update values in an array of objects?',
    'stackoverflow-lodash',
    'HIGH',
    '[
        {"solution": "Use findIndex() to locate an object then reassign: var foundIndex = items.findIndex(x => x.id == item.id); items[foundIndex] = item;", "percentage": 94, "note": "Updates first matching object only"},
        {"solution": "Use forEach() to handle multiple objects with same ID: items.forEach((element, index) => { if(element.id === item.id) items[index] = item; })", "percentage": 92, "note": "Updates all matching objects in array"},
        {"solution": "Use .find() without reassignment for property updates: let found = items.find(x => x.id === item.id); found.property = newValue;", "percentage": 90, "note": "Objects are referenced - modifications update original array automatically"},
        {"solution": "_.findIndex() alternative from Lodash: var idx = _.findIndex(items, {id: item.id}); items[idx] = item;", "percentage": 88, "note": "Works similarly to native findIndex()"}
    ]'::jsonb,
    'JavaScript array of objects, understanding of object references and array indexing',
    'Target object updated with new values, original array modified correctly, no errors thrown',
    'findIndex() returns -1 if no match found (will cause error if used for direct assignment without checking). Objects are references - using find() alone modifies the array without reassignment. forEach() is slower for single updates but necessary for multiple matching items.',
    0.91,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/35206125/how-can-i-find-and-update-values-in-an-array-of-objects'
),
(
    'What happened to Lodash _.pluck?',
    'stackoverflow-lodash',
    'MEDIUM',
    '[
        {"solution": "_.pluck() was deprecated and replaced with _.map() in Lodash 4.0.0", "percentage": 95, "note": "Use _.map(users, \"name\") instead of _.pluck(users, \"name\")"},
        {"solution": "Alternative: Use native Array.prototype.map() with arrow functions: users.map(u => u.name)", "percentage": 92, "note": "Modern JavaScript replacement without external dependency"},
        {"solution": "For accessing nested properties, use _.map(data, \"user.address.city\") which still works", "percentage": 88, "note": "Lodash _.map() supports dot notation for nested properties"},
        {"solution": "Lodash 3.x still has _.pluck() - only upgrade to v4+ if you can update code references", "percentage": 85, "note": "Breaking change between major versions"}
    ]'::jsonb,
    'Lodash 4.0.0 or later installed, understanding of map operations, knowledge of property extraction patterns',
    'Code executes without "_.pluck is not a function" error, arrays of property values returned correctly',
    '_.pluck() no longer exists in v4+ - will throw error. Must update to _.map(). Native .map() doesn''''t support dot notation like Lodash. Some legacy code still references _.pluck() in package dependencies.',
    0.93,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/35136306/what-happened-to-lodash-pluck'
),
(
    'Importing lodash into angular2 + typescript application',
    'stackoverflow-lodash',
    'HIGH',
    '[
        {"solution": "Install lodash and type definitions: npm install --save lodash && npm install --save-dev @types/lodash", "percentage": 96, "note": "@types/lodash provides TypeScript support"},
        {"solution": "Import using: import * as _ from \"lodash\"; then use _.debounce(), _.findIndex() etc normally", "percentage": 94, "note": "Syntax import * as _ works reliably across TypeScript versions"},
        {"solution": "For better tree-shaking, import individual functions: import * as debounce from \"lodash/debounce\"", "percentage": 85, "note": "Reduces final bundle size significantly"},
        {"solution": "Ensure tsconfig.json includes moduleResolution: \"node\" to properly locate lodash in node_modules", "percentage": 88, "note": "Required for module resolution to work correctly"}
    ]'::jsonb,
    'Angular 2 project setup, npm installed, TypeScript 2.0+, tsconfig.json configured with "moduleResolution": "node"',
    'Lodash methods execute without TypeScript errors, IDE provides autocomplete for lodash functions, application builds successfully',
    'Avoid import _ from "lodash" (may cause "has no default export" error). Some configurations require @types/lodash for type information. Individual function imports have different module paths. CommonJS import behavior differs from ES6 modules.',
    0.94,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/34660265/importing-lodash-into-angular2-typescript-application'
),
(
    'Correct way to import lodash',
    'stackoverflow-lodash',
    'HIGH',
    '[
        {"solution": "For optimal bundle size, use individual module imports: import has from \"lodash/has\"; import map from \"lodash/map\";", "percentage": 95, "note": "Each function is ~2KB, loads only what you need instead of full 100KB library"},
        {"solution": "With Webpack 4+, use named imports from lodash-es for tree-shaking: import { has, map } from \"lodash-es\";", "percentage": 92, "note": "lodash-es includes sideEffects: false for proper tree-shaking in modern bundlers"},
        {"solution": "Standard named imports work with tree-shaking support: import { has, map } from \"lodash\";", "percentage": 75, "note": "Depends on bundler configuration - CommonJS modules don''t tree-shake well"},
        {"solution": "Avoid full library import: import _ from \"lodash\" - includes entire library even if you use one function", "percentage": 30, "note": "Results in largest bundle impact, not recommended"}
    ]'::jsonb,
    'Modern bundler (Webpack 4+, Parcel), understanding of tree-shaking, Lodash library installed',
    'Bundle size is minimized, unused lodash functions are not included in build, imported functions work without errors',
    'CommonJS lodash cannot be effectively tree-shaken - use lodash-es instead. Without proper bundler configuration, named imports may not tree-shake. lodash-es requires module: "es2015" or Babel with modules: false. Named imports from standard lodash may include entire library if tree-shaking isn''''t configured.',
    0.90,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/35250500/correct-way-to-import-lodash'
),
(
    'How to remove undefined and null values from an object using lodash?',
    'stackoverflow-lodash',
    'HIGH',
    '[
        {"solution": "Use _.omitBy() with _.isNil to remove null and undefined: var result = _.omitBy(my_object, _.isNil);", "percentage": 96, "note": "Removes properties where values are null OR undefined"},
        {"solution": "_.isNil checks for both null and undefined simultaneously in one function", "percentage": 94, "note": "More efficient than checking _.isNull or _.isUndefined separately"},
        {"solution": "Native JavaScript alternative: Object.fromEntries(Object.entries(obj).filter(([k, v]) => v != null))", "percentage": 88, "note": "v != null catches both null and undefined using loose equality"},
        {"solution": "Preserves falsy values like false, 0, and empty strings (unlike _.pickBy with _.identity)", "percentage": 90, "note": "Critical difference from other filtering approaches"}
    ]'::jsonb,
    'Lodash version 4.0.0 or later, understanding that _.isNil detects both null and undefined',
    'Result object contains no null/undefined properties, false, 0, and empty strings preserved in output',
    'Do NOT use _.pickBy(obj, _.identity) - it removes all falsy values including false, 0, "". Early lodash versions (3.x) use _.omit() instead of _.omitBy(). Nested properties with null/undefined are not affected - only top-level properties removed. This method only works on single level objects.',
    0.95,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/30812765/how-to-remove-undefined-and-null-values-from-an-object-using-lodash'
),
(
    'How to filter keys of an object with lodash?',
    'stackoverflow-lodash',
    'MEDIUM',
    '[
        {"solution": "Use _.pickBy() with a predicate function: _.pickBy(data, (value, key) => key.startsWith(\"a\"))", "percentage": 96, "note": "Callback receives (value, key) parameters - filter based on either"},
        {"solution": "_.pickBy() returns a new object with only properties matching your condition", "percentage": 94, "note": "Preserves key-value associations unlike _.filter() which returns array of values"},
        {"solution": "For complex filtering logic: _.pickBy(obj, (val, key) => conditions)", "percentage": 90, "note": "Predicate can reference both value and key in decision"},
        {"solution": "Using _.filter() on objects returns array of values, losing key structure - don''t use for key filtering", "percentage": 85, "note": "Common mistake that loses object structure"}
    ]'::jsonb,
    'Lodash version 4.x or later, understanding of predicate functions and arrow syntax',
    'Result object contains only properties matching filter condition, key-value pairs preserved, no array conversion',
    'In Lodash pre-4.x, predicate parameters may differ - verify version before using. _.filter() returns array not object. Using _.omit() with complex conditions requires different approach. Predicate function parameters are (value, key) not (key, value).',
    0.93,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/30726830/how-to-filter-keys-of-an-object-with-lodash'
),
(
    'How to remove undefined values from array but keep 0 and null',
    'stackoverflow-lodash',
    'MEDIUM',
    '[
        {"solution": "Use _.without() to remove only undefined: const newArray = _.without([1,2,3,undefined,0,null], undefined);", "percentage": 95, "note": "Result: [1, 2, 3, 0, null] - only undefined removed"},
        {"solution": "Native JavaScript: array.filter(item => item !== undefined)", "percentage": 93, "note": "Works in all modern browsers, no external dependency required"},
        {"solution": "ES6 syntax: array.filter(val => val !== undefined)", "percentage": 92, "note": "Cleaner modern JavaScript approach"},
        {"solution": "Use typeof check for clarity: array.filter(val => typeof val !== \"undefined\")", "percentage": 85, "note": "More explicit but slightly more verbose"}
    ]'::jsonb,
    'Lodash 4.15.0+ for _.without(), or modern JavaScript environment with Array.filter() support',
    'Resulting array contains all original elements except undefined, 0 and null values preserved',
    'Do NOT use _.compact() - it removes all falsy values (0, null, false, empty string). Avoid .filter(Boolean) for same reason. Loose equality (!=) behaves unexpectedly with null/undefined - use strict (!==). _.without() requires Lodash 4.15.0+.',
    0.92,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/39519440/how-to-remove-undefined-values-from-array-but-keep-0-and-null'
),
(
    'How to Import a Single Lodash Function?',
    'stackoverflow-lodash',
    'MEDIUM',
    '[
        {"solution": "Use lodash-es with webpack 4+ and tree-shaking: import { isEqual } from \"lodash-es\";", "percentage": 95, "note": "Webpack 4 supports sideEffects flag, lodash-es 4.17.7+ enables tree-shaking"},
        {"solution": "Use slash method: import isEqual from \"lodash/isEqual\" (install full lodash package)", "percentage": 92, "note": "Avoids separate per-method packages while minimizing bundle"},
        {"solution": "Avoid individual packages like lodash.isequal - they are deprecated and add 28% more to bundle sizes", "percentage": 90, "note": "Will be removed in Lodash v5"},
        {"solution": "For optimal modern approach: lodash-es + import { functionName } from \"lodash-es\"", "percentage": 95, "note": "Recommended method for bundle size optimization"}
    ]'::jsonb,
    'Webpack 4+ or modern bundler with tree-shaking support, Lodash or lodash-es installed, understanding of module systems',
    'Imported function works correctly, bundle size is minimized, function is properly tree-shaken from build',
    'Per-method packages (lodash.isequal) increase bundle by 28% vs slash method - now discouraged. Old packages import syntax may not support tree-shaking. lodash-es requires Webpack 4+ for optimal tree-shaking. Individual .mjs files may behave differently than barrel imports.',
    0.91,
    'sonnet-4',
    NOW(),
    'https://stackoverflow.com/questions/43479464/how-to-import-a-single-lodash-function'
);
