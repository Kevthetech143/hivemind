INSERT INTO knowledge_entries (query, category, hit_frequency, solutions, prerequisites, success_indicators, common_pitfalls, success_rate, claude_version, last_verified, source_url, contributor_email) VALUES
('SequelizeForeignKeyConstraintError when creating related records', 'orm', 'HIGH', '[{"solution": "Attach a .catch() handler to the create promise to handle the error", "percentage": 95}, {"solution": "Ensure foreign key value exists in parent table before creating child record", "percentage": 90}, {"solution": "Use express error handling middleware to catch and respond appropriately", "percentage": 85}]'::jsonb, 'Node.js, Express, Sequelize ORM', 'Child record created successfully or error caught gracefully', 'Missing .catch() handler leading to unhandled rejection', 0.92, 'haiku', NOW(), 'https://stackoverflow.com/questions/35337738/where-to-handle-the-error-in-a-sequelize-orm-query-statement', 'admin:1764226219'),
('SequelizeValidationError displaying custom validation messages', 'orm', 'HIGH', '[{"solution": "Check err.name === ''SequelizeValidationError'' and access err.errors array", "percentage": 95}, {"solution": "Map over err.errors to extract message from each validation failure", "percentage": 90}, {"solution": "Use err.errors.map(e => ({ [e.path]: e.message })) to create error object", "percentage": 88}]'::jsonb, 'Node.js, Sequelize with validators', 'Validation error messages displayed to user', 'Not checking err.name before accessing err.errors', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/63856212/how-to-display-sequelize-validation-error-messages-in-express-api', 'admin:1764226219'),
('SequelizeDatabaseError with code 42703 undefined column', 'orm', 'HIGH', '[{"solution": "Error code 42703 means undefined column - check migration matches model", "percentage": 98}, {"solution": "Run sequelize db:migrate:undo then sequelize db:migrate to reset", "percentage": 92}, {"solution": "Verify column name in INSERT statement matches database schema", "percentage": 90}]'::jsonb, 'PostgreSQL, Sequelize migrations', 'Column created and query executes successfully', 'Column name mismatch between model and database', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/53469168/sequelize-database-error-with-no-error-message', 'admin:1764226219'),
('SequelizeConnectionError ECONNRESET on database queries', 'orm', 'MEDIUM', '[{"solution": "Increase pool acquire timeout: acquire: 1000000 in pool config", "percentage": 90}, {"solution": "Check if antivirus or firewall is blocking connections", "percentage": 75}, {"solution": "Ensure connection is properly closed after use", "percentage": 85}]'::jsonb, 'Node.js, PostgreSQL/MySQL, Sequelize', 'Database queries complete without connection reset', 'Connection pool exhausted or antivirus interference', 0.80, 'haiku', NOW(), 'https://stackoverflow.com/questions/43300185/sequelize-error-with-query-sending-error-read-econnreset', 'admin:1764226219'),
('SequelizeConnectionError unable to connect to database', 'orm', 'HIGH', '[{"solution": "Use sequelize.authenticate() with .catch() handler", "percentage": 95}, {"solution": "Check host, port, username, password in connection config", "percentage": 92}, {"solution": "Verify database credentials and network connectivity", "percentage": 88}]'::jsonb, 'Node.js, Sequelize connection config', 'Connection established successfully message logged', 'Incorrect credentials or host configuration', 0.90, 'haiku', NOW(), 'https://stackoverflow.com/questions/38650200/how-to-catch-sequelize-connection-error', 'admin:1764226219'),
('SequelizeUniqueConstraintError on duplicate values', 'orm', 'HIGH', '[{"solution": "Catch error with err.name === ''SequelizeUniqueConstraintError'' check", "percentage": 95}, {"solution": "Return HTTP 403 status for duplicate entry", "percentage": 92}, {"solution": "Check if unique constraint exists in migration/model definition", "percentage": 88}]'::jsonb, 'Node.js, Express, Sequelize', 'Duplicate entries prevented and user notified', 'Missing .catch() on create/update promise', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/53903699/how-to-handle-the-sequelize-unique-constraint-error', 'admin:1764226219'),
('SequelizeEagerLoadingError model not associated to another', 'orm', 'HIGH', '[{"solution": "Ensure include array has proper syntax: include: [{ model: Model }]", "percentage": 95}, {"solution": "Verify association defined in model with hasMany/belongsTo", "percentage": 92}, {"solution": "Check foreignKey name matches between models", "percentage": 90}]'::jsonb, 'Sequelize v4+, model associations', 'Eager loading includes related models successfully', 'Wrong include syntax or missing association definition', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/46614290/sequelize-eager-loading-error', 'admin:1764226219'),
('SequelizeEagerLoadingError alias mismatch in associations', 'orm', 'MEDIUM', '[{"solution": "Define foreignKey explicitly in hasMany/belongsTo", "percentage": 92}, {"solution": "Match ''as'' alias name in include with association definition", "percentage": 95}, {"solution": "Check init-models.js for correct association syntax", "percentage": 88}]'::jsonb, 'Sequelize v6+, association aliases', 'Aliased associations resolved correctly', 'Syntax error in association definition or mismatched alias', 0.87, 'haiku', NOW(), 'https://stackoverflow.com/questions/64518283/sequelize-eager-loading-error-on-alias-asociation', 'admin:1764226219'),
('TimeoutError ResourceRequest timed out on long queries', 'orm', 'HIGH', '[{"solution": "Increase acquire timeout: acquire: 1000000 in pool config", "percentage": 95}, {"solution": "Optimize slow SQL queries with proper indexing", "percentage": 90}, {"solution": "Increase pool.max to allow more concurrent connections", "percentage": 85}]'::jsonb, 'Sequelize with MySQL/PostgreSQL, complex queries', 'Queries complete within timeout period', 'Pool exhaustion or slow unoptimized queries', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/45802745/sequelize-timeouterror-resourcerequest-timed-out', 'admin:1764226219'),
('SequelizeConnectionAcquireTimeoutError on concurrent requests', 'orm', 'HIGH', '[{"solution": "Use retry config with backoff: match: [/Deadlock/i], max: 3", "percentage": 90}, {"solution": "Use Promise-based transactions instead of async/await for transactions", "percentage": 85}, {"solution": "Increase connection pool size and acquire timeout", "percentage": 80}]'::jsonb, 'Node.js, concurrent transactions', 'Concurrent requests handled without timeout', 'Transaction deadlock or pool exhaustion', 0.82, 'haiku', NOW(), 'https://stackoverflow.com/questions/71846885/in-sequelize-connection-i-am-getting-operation-timeout-error-how-to-fix-this-is', 'admin:1764226219'),
('Async validation throwing error instead of calling callback', 'orm', 'MEDIUM', '[{"solution": "Add callback parameter to validation function for async handling", "percentage": 95}, {"solution": "Call callback without arguments on success, with error on failure", "percentage": 92}, {"solution": "Use Promises in validators with .then()/.catch()", "percentage": 90}]'::jsonb, 'Sequelize model validators, async operations', 'Async validation completes and error caught properly', 'Not using callback or Promise pattern in async validators', 0.88, 'haiku', NOW(), 'https://stackoverflow.com/questions/22932447/sequelize-validation-throwing-error', 'admin:1764226219'),
('SequelizeBaseError catching all Sequelize errors', 'orm', 'MEDIUM', '[{"solution": "Use instanceof db.Sequelize.BaseError to catch all ORM errors", "percentage": 92}, {"solution": "Check error prototype chain with Object.getPrototypeOf()", "percentage": 85}, {"solution": "Use single catch block with instanceof checks instead of multiple .catch()", "percentage": 88}]'::jsonb, 'Node.js, Sequelize error hierarchy', 'All Sequelize errors caught and handled consistently', 'Using multiple .catch() blocks instead of instanceof checks', 0.85, 'haiku', NOW(), 'https://stackoverflow.com/questions/46973120/how-to-catch-all-types-of-sequelize-error', 'admin:1764226219'),
('Unhandled promise rejection from missing .catch() on create', 'orm', 'HIGH', '[{"solution": "Always attach .catch() handler to Sequelize promises", "percentage": 98}, {"solution": "Use async/await with try/catch blocks", "percentage": 95}, {"solution": "Attach error handling middleware in Express", "percentage": 90}]'::jsonb, 'Node.js, Express, promises', 'All promise rejections caught and handled', 'Missing .catch() on promise chain', 0.93, 'haiku', NOW(), 'https://stackoverflow.com/questions/35337738/where-to-handle-the-error-in-a-sequelize-orm-query-statement', 'admin:1764226219'),
('SequelizeDatabaseError unknown column in eager loading', 'orm', 'MEDIUM', '[{"solution": "Specify correct foreignKey name explicitly in association", "percentage": 95}, {"solution": "Verify column exists in database migration", "percentage": 92}, {"solution": "Check for typos in model attribute names", "percentage": 90}]'::jsonb, 'Sequelize, many-to-many relationships', 'Eager loading returns correct columns', 'Foreign key name mismatch or missing column', 0.87, 'haiku', NOW(), 'https://stackoverflow.com/questions/60229837/why-does-my-sequelize-query-break-with-er-bad-field-error-when-eager-loading-a-m', 'admin:1764226219'),
('SequelizeValidationError undefined isUnique custom validator', 'orm', 'MEDIUM', '[{"solution": "Use unique constraint at database level instead of validator", "percentage": 95}, {"solution": "Set unique: true on field definition in model", "percentage": 92}, {"solution": "Implement async validator with callback or Promise", "percentage": 88}]'::jsonb, 'Sequelize model validation', 'Unique values enforced without async issues', 'Throwing error in async validator instead of using callback', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/22932447/sequelize-validation-throwing-error', 'admin:1764226219'),
('Cannot catch promise rejection from Sequelize operations', 'orm', 'HIGH', '[{"solution": "Wrap Sequelize calls in try/catch with async/await", "percentage": 96}, {"solution": "Use .catch() on promise chain instead of relying on try/catch", "percentage": 94}, {"solution": "Ensure middleware catches unhandled rejections", "percentage": 85}]'::jsonb, 'Node.js async operations', 'All errors caught in try/catch or .catch() blocks', 'Mixing Promise and async/await patterns incorrectly', 0.91, 'haiku', NOW(), 'https://stackoverflow.com/questions/30100514/sequelize-error-handling', 'admin:1764226219'),
('AssertionError SSL certificate validation on PostgreSQL', 'orm', 'LOW', '[{"solution": "Add dialectOptions: { ssl: true } to connection config", "percentage": 92}, {"solution": "Update Node.js to fix TLS issues", "percentage": 85}, {"solution": "Disable SSL if not required: dialectOptions: { ssl: false }", "percentage": 80}]'::jsonb, 'Node.js 8+, PostgreSQL with SSL', 'Connection established without assertion errors', 'SSL configuration mismatch with database server', 0.78, 'haiku', NOW(), 'https://stackoverflow.com/questions/50206773/nodejs-sequelize-throw-new-errors-assertionerror-error-connection', 'admin:1764226219'),
('SequelizeEagerLoadingError missing brackets in include array', 'orm', 'MEDIUM', '[{"solution": "Wrap include models in array brackets: include: [{...}]", "percentage": 98}, {"solution": "Use all: true, nested: true for recursive includes", "percentage": 88}, {"solution": "Verify model names and associations before including", "percentage": 90}]'::jsonb, 'Sequelize query building', 'Related models included successfully in query results', 'Incorrect include syntax without array brackets', 0.92, 'haiku', NOW(), 'https://stackoverflow.com/questions/46614290/sequelize-eager-loading-error', 'admin:1764226219'),
('Foreign key constraint validation error on create with invalid ID', 'orm', 'HIGH', '[{"solution": "Verify parent record exists before creating child", "percentage": 93}, {"solution": "Use foreignKeyConstraints: true in migration options", "percentage": 88}, {"solution": "Handle with .catch() and validate input before create", "percentage": 90}]'::jsonb, 'Relational database, Sequelize ORM', 'Child records created only with valid parent IDs', 'Invalid foreign key value in request payload', 0.89, 'haiku', NOW(), 'https://stackoverflow.com/questions/35337738/where-to-handle-the-error-in-a-sequelize-orm-query-statement', 'admin:1764226219'),
('SequelizeConnectionError wrong host or port configuration', 'orm', 'MEDIUM', '[{"solution": "Verify host, port, database name in config match Heroku/RDS settings", "percentage": 96}, {"solution": "Use connection pooler for production (pooler.supabase.com)", "percentage": 92}, {"solution": "Test connection with sequelize.authenticate()", "percentage": 94}]'::jsonb, 'Cloud databases (Heroku, RDS, Supabase)', 'Database connection established successfully', 'Incorrect host or port in configuration', 0.90, 'haiku', NOW(), 'https://stackoverflow.com/questions/50206773/nodejs-sequelize-throw-new-errors-assertionerror-error-connection', 'admin:1764226219');
